{"version":3,"sources":["playlist/store/reducer.ts","player/store/reducer.ts","player/store/state.ts","workout/store/reducer.ts","playlist/store/index.ts","shared/EditText.tsx","shared/EditToggle.tsx","exercise/Exercise.tsx","util/move.ts","exercise/ExerciseList.tsx","util/ScrollToTop.tsx","Main.tsx","navigation/navigation-actions.tsx","navigation/BottomNavigation.tsx","navigation/TopNavigation.tsx","countdown/store/state.ts","countdown/store/reducer.ts","countdown/store/selectors.ts","player/usePlayerPageDispatcher.ts","playlist/PlaylistItem.tsx","playlist/Playlist.tsx","playlist/PlaylistItemCurrent.tsx","player/Controls.tsx","player/CountdownIsZeroEffect.tsx","countdown/time-utils.tsx","countdown/Countdown.tsx","countdown/Arc.tsx","countdown/useColors.ts","countdown/PieCountdown.tsx","countdown/withMargin.tsx","countdown/PieSlice.tsx","countdown/CountdownTickEffect.tsx","player/CountdownHeader.tsx","player/HeaderAction.tsx","shared/Avatar.tsx","shared/card/CardDescription.tsx","shared/card/CardText.tsx","shared/card/CardTitle.tsx","player/WorkoutHeader.tsx","player/Header.tsx","player/useLayout.ts","player/Player.tsx","shared/UnderConstruction.tsx","shared/NumberInput.tsx","workout/edit/Duration.tsx","workout/edit/AvatarEdit.tsx","workout/edit/CardDescriptionEdit.tsx","workout/edit/CardTitleEdit.tsx","workout/edit/HeaderAction.tsx","workout/edit/HeaderEdit.tsx","workout/edit/useWorkout.ts","workout/edit/WorkoutEdit.tsx","workout/toPlaylistData.tsx","shared/card/Card.tsx","workout/list/AddWorkout.tsx","shared/card/CardTextAction.tsx","workout/list/DeleteMenuItem.tsx","workout/list/ContextMenu.tsx","workout/list/Workout.tsx","workout/list/WorkoutList.tsx","App.tsx","serviceWorker.ts","theme/colors.ts","theme/palette.ts","theme/theme.ts","index.tsx","workout/store/index.ts","player/store/index.ts","util/uid.ts","workout/store/state.ts","playlist/store/state.ts","util/id.ts","workout/store/workout-state-persist.tsx","util/state-persist.tsx"],"names":["NOT_FOUND","playlistReducer","set","_","playlist","initialState","setCurrentItem","state","index","currentItemIndex","prev","isFirstIndex","next","items","length","isLastIndex","playerReducer","play","playState","pause","stop","playerAtom","atom","key","default","workoutReducer","add","workout","delete","slice","loadSuccess","workouts","select","update","useStyles","makeStyles","theme","root","alignItems","backgroundColor","palette","background","paper","boxShadow","shadows","borderRadius","color","primary","main","display","gridTemplateColumns","marginBottom","spacing","action","EditText","inputEl","onOk","onCancel","rootProps","useTheme","classes","defaultValue","props","useState","value","setValue","error","setError","handleCancel","inputRef","React","useRef","useEffect","current","focus","ClickAwayListener","onClickAway","Box","className","type","onChange","ev","target","validity","valid","IconButton","size","onClick","disabled","EditToggle","displayEl","isEdit","setIsEdit","edit","data","height","variables","item","inner","paddingLeft","paddingRight","drag","contrastText","padding","width","cursor","Exercise","exercise","onDelete","Typography","variant","name","textfield","fab","float","marginTop","ExerciseList","exercises","onAdd","onEdit","isAdd","setIsAdd","handleDelete","dragIdx","setDragIdx","list","setList","handleDragOver","dropIdx","preventDefault","from","to","move","handleDragEnd","style","visibility","console","log","map","i","draggable","onDragStart","idx","dataTransfer","effectAllowed","setData","JSON","stringify","handleDragStart","onDragOver","onDragEnd","opacity","fontSize","typography","h4","id","TextField","inputProps","required","bind","globalThis","uid","Fab","ScrollToTop","el","pathname","useLocation","scrollTo","navHeight","overrides","MuiBottomNavigation","bottom","left","justifyItems","justifyContent","overflow","position","right","top","maxWidth","breakpoints","values","lg","Main","children","rootEl","ref","data-testid","navigationActions","label","icon","FtBottomNavigation","history","useHistory","location","BottomNavigation","event","newValue","push","BottomNavigationAction","toolbar","secondary","light","TopNavigation","AppBar","Toolbar","Button","startIcon","msLeft","msTotal","isRunning","countdownAtom","reset","countdownReducer","start","tick","Math","max","durationMs","selector","get","usePlayerPageDispatcher","useRecoilState","playlistAtom","playlistState","setPlaylistState","setPlayerState","useSetRecoilState","setCountdown","currentItem","nextItem","prevItem","nextItemIndex","isBreakItem","tags","isBreak","borderColor","borderLeft","pr","textOverflow","whiteSpace","PlaylistItem","isCurrent","component","fontWeight","toUpperCase","Chip","breakWork","highlightItem","highlight","Playlist","useRecoilValue","dispatch","currentItemIndexOrZero","filter","prepareItems","PlaylistItemCurrent","bgcolor","pl","useRootStyles","textAlign","textTransform","text","useInnerStyles","withIconButton","Play","Pause","Prev","Next","Controls","minHeight","useProps","CountdownIsZeroEffect","isZero","fromNumber","timeMs","h","floor","m","s","ms","format","time","toString","padStart","ds","timeUtils","toTimeString","Countdown","dark","fontWeightBold","calcPoint","r","cx","cy","percent","sin","PI","cos","Arc","fStart","fEnd","fill","useMemo","calcPointR","startX","startY","endX","endY","largeArcFlag","round","useArc","d","useColors","invertColors","WrappedComponent","PieSliceWithMargin","setClipPath","clipIf","fractionStart","fractionEnd","random","viewBox","clipPath","x","y","dominantBaseline","textAnchor","fontFamily","VIEWBOX_SIZE","PieCountdown","countdownState","fractionDone","done","CountdownTickEffect","setCountdownState","setInterval","clearInterval","CountdownHeader","gridArea","HeaderAction","onClose","Avatar","p","CardDescription","minWidth","CardText","description","title","stopPropagation","alignContent","gridTemplateAreas","useRootProps","CardTitle","WorkoutHeader","short","Header","HeaderImpl","useMediaQueries","up","mq","upxs","upsm","upmd","useRowHeights","textHeight","controlsHeight","currentHeight","totalHeight","listHeight","navbar","gridTemplateRows","useLayout","matches","useMediaQuery","mqi","useActiveMediaQuery","Player","styles","playerState","prevCurrentItemIndex","scrollBy","behavior","goBack","UnderConstruction","button","h5","marginLeft","duration","shape","flex","NumberInput","min","Number","MAX_VALUE","step","initial","Duration","avatar","AvatarEdit","onUpdate","minLength","maxLength","CardDescriptionEdit","multiline","rows","CardTitleEdit","HeaderEdit","handleUpdate","updatedValue","result","mb","useWorkout","notFound","workoutAtom","workoutState","setWorkoutState","useParams","findIndex","w","WorkoutEdit","breakMs","workMs","breakSec","workSec","toPlaylistItemData","expand","acc","b","toPlaylistData","toPlaylistItemDataBound","reduce","Card","gridColumn","iconContainer","borderStyle","borderWidth","AddWorkout","Date","toLocaleDateString","newWorkout","CardTextAction","DeleteMenuItem","canDelete","setCanDelete","MenuItem","ListItemIcon","Switch","ContextMenu","anchorEl","setAnchorEl","handleClose","handleMenuClick","menuOption","currentTarget","Menu","open","Boolean","Workout","onCardClick","onContextMenuClick","WorkoutList","handleContextMenuClick","Error","gridGap","handleCardClick","App","touchAction","path","exact","window","hostname","match","bluegrey400","bluegrey800","SPACING","countdown","player","MuiCssBaseline","outline","MuiBottomNavigationAction","wrapper","MuiListItemIcon","MuiMenu","MuiFab","MuiInputBase","createMuiTheme","MuiTypography","variantMapping","h1","h2","h3","MuiToolbar","caption","lineHeight","responsiveFontSizes","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","basename","process","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message","gen4","loadState","WORKOUT_STATE_KEY","lastId","WorkoutStatePersist","persistState","stateJson","localStorage","getItem","parse","err","warn","setItem"],"mappings":"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","file":"static/js/main.a40746f5.chunk.js","sourcesContent":["import { initialState, PlaylistState } from \"./state\";\nimport { PlaylistActionType } from \"./actions\";\n\nexport const NOT_FOUND = -1;\n\nexport type PlaylistReducerFn = (state: PlaylistState, payload?: any) => PlaylistState;\nexport type PlaylistReducer = { [A in PlaylistActionType]: PlaylistReducerFn };\n\nconst isFirstIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex === 0;\n}\n\nconst isLastIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex >= (state.items.length - 1);\n}\n\nconst set: PlaylistReducerFn = (_, playlist) => {\n  return {\n    ...initialState,\n    ...playlist,\n  }\n}\n\nconst setCurrentItem: PlaylistReducerFn = (state, index) => {\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst prev: PlaylistReducerFn = (state: PlaylistState): PlaylistState => {\n  const currentItemIndex = isFirstIndex(state)\n    ? 0\n    : state.currentItemIndex - 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nconst next: PlaylistReducerFn = (state: PlaylistState): PlaylistState => {\n  if (isLastIndex(state)) {\n    return state;\n  }\n  const currentItemIndex = state.currentItemIndex + 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nexport const playlistReducer: PlaylistReducer = {\n  set,\n  setCurrentItem,\n  prev,\n  next,\n}\n","import { PlayerState } from \"./state\";\nimport { PlayerActionType } from \"./actions\";\n\nexport type PlayerReducerFn = (state: PlayerState, payload?: any) => PlayerState;\n\nconst play: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'playing',\n  }\n}\n\nconst pause: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'paused',\n  }\n}\n\nconst stop: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'stopped',\n  }\n}\n\nconst prev: PlayerReducerFn = state => state;\n\nconst next: PlayerReducerFn = state => state;\n\nexport const playerReducer: {[A in PlayerActionType]: PlayerReducerFn} = {\n  play,\n  pause,\n  stop,\n  prev,\n  next,\n}\n","import { atom } from \"recoil\";\n\n\nexport type PlayState = 'playing' | 'paused' | 'stopped';\n\nexport interface PlayerState {\n  playState: PlayState;\n}\n\nexport const initialState: PlayerState = {\n  playState: 'stopped',\n}\n\nexport const playerAtom = atom({\n  key: 'playerState',\n  default: initialState,\n});","import { WorkoutActionType } from './actions';\nimport { WorkoutState } from './state';\n\n\nexport const NOT_FOUND = -1;\n\nexport type WorkoutReducerFn = (state: WorkoutState, payload?: any) => WorkoutState\nexport type WorkoutReducer = {[A in WorkoutActionType]: WorkoutReducerFn};\n\nconst add: WorkoutReducerFn = (state, workout) => {\n  return {\n    ...state,\n    items: [ workout, ...state.items ],\n  }\n}\n\nconst deleteItem = (state: WorkoutState): WorkoutState => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nconst loadSuccess: WorkoutReducerFn = (state, workouts) => {\n  return {\n    ...state,\n    items: workouts,\n  }\n}\n\nconst select: WorkoutReducerFn = (state, index) => {\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst update: WorkoutReducerFn = (state, workout) => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      workout,\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nexport const workoutReducer: WorkoutReducer =  {\n  add,\n  delete: deleteItem,\n  loadSuccess,\n  select,\n  update,\n}\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","import { BoxProps, ClickAwayListener, IconButton, makeStyles, TextFieldProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DoneIcon from '@material-ui/icons/Done';\nimport React, { useEffect, useState } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[12],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'auto min-content min-content',\n    marginBottom: theme.spacing(.3),\n  },\n  action: {\n  }\n}));\n\nexport interface EditResult {\n  value?: any;\n  error: boolean;\n}\n\nexport interface EditTextProps extends BoxProps {\n  inputEl: React.ReactElement<TextFieldProps>; // TODO: generalize\n  onOk?: (data: EditResult) => void;\n  onCancel?: () => void;\n}\n\nconst EditText: React.FC<EditTextProps> = ({ inputEl, onOk, onCancel, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const defaultValue = inputEl.props.defaultValue;\n  const [value, setValue] = useState(defaultValue);\n  const [error, setError] = useState(false);\n  const handleOk = () => onOk && onOk({error, value});\n  const handleCancel = () => onCancel && onCancel();\n  const handleChange = (ev: any) => { // TODO: type\n    setValue(ev.target.value);\n    setError(!ev.target.validity.valid)\n  } \n  const inputRef = React.useRef<HTMLInputElement>(null);\n  useEffect(() => { inputRef.current && inputRef.current.focus(); }); // TODO: revisit\n\n  return (\n    <ClickAwayListener\n      onClickAway={handleCancel}\n    >\n      <Box\n        className={classes.root}\n        {...rootProps}\n      >\n        <inputEl.type\n          error={error}\n          inputRef={inputRef}\n          defaultValue={defaultValue}\n          onChange={handleChange}\n          {...inputEl.props}\n        >\n          {value}\n        </inputEl.type>\n        <IconButton\n          className={classes.action}\n          size='small'\n          onClick={handleCancel}\n        >\n          <CloseIcon\n            color='inherit'\n          />\n        </IconButton>\n        <IconButton\n          className={classes.action}\n          disabled={error}\n          size='small'\n          onClick={handleOk}\n        >\n          <DoneIcon\n            color='inherit'\n          />\n        </IconButton>\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default EditText;","import Box from '@material-ui/core/Box';\nimport React, { PropsWithChildren, useState } from 'react';\nimport EditText, { EditResult, EditTextProps } from './EditText';\n\n\nexport interface EditToggleProps extends EditTextProps {\n  displayEl: React.ReactElement<PropsWithChildren<any>>;\n}\n\nconst EditToggle: React.FC<EditToggleProps> = ({ inputEl, displayEl, onOk, onCancel, ...rootProps }) => {\n  const handleOk = (data: EditResult) => {\n    onOk && onOk(data); \n    setIsEdit(false);\n  };\n  const handleCancel = () => {\n    onCancel && onCancel();\n    setIsEdit(false);\n  }\n\n  const [isEdit, setIsEdit] = useState(false);\n  const edit =\n    <EditText\n      inputEl={inputEl}\n      onCancel={handleCancel}\n      onOk={handleOk}\n    />;\n\n  return (\n    <Box\n      onClick={() => !isEdit && setIsEdit(true)} // TODO: consider edit button\n      {...rootProps}\n    >\n      {isEdit\n        ? edit\n        : displayEl\n      }\n    </Box>\n  );\n}\n\nexport default EditToggle;","import { BoxProps, IconButton, makeStyles, Typography } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport React from 'react';\nimport { ExerciseData } from './data';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[2],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: `${theme.spacing(4)}px auto min-content`,\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  inner: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  drag: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    height: '100%',\n    padding: theme.spacing(1),\n    width: '100%',\n    '&:hover': {\n      cursor: 'grab',\n    }\n  },\n  action: {\n  }\n}));\n\nexport interface ExerciseProps extends BoxProps {\n  exercise: ExerciseData;\n  onDelete: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function Exercise(props: ExerciseProps) {\n  const { exercise, onDelete } = props;\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <Box\n      className={classes.root}\n    >\n      <DragHandleIcon\n        className={classes.drag}\n      />\n      <Typography\n        variant='h4'\n        className={classes.inner}\n      >\n        {exercise.name}\n      </Typography>\n      <IconButton\n        className={classes.action}\n        onClick={onDelete}\n      >\n        <DeleteOutlineIcon\n          color='primary'\n        />\n      </IconButton>\n    </Box>\n  );\n}","export const move = <T>(list: T[], from: number, to: number): T[] => {\n  if (to > from) {\n      return [\n          ...list.slice(0, from),\n          ...list.slice(from + 1, to + 1),\n          [...list][from],\n          ...list.slice(to + 1),\n      ];\n  } else if (to < from) {\n      return [\n          ...list.slice(0, to),\n          [...list][from],\n          ...list.slice(to, from),\n          ...list.slice(from + 1),\n      ];\n  }\n  return [...list];\n};","import { Box, Fab, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport React, { useState } from 'react';\nimport EditText, { EditResult } from '../shared/EditText';\nimport EditToggle from '../shared/EditToggle';\nimport uid from '../util/uid';\nimport { ExerciseData } from './data';\nimport Exercise from './Exercise';\nimport { move } from '../util/move';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    alignItems: 'center',\n    display: 'grid',\n    height: theme.variables.playlist.item.height,\n    paddingLeft: theme.spacing(5),\n    paddingRight: theme.spacing(1),\n  },\n  fab: {\n    float: 'right',\n    marginBottom: theme.spacing(.5),\n    marginTop: theme.spacing(.5),\n  },\n}));\n\nexport interface ExerciseListProps {\n  exercises: ExerciseData[];\n  onDelete?: (exercises: ExerciseData[]) => void;\n  onAdd?: (exercise: ExerciseData) => void;\n  onEdit?: (exercise: ExerciseData, index: number) => void;\n}\n\nconst ExerciseList: React.FC<ExerciseListProps> = (props) => {\n  const { exercises, onAdd, onDelete, onEdit } = props;\n  const [isAdd, setIsAdd] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const handleDelete = (index: number) => onDelete && onDelete([...exercises.slice(0, index), ...exercises.slice(index + 1)]);\n  const handleEdit = (index: number) => (update: EditResult) => onEdit && onEdit({ ...exercises[index], name: update.value }, index); // TODO: handle error\n  const handleAdd = ({ value: name, error }: EditResult) => { // TODO: type\n    setIsAdd(false);\n    onAdd && onAdd({ id: uid(), name });\n  };\n\n  const [dragIdx, setDragIdx] = useState(-1);\n  const [list, setList] = useState<ExerciseData[]>([...exercises]);  \n  const handleDragStart = (ev: React.DragEvent, idx: number) => {\n    setDragIdx(idx);\n    ev.dataTransfer.effectAllowed = 'move';\n    ev.dataTransfer.setData('item', JSON.stringify(idx));\n    // this will hide the item in the list\n    // while the dragged item still being visible\n    //setTimeout(() => (target as HTMLElement).style.visibility = 'hidden');\n  };\n  const handleDragOver = (ev: React.DragEvent, dropIdx: number) => {\n    ev.preventDefault();\n    setList(list => move(list, dragIdx, dropIdx));\n    setDragIdx(dropIdx);\n  };\n  const handleDragEnd = (ev: React.DragEvent) => {\n    const {target} = ev;\n    (target as HTMLElement).style.visibility = 'visible';\n    setDragIdx(-1);\n  };\n\n  console.log('###', 'redraw');\n\n  return (\n    <Box>\n      {list.map((exercise: ExerciseData, i: number) => \n        <EditToggle\n          draggable={true}\n          onDragStart={(ev: React.DragEvent) => handleDragStart(ev, i)}\n          onDragOver={(ev: React.DragEvent) => handleDragOver(ev, i)}\n          onDragEnd={handleDragEnd}\n          style={i === dragIdx ? { opacity: 0.8 } : {}}\n          fontSize={theme.typography.h4.fontSize}\n          key={exercise.id}\n          onOk={handleEdit(i)}\n          inputEl={\n            <TextField\n              defaultValue={exercise.name}\n              inputProps={{ required: true }}\n              className={classes.textfield}\n            />\n          }\n          displayEl={\n            <Exercise\n              exercise={exercise}\n              onDelete={handleDelete.bind(globalThis, i)}\n            />\n          }\n        />\n      )}\n      {isAdd && <EditText\n        fontSize={theme.typography.h4.fontSize}\n        onOk={handleAdd}\n        onCancel={() => setIsAdd(false)}\n        inputEl={\n          <TextField\n            defaultValue='New Exercise'\n            inputProps={{ required: true }}\n            className={classes.textfield}\n          />}\n      />}\n      <Fab\n        color='secondary'\n        disabled={isAdd}\n        onClick={() => setIsAdd(true)}\n        className={classes.fab}\n      >\n        <AddIcon />\n      </Fab>\n    </Box>\n  );\n}\n\nexport default ExerciseList;","import { MutableRefObject, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport interface ScrollToTopProps {\n  el: MutableRefObject<HTMLElement>;\n}\n\nconst ScrollToTop: React.FC<ScrollToTopProps> = (props) => {\n  const { el } = props;\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    el.current?.scrollTo && el.current.scrollTo(0, 0);\n  }, [pathname, el]);\n\n  return null;\n}\n\nexport default ScrollToTop;","import { makeStyles } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport ScrollToTop from './util/ScrollToTop';\n\nconst useStyles = makeStyles((theme) => {\n  const navHeight = (theme.overrides?.MuiBottomNavigation?.root as any).height;\n  return {\n    root: {\n      bottom: navHeight,\n      display: 'grid',\n      left: 0,\n      justifyItems: 'center',\n      justifyContent: 'stretch',\n      overflow: 'auto',\n      position: 'fixed',\n      right: 0,\n      top: navHeight,\n    },\n    inner: {\n      maxWidth: theme.breakpoints.values.lg,\n      position: 'relative',\n      width: '100%',\n    }\n  }\n});\n\nconst Main = ({ children }: any) => {\n  const rootEl = React.useRef<any>(null);\n  const theme = useTheme();\n  const { root, inner } = useStyles(theme);\n  return (\n    <div\n      ref={rootEl}\n      data-testid='main'\n      className={root}\n    >\n      <ScrollToTop el={rootEl} />\n      <div\n        className={inner}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default Main;\n","import FavoriteIcon from '@material-ui/icons/Favorite';\nimport FitnessCenterIcon from '@material-ui/icons/FitnessCenter';\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport React from 'react';\n\nexport const navigationActions = [\n  { \n    label: 'Workouts',\n    value: `workouts`,\n    icon: <FitnessCenterIcon />,\n  },\n  { \n    label: 'Recents',\n    value: `recents`,\n    icon: <RestoreIcon />,\n  },\n  { \n    label: 'Favorites',\n    value: `favorites`,\n    icon: <FavoriteIcon />,\n  },\n  // TODO: use or lose\n  // { \n  //   label: 'Exercises',\n  //   value: '/exercises',\n  //   icon: <ListIcon />,\n  // },\n];","import BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Box from '@material-ui/core/Box';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { navigationActions } from './navigation-actions';\n\nconst FtBottomNavigation = () => {\n  const history = useHistory();\n  const [value, setValue] = useState(history.location.pathname);\n  useEffect(() => setValue(history.location.pathname), [history.location.pathname]);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n    history.push(`/${newValue}`);\n  };\n\n  return (\n    <Box\n      position='fixed'\n      bottom={0}\n      left={0}\n      right={0}\n    >\n      <BottomNavigation\n        value={value}\n        onChange={handleChange}\n      >\n        {navigationActions.map(action =>\n          <BottomNavigationAction\n            key={action.value}\n            label={action.label}\n            value={action.value}\n            icon={action.icon}\n          />\n        )}\n      </BottomNavigation>\n    </Box>\n  );\n}\n\nexport default FtBottomNavigation;\n","import { makeStyles, useTheme } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Timer from '@material-ui/icons/Timer';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  toolbar: {\n    color: theme.palette.secondary.light,\n  }\n}));\n\nfunction TopNavigation() {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <AppBar>\n      <Toolbar\n        className={classes.toolbar}\n      >\n        <Button\n          color='inherit'\n          variant='text'\n          startIcon={<Timer />}\n        >\n          <Typography\n            variant='subtitle1'\n          >\n            fitlery\n          </Typography>\n        </Button>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default TopNavigation;\n","import { atom } from \"recoil\";\n\n\nexport const MS_INTERVAL = 100; // TODO\nconst MS_TOTAL = 3000; // TODO\n\nexport interface CountdownState {\n  msLeft: number;\n  msTotal: number;\n  isRunning: boolean;\n}\n\nexport const initialState: CountdownState = {\n  msLeft: MS_TOTAL,\n  msTotal: MS_TOTAL,\n  isRunning: false,\n}\n  \nexport const countdownAtom = atom({\n  key: 'countdownState',\n  default: initialState,\n});\n","import { CountdownState, MS_INTERVAL } from \"./state\"\n\n\nconst start = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: true }\n}\n\nconst stop = (state: CountdownState): CountdownState => {\n  return { ...reset(state), isRunning: false }\n}\n\nconst pause = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: false }\n}\n\nconst tick = (state: CountdownState): CountdownState => {\n  const { msLeft, isRunning } = state;\n  const isZero = msLeft === 0;\n  return !isRunning || isZero\n    ? state\n    : { ...state, msLeft: Math.max(0, msLeft - MS_INTERVAL) };\n}\n\nconst set = (state: CountdownState, durationMs: number): CountdownState => {\n  return { ...state, msLeft: durationMs, msTotal: durationMs, };\n}\n\nconst reset = (state: CountdownState): CountdownState => {\n  return { ...state, msLeft: state.msTotal };\n}\n\nexport const countdownReducer = {\n  start,\n  stop,\n  pause,\n  tick,\n  set,\n  reset,\n};\n","// TODO: investigate\n// Cannot update a component (`Batcher`) while rendering a different component (`Countdown`)...\n\nimport { selector } from 'recoil';\nimport { countdownAtom } from './state';\n\nexport const isZeroCountdownState = selector<boolean>({\n  key: 'isZeroCountdownState',\n  get: ({get}) => {\n    const countdownState = get(countdownAtom);\n    return countdownState.msLeft === 0;\n  },\n});","import { useRecoilState, useSetRecoilState } from 'recoil';\nimport { countdownAtom, countdownReducer } from '../countdown/store';\nimport { NOT_FOUND, PlaylistActionType, playlistAtom, PlaylistData, playlistReducer } from '../playlist/store';\nimport { PlayerActionType, playerAtom, playerReducer } from './store';\n\n\nexport type PlayerPageDispatchers = { [A in PlayerActionType | PlaylistActionType]: (payload?: any) => void };\n\nconst usePlayerPageDispatcher = (): PlayerPageDispatchers => {\n  const [playlistState, setPlaylistState] = useRecoilState(playlistAtom);\n  const setPlayerState = useSetRecoilState(playerAtom);\n  const setCountdown = useSetRecoilState(countdownAtom);\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = items[Math.max(currentItemIndex, 0)];\n  const nextItem = items[currentItemIndex + 1];\n  const prevItem = items[currentItemIndex - 1];\n\n  const set = (playlist: PlaylistData) => {\n    stop();\n    setPlaylistState(state => playlistReducer.set(state, playlist));\n  };\n\n  const play = () => {\n    setPlayerState(playerReducer.play);\n    if (playlistState.currentItemIndex === NOT_FOUND) {\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, 0));\n      setCountdown(state => countdownReducer.set(state, currentItem.durationMs));\n    }\n    setCountdown(countdownReducer.start);\n  };\n\n  const stop = () => {\n    setPlayerState(playerReducer.stop);\n    setPlaylistState(state => playlistReducer.setCurrentItem(state, NOT_FOUND)); \n    setCountdown(countdownReducer.stop);\n  };\n\n  const pause = () => {\n    setPlayerState(playerReducer.pause);\n    setCountdown(countdownReducer.pause);\n  }\n\n  const prev = () => {\n    if (prevItem) {\n      setPlaylistState(playlistReducer.prev);\n      setCountdown(state => countdownReducer.set(state, prevItem.durationMs));\n    } else {\n      setCountdown(countdownReducer.reset);\n    }\n  }\n\n  const next = () => {\n    if (nextItem) {\n      const nextItemIndex = currentItemIndex + 1;\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, nextItemIndex)); \n      setCountdown(state => countdownReducer.set(state, playlistState.items[nextItemIndex].durationMs));\n    } else {\n      stop();\n    }\n  };\n\n  const setCurrentItem = (index: number) => {\n    // TODO: validate\n    if (currentItemIndex === index) {\n      next();\n    } else {\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, index)); \n      setCountdown(state => countdownReducer.set(state, playlistState.items[index].durationMs));\n    }\n  };\n\n  const dispatch: PlayerPageDispatchers = {\n    set,\n    setCurrentItem,\n    play,\n    pause,\n    stop,\n    prev,\n    next,\n  };\n\n  return dispatch;\n}\n\nexport default usePlayerPageDispatcher;","import { Box, Chip, makeStyles } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { PlaylistItemData } from './store';\n\nexport function isBreakItem(item: PlaylistItemData) {\n  return item && !!item.tags && item.tags.isBreak;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    color: theme.palette.primary.main,\n    backgroundColor: theme.palette.background.paper,\n    borderColor: theme.palette.primary.main,\n    borderLeft: theme.spacing(3),\n    display: 'grid',\n    gridTemplateColumns: '1fr min-content',\n    height: theme.variables.playlist.item.height,\n    padding: theme.spacing(1),\n    pr: theme.spacing(3),\n    width: '100%',\n  },\n  inner: {\n    fontSize: '1.5rem',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n  }\n}));\n\nexport interface PlaylistItemProps{\n  item: PlaylistItemData\n  isCurrent: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function PlaylistItem(props: PlaylistItemProps) {\n  const { isCurrent, item, onClick } = props;\n  const theme = useTheme();\n  const { root, inner } = useStyles(theme);\n\n  return (\n    <Box\n      className={root}\n      onClick={onClick}\n    >\n      <Box\n        component=\"span\"\n        className={inner}\n        fontWeight={isCurrent ? 'bold' : 'initial'}\n      >\n        {item.name?.toUpperCase()}\n      </Box>\n      <Chip\n        variant={isCurrent ? 'default' : 'outlined'}\n        color='primary'\n        label={item.tags?.breakWork}\n      />\n    </Box>\n  );\n}","import { Box, BoxProps } from '@material-ui/core';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport usePlayerPageDispatcher from '../player/usePlayerPageDispatcher';\nimport PlaylistItem, { isBreakItem } from './PlaylistItem';\nimport { playlistAtom, PlaylistItemData, PlaylistState } from './store';\n\n\nconst highlightItem = (item: PlaylistItemData) => {\n  const tags = { ...item.tags, highlight: true };\n  return {...item, tags};\n}\n\nconst prepareItems = (playlistState: PlaylistState): PlaylistItemData[] => {\n  const { currentItemIndex, items } = playlistState;\n  const currentItemIndexOrZero = Math.max(currentItemIndex, 0);\n  const playlistItems = [\n      ...items.slice(0, currentItemIndexOrZero),\n      ...items.slice(currentItemIndexOrZero, currentItemIndexOrZero + 2).map(highlightItem), // highlight one break item and one work item, don't know which is which\n      ...items.slice(currentItemIndexOrZero + 2),\n     ]\n    .filter(item => !isBreakItem(item)); // filter out break items, naturally removing the unwanted, highlighted break item\n  return playlistItems;\n}\n\nexport interface PlaylistProps extends BoxProps {\n  \n}\n\nconst Playlist: React.FC<PlaylistProps> = (rootProps) => {\n  const playlistState = useRecoilValue(playlistAtom);\n  const dispatch = usePlayerPageDispatcher();\n  const items = prepareItems(playlistState);\n\n  return (\n    <Box\n      {...rootProps}\n    >\n      {items.map((item, i) =>\n        <PlaylistItem\n          key={item.id}\n          item={item as PlaylistItemData}\n          isCurrent={item.tags?.highlight}\n          onClick={() => dispatch.setCurrentItem(i*2)}\n        />\n      )}\n    </Box>\n  );\n}\n\nexport default Playlist;\n","import { Box, BoxProps, Typography } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { isBreakItem } from './PlaylistItem';\nimport { NOT_FOUND, playlistAtom } from './store';\n\n\nconst useInnerStyles = () => {\n  const playlistState = useRecoilValue(playlistAtom);\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const fontSize = isBreakItem(currentItem)\n    ? '2rem'\n    : '3rem';\n  const text = currentItemIndex === NOT_FOUND\n    ? 'get ready'\n    : currentItem.name;\n  const style: React.CSSProperties = {\n    textAlign: 'center',\n    textTransform: 'uppercase',\n    fontSize,\n  };\n  return {style, text};\n}\n\nconst useRootStyles = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  const bgcolor = theme.palette.primary.light; // main;\n  const color = theme.palette.background.paper;\n  const props: BoxProps = {\n    alignItems: 'center',\n    bgcolor: bgcolor,\n    color: color,\n    display: 'grid',\n    pl: 1,\n    pr: 1,\n    boxShadow: 4,\n    width: 1,\n    ...rootProps,\n  };\n  return props;\n}\n\nexport interface PlaylistItemCurrentProps extends BoxProps {\n\n}\n\nconst PlaylistItemCurrent: React.FC<PlaylistItemCurrentProps> = (rootProps) => { // TODO: typescript magic: pick boxProps \n  const root = useRootStyles(rootProps);\n  const {style, text} = useInnerStyles();\n\n  return (\n    <Box\n      {...root}\n    >\n      <Typography\n        style={style}\n        variant='h4'\n      >\n        {text}\n      </Typography>\n    </Box>\n  );\n}\n\nexport default PlaylistItemCurrent;\n","import { Box, BoxProps, IconButton } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport React from 'react';\nimport { PlayerActionType, PlayState } from './store/';\nimport usePlayerPageDispatcher from './usePlayerPageDispatcher';\n\ninterface ControlButtonProps {\n  onClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nconst withIconButton = (icon: JSX.Element) => {\n  return (props: ControlButtonProps) => {\n    const { onClick } = props;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={onClick}\n      >\n        {icon}\n      </IconButton>\n    );\n  };\n};\n\nconst Play = withIconButton(<PlayArrowIcon style={{ fontSize: '4rem' }} />);\nconst Pause = withIconButton(<PauseIcon style={{ fontSize: '4rem' }} />);\nconst Prev = withIconButton(<SkipPreviousIcon style={{ fontSize: '2.5rem' }} />);\nconst Next = withIconButton(<SkipNextIcon style={{ fontSize: '2.5rem' }} />);\n\nconst useProps = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  return {\n    alignItems: 'center',\n    display: 'grid',\n    justifyContent: 'center',\n    gridTemplateColumns: '1fr 2fr 1fr',\n    minHeight: 80,\n    bgcolor: theme.palette.background.paper,\n    ...rootProps,\n  };\n}\n\nexport interface ControlsProps extends BoxProps {\n  playState: PlayState;\n}\n\nconst Controls: React.FC<ControlsProps> = ({ playState, ...rootProps }) => {\n  const dispatch = usePlayerPageDispatcher();\n  const onClick = (type: PlayerActionType) => {\n    dispatch[type]();\n  }\n\n  return (\n    <Box\n      {...useProps(rootProps)}\n    >\n      <Prev onClick={() => onClick('prev')} />\n      {\n        playState !== 'playing'\n          ? <Play onClick={() => onClick('play')} />\n          : <Pause onClick={() => onClick('pause')} />\n      }\n      <Next onClick={() => onClick('next')} />\n    </Box>\n  );\n}\n\nexport default Controls;","import React, { useEffect } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport usePlayerPageDispatcher from '../player/usePlayerPageDispatcher';\nimport { countdownAtom } from '../countdown/store';\n\nconst CountdownIsZeroEffect: React.FC<{}> = () => {\n  const dispatch = usePlayerPageDispatcher();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft } = countdownState;\n  const isZero = msLeft === 0;// TODO: useRecoilValue(isZeroCountdownState);\n  useEffect(() => {\n    if (isZero) {\n      dispatch.next();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isZero]);\n  return <></>;\n};\n\nexport default CountdownIsZeroEffect;","import { Time } from \"./time\";\n\n\nconst fromNumber = (timeMs: number): Time => {\n  const h = Math.floor(timeMs / 1000 / 60 / 60);\n  const m = Math.floor((timeMs / 1000 / 60) % 60);\n  const s = Math.floor((timeMs / 1000) % 60);\n  const ms = timeMs % 1000;\n  return { h, m, s, ms };\n};\n\nconst format = (time: Time): string => {\n  const h = time.h.toString().padStart(2, '0');\n  const m = time.m.toString().padStart(2, '0');\n  const s = time.s.toString().padStart(2, '0');\n  const ds = Math.floor(time.ms / 100).toString();\n  return time.h > 0\n    ? `${h}:${m}:${s}.${ds}`\n    : `${m}:${s}.${ds}`;\n};\n\nconst toTimeString = (timeMs: number) => format(fromNumber(timeMs));\n\nconst timeUtils = {\n  fromNumber,\n  toTimeString,\n  format,\n};\n\nexport default timeUtils;","import { Box, BoxProps } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { countdownAtom } from './store';\nimport time from './time-utils';\n\n\nexport interface CountdownProps extends BoxProps {\n}\n\nconst Countdown: FunctionComponent<CountdownProps> = ({ ...rootProps }) => {\n  const theme = useTheme();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft } = countdownState;\n\n  return (\n    <Box\n      alignItems='center'\n      bgcolor={theme.palette.primary.dark}\n      color={theme.palette.secondary.contrastText}\n      display='grid'\n      fontWeight={theme.typography.fontWeightBold}\n      fontSize='3rem'\n      justifyContent='center'\n      {...rootProps}\n    >\n      {time.toTimeString(msLeft)}\n    </Box>\n  );\n};\n\nexport default Countdown;\n","import React, { useMemo } from 'react';\n\ninterface ArcProps extends React.SVGProps<SVGPathElement> {\n  fStart: number;\n  fEnd: number;\n  r?: number;\n  cx?: number;\n  cy?: number;\n}\n\ninterface D {\n  startX: number;\n  startY: number;\n  endX: number;\n  endY: number;\n  largeArcFlag: 0 | 1;\n}\n\nconst calcPoint = (r: number = 1, cx: number = 0, cy: number = 0, percent: number) => {\n  return [\n    cx + Math.sin(2 * Math.PI * percent) * r,\n    cy - Math.cos(2 * Math.PI * percent) * r,\n  ];\n};\n\nconst useArc: (...args: any) => D = (fStart: number, fEnd: number, r: number = 1, cx: number = 0, cy: number = 0) => {\n  return useMemo(() => {\n    const calcPointR = calcPoint.bind(null, r, cx, cy);\n    const [startX, startY] = calcPointR(fStart);\n    const [endX, endY] = calcPointR(fEnd);\n    const largeArcFlag = Math.round(fEnd - fStart) as 0 | 1;\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      largeArcFlag,\n    };\n  }, [fStart, fEnd, r, cx, cy]);\n}\n\nconst Arc = (props: ArcProps) => {\n  const { fStart: from, fEnd: to, r = 1, cx = 0, cy = 0, fill = 'currentColor' } = props;\n  const { startX, startY, endX, endY, largeArcFlag } = useArc(from, to, r, cx, cy);\n  const d =\n    `M ${startX} ${startY} ` +\n    `A ${r} ${r} 0 ${largeArcFlag} 1 ${endX} ${endY} ` +\n    `L ${cx} ${cy}`\n  ;\n  return (\n    <path\n      fill={fill}\n      d={d}\n    />\n  );\n};\n\nexport default Arc;","import useTheme from '@material-ui/core/styles/useTheme';\n\nconst useColors = (invertColors: boolean) => {\n  const theme = useTheme();\n  const light = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  const dark = {\n    bgcolor: theme.palette.primary.light,\n    color: theme.palette.secondary.contrastText,\n  };\n  const [left, done] = invertColors\n    ? [dark, light]\n    : [light, dark];\n  return [left, done];\n}\n\nexport default useColors;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { isBreakItem } from \"../playlist/PlaylistItem\";\nimport { playlistAtom } from '../playlist/store';\nimport PieSlice from './PieSlice';\nimport { countdownAtom } from './store';\nimport useColors from './useColors';\nimport withMargin from './withMargin';\n\n\nexport interface PieCountdownProps extends BoxProps {\n}\n\nconst PieSliceWithMargin = withMargin(PieSlice);\n\nconst PieCountdown: FunctionComponent<PieCountdownProps> = ({ ...rootProps }) => {\n  const theme = useTheme();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft, msTotal } = countdownState;\n  const fractionDone = 1 - msLeft / msTotal;\n  const playlistState = useRecoilValue(playlistAtom);\n  const { items, currentItemIndex } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const isBreak = isBreakItem(currentItem);\n  const text = isBreak ? 'Ready' : 'Go!';\n  const [ left, done ] = useColors(!isBreak);\n\n  return (\n    <Box\n      bgcolor={theme.palette.primary.main}\n      position='relative'\n      display='grid'\n      alignItems='center'\n      justifyContent='center'\n      width='100%'\n      height='100%'\n      {...rootProps}\n    >\n      <PieSliceWithMargin\n        bgcolor={left.bgcolor}\n        color={left.color}\n        clipIf={fractionDone > 0}\n        fractionStart={fractionDone}\n        fractionEnd={1}\n        text={text}\n      />\n      <PieSliceWithMargin\n        bgcolor={done.bgcolor}\n        color={done.color}\n        clipIf={(fractionDone < 1)}\n        fractionStart={0}\n        fractionEnd={fractionDone}\n        text={text}\n      />\n    </Box >\n  );\n};\n\nexport default PieCountdown;\n","import { useTheme } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\n\nexport default function withMargin<P = {}>(\n  WrappedComponent: React.ComponentType<P>,\n): React.FunctionComponent<P> {\n  return (props: React.PropsWithChildren<P>) => {\n    const theme = useTheme();\n    return (\n      <Box\n        position=\"absolute\"\n        top={theme.spacing(1)}\n        left={theme.spacing(1)}\n        right={theme.spacing(1)}\n        bottom={theme.spacing(1)}\n      >\n        <WrappedComponent {...props} />\n      </Box>\n    );\n  };\n}\n","import React from 'react';\nimport Arc from './Arc';\n\n\nexport interface PieSliceProps {\n  text: string;\n  bgcolor: string;\n  color: string;\n  clipIf: boolean;\n  fractionStart: number;\n  fractionEnd: number;\n}\n\nconst PieSlice = (props: PieSliceProps) => {\n  const { text, bgcolor, color, clipIf: setClipPath, fractionStart, fractionEnd } = props;\n  const VIEWBOX_SIZE = 100;\n  const id = `clip${Math.floor(1000000 * Math.random())}`;\n  return (\n    <svg\n      width=\"100%\"\n      height=\"100%\"\n      viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n    >\n      <g\n        clipPath={setClipPath ? `url(#${id})` : ``}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={color}\n          fontSize={2 / 3 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </g>\n      <clipPath id={id}>\n        <Arc\n          cx={50}\n          cy={50}\n          r={VIEWBOX_SIZE / 2}\n          fStart={fractionStart}\n          fEnd={fractionEnd}\n        />\n      </clipPath>\n    </svg>\n  )\n}\n\nexport default PieSlice;","import React, { useEffect } from 'react';\nimport { useSetRecoilState } from 'recoil';\nimport { countdownAtom, countdownReducer, MS_INTERVAL } from './store';\n\nconst CountdownTickEffect: React.FC<{}> = () => {\n  const setCountdownState = useSetRecoilState(countdownAtom);\n\n  useEffect(() => { \n    const i = setInterval(() => {\n      setCountdownState(state => countdownReducer.tick(state));\n    }, MS_INTERVAL);\n    return () => clearInterval(i);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // first render only\n  return <></>;\n};\n\nexport default CountdownTickEffect;","import React from 'react';\nimport Countdown from '../countdown/Countdown';\nimport PieCountdown, { PieCountdownProps } from '../countdown/PieCountdown';\nimport CountdownTickEffect from '../countdown/CountdownTickEffect';\n\n\nexport interface CountdownHeaderProps extends PieCountdownProps {\n\n}\n\nconst CountdownHeader: React.FC<CountdownHeaderProps> = ({...rootProps}) => {\n  return (\n    <>\n      <CountdownTickEffect />\n      <PieCountdown\n        gridArea='avatar'\n      />\n      <Countdown\n        {...rootProps}\n        gridArea='text'\n      />\n    </>\n  );\n}\n\nexport default CountdownHeader;\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nexport interface AvatarProps extends BoxProps {\n  text: string;\n}\n\nconst useProps = (props: BoxProps) => {\n  const theme = useTheme();\n  const root: BoxProps = {\n    bgcolor: theme.palette.primary.main,\n    display: 'grid',\n    p: 1,\n    ...props,\n  };\n  const inner: BoxProps = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  return { root, inner };\n}\n\nconst Avatar: React.FC<AvatarProps> = ({ text, ...props }) => {\n  const { root, inner } = useProps(props);\n  const VIEWBOX_SIZE = 100;\n\n  return (\n    <Box\n      data-testid='avatar'\n      {...root}\n    >\n      <svg\n        viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={inner.bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={inner.color}\n          fontSize={4 / 5 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </svg>\n    </Box>\n  );\n};\n\nexport default Avatar;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardDescriptionProps extends BoxProps { }\n\nconst CardDescription: React.FC<CardDescriptionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-description'\n      gridArea={'desc'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='caption'\n        component='p'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardDescription;","import { BoxProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nconst useRootProps = (rootProps: BoxProps): BoxProps => {\n  const theme = useTheme();\n  return {\n    alignContent: 'center',\n    bgcolor: theme.palette.primary.dark,\n    color: theme.palette.secondary.contrastText,\n    display: 'grid',\n    gridTemplateAreas: `\n      \"title title title title .\"\n      \"desc desc desc desc desc\"\n    `,\n    gridTemplateColumns: 'repeat(5, 1fr)',\n    p: 2,\n    position: 'relative', // accomodate for absolute positioning of\n    ...rootProps,\n  };\n}\n\nexport interface CardTextProps extends BoxProps {\n  action?: any; // TODO: type\n  title: any;\n  description: any;\n}\n\nconst CardText: React.FC<CardTextProps> = ({ action, description, title, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-text'\n      onClick={(ev) => ev.stopPropagation()}\n      {...useRootProps(rootProps)}\n    >\n      {title}\n      {description}\n      {action}\n    </Box>\n  );\n};\n\nexport default CardText;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardTitleProps extends BoxProps { }\n\nconst CardTitle: React.FC<CardTitleProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-title'\n      gridArea={'title'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='subtitle1'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardTitle;","import React from 'react';\nimport Avatar from '../shared/Avatar';\nimport CardDescription from '../shared/card/CardDescription';\nimport CardText from '../shared/card/CardText';\nimport CardTitle from '../shared/card/CardTitle';\n\nexport interface WorkoutHeaderProps {\n  description: string;\n  short: string;\n  title: string;\n}\n\nconst WorkoutHeader: React.FC<WorkoutHeaderProps> = (props) => {\n  const { description, short, title  } = props;\n  return (\n    <>\n      <Avatar\n        text={short}\n        gridArea='avatar'\n      />\n      <CardText\n        gridArea='text'\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        \n      >\n      </CardText>\n    </>\n  );\n}\n\nexport default WorkoutHeader;","import React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { playlistAtom } from '../playlist/store';\nimport CountdownHeader from './CountdownHeader';\nimport HeaderAction from './HeaderAction';\nimport { playerAtom } from './store';\nimport PlayerHeader from './WorkoutHeader';\n\n\nexport interface HeaderProps {\n  onClose: () => void;\n}\n\nconst Header: React.FC<HeaderProps> = (props) => {\n  const { onClose } = props;\n  const playlistState = useRecoilValue(playlistAtom);\n  const playerState = useRecoilValue(playerAtom);\n  const { playState } = playerState;\n  const { short, name: title, description } = playlistState;\n  const HeaderImpl = playState === 'stopped'\n    ? (\n      <PlayerHeader\n        description={description}\n        short={short}\n        title={title}\n      />\n    )\n    : (\n      <CountdownHeader />\n    );\n  return (\n    <>\n      {HeaderImpl}\n      <HeaderAction\n        onClose={onClose}\n      />\n    </>\n  );\n};\n\n\nexport default Header;\n","import { Theme, useMediaQuery, useTheme } from '@material-ui/core';\n\n// TODO: from global context\nconst useMediaQueries = (theme: Theme) => {\n  const [upxs, upsm, upmd] = [\n    theme.breakpoints.up('xs'),\n    theme.breakpoints.up('sm'),\n    theme.breakpoints.up('md')\n  ];\n  return [upxs, upsm, upmd];\n};\n\n// TODO: from global context\nconst useActiveMediaQuery = (theme: Theme): string => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const mqis = [\n    { mq: upxs, matches: useMediaQuery(upxs) },\n    { mq: upsm, matches: useMediaQuery(upsm) },\n    { mq: upmd, matches: useMediaQuery(upmd) },\n  ];\n  const mq = mqis\n    .filter(mqi => mqi.matches)\n    .map(mqi => mqi.mq)\n    .slice(-1)\n    [0] || upxs;\n  return mq;\n}\n\nconst useRowHeights = (theme: Theme, mq: string): number[] => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [text, controls, current] = {\n    [upxs]: [16, 11, 15],\n    [upsm]: [17, 11, 15],\n    [upmd]: [15, 13, 15],\n  }[mq].map(s => theme.spacing(s));\n  return [text, controls, current];\n};\n\nfunction useRootStyles(theme: Theme, mq: string): React.CSSProperties {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [textHeight, controlsHeight, currentHeight] = useRowHeights(theme, mq);\n  const totalHeight = textHeight + controlsHeight + currentHeight;\n  const listHeight = `calc(100vh - ${theme.variables.navbar.height * 2}px - ${totalHeight}px)`; // TODO: prevent <= 0 \n  return {\n    [upxs]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar text text text text'\n        'controls controls controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `${textHeight}px repeat(4, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upsm]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar text text text'\n        'avatar avatar controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(2, ${(textHeight + controlsHeight) / 2}px) repeat(3, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upmd]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar avatar text text'\n        'avatar avatar avatar controls controls'\n        'avatar avatar avatar current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(3, ${totalHeight / 3}px) repeat(2, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    }\n  }[mq];\n}\n\nexport const useLayout = (): {[key: string]: React.CSSProperties} => {\n  const theme = useTheme();\n  const mq = useActiveMediaQuery(theme);\n  const root = useRootStyles(theme, mq);\n  const styles = {\n    root,\n  };\n  return styles;\n}\n","import { Box, useTheme } from '@material-ui/core';\nimport React, { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport Playlist from '../playlist/Playlist';\nimport PlaylistItemCurrent from '../playlist/PlaylistItemCurrent';\nimport { playlistAtom } from '../playlist/store';\nimport Controls from './Controls';\nimport CountdownIsZeroEffect from './CountdownIsZeroEffect';\nimport Header from './Header';\nimport { playerAtom } from './store';\nimport { useLayout } from './useLayout';\n\n\n// TODO: dispatch stop when navigating away\n// TODO: handle empty\nconst Player = () => {\n  const history = useHistory();\n  const styles = useLayout();\n  const theme = useTheme();\n  const ref = useRef<HTMLDivElement>(null);\n  const playlistState = useRecoilValue(playlistAtom);\n  const playerState = useRecoilValue(playerAtom);\n  const { currentItemIndex } = playlistState;\n  const prevCurrentItemIndex = useRef(-999);\n  const { playState } = playerState;\n  const top = theme.variables.playlist.item.height;\n\n  useEffect(() => {\n    if (playState === 'playing'\n      && currentItemIndex > prevCurrentItemIndex.current\n      && currentItemIndex > 0 \n      && currentItemIndex % 2 === 0\n    ) {\n      ref.current?.scrollBy({ top, behavior: 'smooth' });\n    }\n    prevCurrentItemIndex.current = currentItemIndex;\n  }, [currentItemIndex, playState, top]);\n  \n  if (!playlistState || !playlistState.items.length) {\n    history.push(`workouts`);\n    return null;\n  }\n  \n  const onClose = () => history.goBack();\n\n  return (\n    <Box\n      data-testid='player'\n      style={styles.root}\n    >\n      <CountdownIsZeroEffect />\n      <Header\n        onClose={onClose}\n      />\n      <Controls\n        gridArea='controls'\n        playState={playState}\n      />\n      <PlaylistItemCurrent\n        gridArea='current'\n      />\n      <div\n        ref={ref}\n        style={{\n          gridArea: 'list',\n          overflow: 'auto',\n        }}\n      >\n        <Playlist />\n      </div>\n    </Box>\n  );\n}\n\nexport default Player;","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\n\n\nconst UnderConstruction: FunctionComponent = () => {\n  const theme = useTheme();\n  return (\n    <Box\n      textAlign=\"center\"\n      fontSize=\"2rem\"\n      color={theme.palette.secondary.contrastText}>under construction\n    </Box>\n  )\n};\n\nexport default UnderConstruction;","import { Box, IconButton, makeStyles, Typography, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport React, { useEffect, useRef } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: 'inherit',\n    display: 'flex',\n    height: '100%',\n  },\n  button: {\n    color: theme.palette.secondary.light,\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    marginLeft: '1px',\n    textTransform: 'none',\n  },\n  duration: {\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    borderRadius: theme.shape.borderRadius,\n    display: 'flex',\n    flex: 1,\n    height: '100%',\n    justifyContent: 'center',\n    minWidth: '60px',\n  }\n}));\n\nexport interface NumberInputProps {\n  min?: number;\n  max?: number;\n  step?: number;\n  value: number;\n  onChange?: (value: number) => void;\n}\n\nconst NumberInput: React.FC<NumberInputProps> = (props) => {\n  const { value, min=0, max=Number.MAX_VALUE, step=1, onChange } = props;\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const initial = useRef(0);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { initial.current = value }, []);\n\n  const handleDown = () => {\n    const newValue = Math.max(value - step, min);\n    onChange && onChange(newValue);\n  }\n\n  const handleUp = () => {\n    const newValue = Math.min(value + step, max);\n    onChange && onChange(newValue);\n  }\n\n  const handleReset = () => {\n    onChange && onChange(initial.current);\n  }\n\n  return (\n    <Box\n      className={classes.root}\n    >\n      <IconButton\n        className={classes.button}\n        onClick={handleDown}\n      >\n        <RemoveIcon />\n      </IconButton>\n      <Typography\n        variant='h4'\n        className={classes.duration}\n      >\n        {value}\n      </Typography>\n      <IconButton\n        className={classes.button}\n        onClick={handleUp}\n      >\n        <AddIcon />\n      </IconButton>\n      <IconButton\n        className={classes.button}\n        onClick={handleReset}\n      >\n        <ReplayIcon />\n      </IconButton>\n    </Box>\n  );\n}\n\nexport default NumberInput;","import { useTheme, makeStyles } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\nimport NumberInput, { NumberInputProps } from '../../shared/NumberInput';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'min(130px) minmax(150px, 300px)',\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  label: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.secondary.contrastText,\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    padding: theme.spacing(1),\n    textTransform: 'uppercase',\n    whiteSpace: 'nowrap'\n  },\n}));\n\ninterface DurationProps extends NumberInputProps{\n  label: string;\n}\n\nconst Duration: React.FC<DurationProps> = ({ label, ...props }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  return (\n    <Box\n      className={classes.root}\n    >\n      <Box\n        className={classes.label}\n      >\n        {label}\n      </Box>\n      <NumberInput\n        {...props}\n      />\n    </Box>\n  );\n}\n\nexport default Duration;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport Avatar, { AvatarProps } from '../../shared/Avatar';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    alignItems: 'center',\n    display: 'grid',\n    fontSize: theme.typography.h4.fontSize,\n    minHeight: theme.variables.avatar.height,\n    gridArea: 'avatar',\n  },\n  textfield: {\n    padding: theme.spacing(1),\n    textAlign: 'center',\n  },\n}));\n\nexport interface AvatarEditProps extends BoxProps, AvatarProps {\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst AvatarEdit: React.FC<AvatarEditProps> = ({ text, onUpdate, ...rootProps }) => {\n  const handleUpdate = (update: EditResult) => {\n    if (!onUpdate) {\n      return;\n    }\n    onUpdate(update);\n  }\n\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      className={classes.root}\n      onOk={handleUpdate}\n      {...rootProps}\n      inputEl={\n        <TextField\n          inputProps={{minLength: 2, maxLength: 2, required: true}}\n          defaultValue={text}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <Avatar\n          text={text}\n        />\n      }\n    />\n  );\n};\n\nexport default AvatarEdit;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\nimport CardDescription from '../../shared/card/CardDescription';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    padding: theme.spacing(1),\n  },\n}));\n\nexport interface CardDescriptionEditProps extends BoxProps {\n  description: string;\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst CardDescriptionEdit: React.FC<CardDescriptionEditProps> = ({ description, onUpdate, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      onOk={onUpdate}\n      { ...rootProps }\n      inputEl={\n        <TextField\n          defaultValue={description}\n          inputProps={{required: true}}\n          multiline\n          rows={3}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <CardDescription>\n          {description}\n        </CardDescription>\n      }\n    />\n  );\n};\n\nexport default CardDescriptionEdit;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport CardTitle from '../../shared/card/CardTitle';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    padding: theme.spacing(1),\n  },\n}));\n\nexport interface CardTitleEditProps extends BoxProps {\n  title: string;\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst CardTitleEdit: React.FC<CardTitleEditProps> = ({ title, onUpdate, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      onOk={onUpdate}\n      { ...rootProps }\n      inputEl={\n        <TextField\n          defaultValue={title}\n          inputProps={{ required: true }}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <CardTitle>\n          {title}\n        </CardTitle>\n      }\n    />\n  );\n};\n\nexport default CardTitleEdit;","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\n// TODO: makeStyles\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import { Box, BoxProps, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport CardText from '../../shared/card/CardText';\nimport { EditResult } from '../../shared/EditText';\nimport { WorkoutData } from '../store';\nimport AvatarEdit from './AvatarEdit';\nimport CardDescriptionEdit from './CardDescriptionEdit';\nimport CardTitleEdit from './CardTitleEdit';\nimport HeaderAction from './HeaderAction';\n\n\nexport interface HeaderProps extends BoxProps {\n  workout: WorkoutData;\n  onClose?: () => void;  // TODO: page responsibility\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst HeaderEdit: React.FC<HeaderProps> = ({ workout, onClose, onUpdate, ...rootProps }) => {  \n  const { description, short, title  } = workout;\n  const handleClose = () => onClose && onClose();\n  const handleUpdate = (key: string) => (update: EditResult) => { // TODO: type\n    if (!onUpdate) {\n      return;\n    }\n    const { value: updatedValue, error } = update;\n    const result = { value: {[key]: updatedValue }, error } \n    onUpdate(result);\n  }\n  const theme = useTheme();\n\n  return (\n    <Box\n      display='grid'\n      gridTemplateAreas='\"avatar text\"'\n      gridTemplateColumns={`${theme.variables.avatar.height}px auto`}\n      mb={.3}\n      {...rootProps}\n    >\n      <AvatarEdit\n        text={short}\n        onUpdate={handleUpdate('short')}\n      />\n      <CardText\n        action={\n          <HeaderAction\n            onClose={handleClose}\n          />\n        }\n        title={\n          <CardTitleEdit\n            gridArea='title'\n            title={title}\n            onUpdate={handleUpdate('title')}\n          />\n        }\n        description={\n          <CardDescriptionEdit\n            gridArea='desc'\n            description={description}\n            onUpdate={handleUpdate('description')}\n          />\n        }\n        gridArea='text'\n      />\n    </Box>\n  );\n};\n\nexport default HeaderEdit;","import { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useRecoilState } from 'recoil';\nimport { workoutAtom, WorkoutData, workoutReducer } from '../store';\n\n\n// TODO: rtfm on how to init route w/ data\nconst useWorkout = (notFound: () => void): WorkoutData | undefined => {\n  const [workoutState, setWorkoutState] = useRecoilState(workoutAtom);\n  const { items: workouts, currentItemIndex } = workoutState;\n  const { id } = useParams();\n  const workout = workouts[currentItemIndex];\n\n  useEffect(() => {\n    if (workout) {\n      return;\n    }\n    const index = workouts.findIndex(w => w.id === id);\n    if (index > -1) {\n      setWorkoutState(state => workoutReducer.select(state, index));\n    } else {\n      notFound();\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  return workout;\n}\n\nexport default useWorkout;\n","import Box from '@material-ui/core/Box';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSetRecoilState } from 'recoil';\nimport { ExerciseData } from '../../exercise/data';\nimport ExerciseList from '../../exercise/ExerciseList';\nimport { EditResult } from '../../shared/EditText';\nimport { workoutAtom, workoutReducer } from '../store';\nimport Duration from './Duration';\nimport HeaderEdit from './HeaderEdit';\nimport useWorkout from './useWorkout';\n\n\nconst WorkoutEdit: React.FC<any> = () => {\n  const setWorkoutState = useSetRecoilState(workoutAtom);\n  const history = useHistory();\n  const notFound = () => history.goBack();\n  const workout = useWorkout(notFound);\n  if (!workout) {\n    return null;\n  }\n  \n\n  const handleClose = () => history.goBack();\n  const handleSetBreakMs = (breakSec: number) => setWorkoutState(state => workoutReducer.update(state, { ...workout, breakMs: breakSec * 1000 }));\n  const handleSetWorkMs = (workSec: number) => setWorkoutState(state => workoutReducer.update(state, { ...workout, workMs: workSec * 1000 }));\n  const handleAddExercise = (exercise: ExerciseData) => setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises: [...workout.exercises, exercise] }));\n  const handleDeleteExercise = (exercises: ExerciseData[]) => setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises }));\n  const handleEditExercise = (exercise: ExerciseData, index: number) => { // TODO: type\n    // TODO: error case?\n    const exercises = [\n      ...workout.exercises.slice(0, index),\n      exercise,\n      ...workout.exercises.slice(index + 1),\n    ];\n    setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises }));\n  }\n  const handleUpdateHeader = (update: EditResult) => { // TODO: type\n    // TODO: error case?\n    const { value } = update;\n    setWorkoutState(state => workoutReducer.update(state, { ...workout, ...value }));\n  }\n  \n  const { exercises, breakMs, workMs } = workout;\n\n  // TODO: edit exercises order drag/drop\n  return (\n    <Box>\n      <HeaderEdit\n        workout={workout}\n        onClose={handleClose}\n        onUpdate={handleUpdateHeader}\n      />\n      <Duration\n        label='Break [sec]'\n        value={breakMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetBreakMs}\n      />\n      <Duration\n        label='Work [sec]'\n        value={workMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetWorkMs}\n      />\n      <ExerciseList\n        exercises={exercises}\n        onAdd={handleAddExercise}\n        onDelete={handleDeleteExercise}\n        onEdit={handleEditExercise}\n      />\n    </Box>\n  );\n}\n\nexport default WorkoutEdit;\n","import { ExerciseData } from \"../exercise/data\";\nimport { PlaylistData, PlaylistItemData } from \"../playlist/store\";\nimport uid from \"../util/uid\";\nimport { WorkoutData } from \"./store/state\";\n\nfunction toPlaylistItemData(workMs: number, breakMs: number, exercise: ExerciseData): [PlaylistItemData, PlaylistItemData] {\n  const { id, name } = exercise;\n  const b = {\n    id,\n    name: `next up: ${name}`,\n    durationMs: breakMs,\n    tags: {\n      isBreak: true,\n    },\n  };\n  const w = {\n    id: uid(), // TODO: meh\n    name,\n    durationMs: workMs,\n    tags: {\n      breakWork: `${breakMs/1000}/${workMs/1000}`,\n    }\n  };\n  return [b, w];\n}\n\nconst expand = (acc: PlaylistItemData[], [b, w]: [PlaylistItemData, PlaylistItemData]): PlaylistItemData[] => [...acc, b, w];\n\nexport default function toPlaylistData(workout: WorkoutData): PlaylistData {\n  const { short, title: name, description, exercises, workMs, breakMs } = workout;\n  const toPlaylistItemDataBound = toPlaylistItemData.bind(null, workMs, breakMs);\n  const items: PlaylistItemData[] = exercises\n    .map(toPlaylistItemDataBound)\n    .reduce(expand, [])\n  ;\n  return {\n    short,\n    name,\n    description,\n    items,\n  };\n}\n","import { Box, BoxProps } from '@material-ui/core';\nimport React from 'react';\n\ninterface CardProps extends BoxProps {\n  onClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\nconst Card: React.FC<CardProps> = ({ children, onClick, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card'\n      borderRadius={1}\n      display='grid'\n      gridColumn={['span 6', 'span 4', 'span 3']}\n      gridTemplateRows='5fr 2fr'\n      boxShadow={8}\n      {...rootProps}\n      onClick={onClick}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default Card;","import { makeStyles, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport React from 'react';\nimport Card from '../../shared/card/Card';\nimport CardText from '../../shared/card/CardText';\nimport CardTitle from '../../shared/card/CardTitle';\nimport id from '../../util/id';\nimport uid from '../../util/uid';\nimport { WorkoutData } from '../store/state';\n\n\nconst useStyles = makeStyles(theme => ({\n  iconContainer: {\n    borderRadius: theme.shape.borderRadius,\n    borderStyle: 'solid',\n    borderWidth: 2,\n    color: theme.palette.secondary.light,\n    cursor: 'pointer',\n    padding: '25%',\n  },\n  icon: {\n    height: '100%',\n    width: '100%',\n  }\n}));\n\nexport interface AddWorkoutProps {\n  onClick: (workout: WorkoutData) => void;\n}\n\nconst AddWorkout: React.FC<AddWorkoutProps> = ({onClick}) => {\n  const handleClick = () => {\n    const workout: WorkoutData = newWorkout();\n    onClick(workout);\n  };\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <Card\n      onClick={handleClick}\n    >\n      <div\n        className={classes.iconContainer}\n      >\n        <AddIcon\n          className={classes.icon}\n        />\n      </div>\n      <CardText\n        title={\n          <CardTitle>\n            Add new workout\n          </CardTitle>\n        }\n        description={<></>}\n      />\n    </Card>\n  );\n}\n\nexport default AddWorkout;\n\n// TODO: extract\nfunction newWorkout() {\n  const short = id();\n  const workout: WorkoutData = {\n    id: uid(),\n    short,\n    title: `Workout ${short}`,\n    description: (new Date()).toLocaleDateString(),\n    breakMs: 30000,\n    workMs: 60000,\n    exercises: [\n      {\n        name: \"New Exercise\",\n        id: \"46c7-4d11-yca1-eg87\"\n      },\n    ]\n  };\n  return workout;\n}\n","import Box, { BoxProps } from '@material-ui/core/Box';\nimport React from 'react';\n\nexport interface CardTextActionProps extends BoxProps { }\n\nconst CardTextAction: React.FC<CardTextActionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-action'\n      position='absolute'\n      right={0}\n      top={0}\n      {...rootProps}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default CardTextAction;\n","import { Box, ListItemIcon, MenuItem, Switch } from '@material-ui/core';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport React from 'react';\n\nexport interface DeleteMenuItemProps {\n  onClick?: () => void;\n}\n\nconst DeleteMenuItem: React.FC<DeleteMenuItemProps> = ({ onClick }) => {\n  const [canDelete, setCanDelete] = React.useState<boolean>(false);\n  const handleClick = () => onClick && onClick();\n\n  return (\n    <Box\n      alignItems='center'\n      component='li'\n      display='grid'\n      gridTemplateColumns='auto min-content'\n    >\n      <MenuItem\n        component='span'\n        disabled={!canDelete}\n        onClick={handleClick}\n      >\n        <ListItemIcon>\n          <DeleteOutlineIcon />\n        </ListItemIcon>\n          Delete\n        </MenuItem>\n      <Switch\n        onChange={() => setCanDelete(!canDelete)}\n      />\n    </Box>\n  );\n}\n\nexport default DeleteMenuItem;","import { Box, IconButton, ListItemIcon, Menu, MenuItem, useTheme } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport MoreVerticon from '@material-ui/icons/MoreVert';\nimport React from 'react';\nimport DeleteMenuItem from './DeleteMenuItem';\n\nexport type ContextMenuOption =\n  | 'edit'\n  | 'delete'\n  ;\n\nexport interface ContextMenuProps {\n  onClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst ContextMenu: React.FC<ContextMenuProps> = ({ onClick }) => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const theme = useTheme();\n  const handleOpen = (event: React.MouseEvent<HTMLButtonElement>) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n  const handleMenuClick = (menuOption: ContextMenuOption): void => {\n    handleClose();\n    onClick && onClick(menuOption);\n  };\n\n  return (\n    <Box\n      position='relative'\n      right={-1 * theme.spacing(1)}\n    >\n      <IconButton\n        color='secondary'\n        onClick={handleOpen}\n      >\n        <MoreVerticon />\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem\n          onClick={handleMenuClick.bind(globalThis, 'edit')}\n        >\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          Edit\n        </MenuItem>\n        <DeleteMenuItem\n          onClick={handleMenuClick.bind(globalThis, 'delete')}\n        />\n      </Menu>\n    </Box>\n  );\n}\n\nexport default ContextMenu;","import React from 'react';\nimport Avatar from '../../shared/Avatar';\nimport Card from '../../shared/card/Card';\nimport CardDescription from '../../shared/card/CardDescription';\nimport CardText from '../../shared/card/CardText';\nimport CardTextAction from '../../shared/card/CardTextAction';\nimport CardTitle from '../../shared/card/CardTitle';\nimport { WorkoutData } from '../store/state';\nimport ContextMenu, { ContextMenuOption } from './ContextMenu';\n\nexport interface WorkoutProps {\n  workout: WorkoutData;\n  onCardClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onContextMenuClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst Workout: React.FC<WorkoutProps> = (props) => {\n  const { workout, onCardClick, onContextMenuClick } = props;\n  const { description, short, title } = workout;\n  return (\n    <Card\n      onClick={onCardClick}\n    >\n      <Avatar\n        text={short}\n      />\n      <CardText\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        action={\n          <CardTextAction>\n            <ContextMenu\n              onClick={onContextMenuClick}\n            />\n          </CardTextAction>\n        }\n      >\n      </CardText>\n    </Card>\n  );\n}\n\nexport default Workout;","import { Box } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useRecoilState } from 'recoil';\nimport usePlayerPageDispatcher from '../../player/usePlayerPageDispatcher';\nimport { workoutReducer } from '../store';\nimport { workoutAtom, WorkoutData } from '../store/state';\nimport toPlaylistData from '../toPlaylistData';\nimport AddWorkout from './AddWorkout';\nimport { ContextMenuOption } from './ContextMenu';\nimport Workout from './Workout';\n\n\nexport default function WorkoutList() {\n  const theme = useTheme();\n  const history = useHistory();\n  const dispatch = usePlayerPageDispatcher();\n  const [workoutState, setWorkoutState] = useRecoilState(workoutAtom);\n  const { items: workouts } = workoutState;\n  \n  const handleAddWorkout = (workout: WorkoutData) => {\n    const { id } = workout;\n    setWorkoutState(state => workoutReducer.add(state, workout));\n    history.push(`workouts/${id}`);\n  };\n\n  const handleCardClick = (workout: WorkoutData, index: number) => {\n    setWorkoutState(state => workoutReducer.select(state, index));\n    const playlist = toPlaylistData(workout);\n    dispatch.set(playlist); // TODO: rather do that via navigation\n    history.push(`player`); // TODO: magic strings\n  }\n\n  const handleContextMenuClick = (workout: WorkoutData, index: number, menuOption: ContextMenuOption) => {\n    const { id } = workout;\n    setWorkoutState(state => workoutReducer.select(state, index));\n    switch (menuOption) {\n      case 'delete':\n        setWorkoutState(workoutReducer.delete);\n        break;\n      case 'edit':\n        history.push(`workouts/${id}`);\n        break;\n      default:\n        throw Error(`unknown menu option ${menuOption}`);\n    }\n  }\n\n  return (\n    <Box\n      display='grid'\n      gridTemplateColumns='repeat(12, 1fr)'\n      gridGap={theme.spacing(1)}\n      m={1}\n    >\n      <AddWorkout \n        onClick={handleAddWorkout}\n      />\n      {workouts.map((workout: WorkoutData, index: number) => (\n        <Workout\n          key={workout.id}\n          workout={workout}\n          onCardClick={() => handleCardClick(workout, index)}\n          onContextMenuClick={handleContextMenuClick.bind(globalThis, workout, index)}\n        />\n      ))}\n    </Box>\n  );\n}\n","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport ExerciseList from './exercise/ExerciseList';\nimport Main from './Main';\nimport BottomNavigation from './navigation/BottomNavigation';\nimport TopNavigation from './navigation/TopNavigation';\nimport Player from './player/Player';\nimport UnderConstruction from './shared/UnderConstruction';\nimport WorkoutEdit from './workout/edit/WorkoutEdit';\nimport WorkoutList from './workout/list/WorkoutList';\n\nconst App = () => { \n  const theme = useTheme();\n\n  return (\n    <Box\n      height='100vh'\n      bgcolor={theme.variables.root.backgroundColor}\n      style={{\n        touchAction: 'manipulation', // https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away\n      }}\n    >\n      <TopNavigation />\n      <Main>\n        <Switch>\n          <Route path='/workouts/:id' component={WorkoutEdit} />\n          <Route exact path='/workouts' component={WorkoutList} />\n          <Route exact path='/player' component={Player} />\n          <Route path='/exercises' component={ExerciseList} />\n          <Route path='/recents' component={UnderConstruction} />\n          <Route path='/favorites' component={UnderConstruction} />\n          <Route path='*'>\n            <Redirect to='/workouts' />\n          </Route>\n        </Switch>\n      </Main>\n      <BottomNavigation />\n    </Box>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SimplePaletteColorOptions } from \"@material-ui/core/styles/createPalette\";\n\nexport const bluegrey400: SimplePaletteColorOptions = {\n  main: '#78909c',\n  light: '#a7c0cd',\n  dark: '#4b636e',\n  contrastText: '#ffffff',\n};\n\nexport const bluegrey800: SimplePaletteColorOptions = {\n  main: '#37474f',\n  light: '#62727b',\n  dark: '#102027',\n  contrastText: '#ffffff',\n};\n\nexport const grey900: SimplePaletteColorOptions = {\n  main: '#212121',\n  light: '#484848',\n  dark: '#000000',\n  contrastText: '#ffffff',\n};\n\nexport const grey800: SimplePaletteColorOptions = {\n  main: '#424242',\n  light: '#6d6d6d',\n  dark: '#1b1b1b',\n  contrastText: '#ffffff',\n};\n\nexport const grey400: SimplePaletteColorOptions = {\n  main: '#bdbdbd',\n  light: '#efefef',\n  dark: '#8d8d8d',\n  contrastText: '#000000',\n};","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { PaletteOptions } from \"@material-ui/core/styles/createPalette\";\nimport { bluegrey400, bluegrey800, grey400, grey800, grey900 } from \"./colors\";\n\nconst bluegrey400_bluegrey800: PaletteOptions = {\n  primary: bluegrey400,\n  secondary: bluegrey800,\n};\n\nconst bluegrey800_bluegrey400: PaletteOptions = {\n  primary: bluegrey800,\n  secondary: bluegrey400,\n};\n\nconst grey800_grey800: PaletteOptions = {\n  primary: grey800,\n  secondary: grey800,\n};\n\nconst grey800_grey400: PaletteOptions = {\n  primary: grey800,\n  secondary: grey400,\n};\n\nconst grey900_grey400: PaletteOptions = {\n  primary: grey900,\n  secondary: grey400,\n};\n\nconst palette: PaletteOptions = bluegrey800_bluegrey400;\n\nexport default palette;","import { createMuiTheme, responsiveFontSizes, SimplePaletteColorOptions } from \"@material-ui/core\";\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport { ComponentProps } from \"react\";\nimport palette from \"./palette\";\nimport { Overrides } from \"@material-ui/core/styles/overrides\";\n\n// https://material-ui.com/guides/typescript/#augmenting-your-props-using-withstyles\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number, // React.CSSProperties['height'] -> string | number | undefined\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n\n  // allow configuration using `createMuiTheme`\n  interface ThemeOptions {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number,\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n}\n\nconst primary = palette.primary as SimplePaletteColorOptions;\nconst secondary = palette.secondary as SimplePaletteColorOptions;\nconst SPACING = 8; // TODO: reuse from default mui theme?\nconst TOOLBAR_HEIGHT = SPACING * 6; // MuiToolbar variant dense\n\nconst variables = {\n  avatar: {\n    height: SPACING * 17,\n  },\n  countdown: {\n    height: SPACING * 16,\n  },\n  navbar: {\n    height: TOOLBAR_HEIGHT,\n  },\n  player: {\n    height: SPACING * 27,\n  },\n  playlist: {\n    currentItem: {\n      height: SPACING * 15,\n    },\n    item: {\n      height: SPACING * 7.5,\n    },\n  },\n  root: {\n    backgroundColor: '#102027e6', // theme.palette.primary.dark w/ alpha .9\n  }\n};\n\nconst props: ComponentProps<any> | undefined = {\n  MuiTypography: {\n    variantMapping: {\n      h1: 'h3',\n      h2: 'h3',\n      h3: 'h3',\n    },\n  },\n  MuiToolbar: {\n    variant: 'dense', // TOOLBAR_HEIGHT\n  }\n};\n\nconst typography = {\n  caption: {\n    lineHeight: 1.2,\n  }\n};\n\nconst overrides: Overrides = {\n  MuiCssBaseline: {\n    '@global': {\n      ':focus': {\n        outline: 'unset'\n      }\n    },\n  },\n  MuiBottomNavigation: {\n    root: {\n      backgroundColor: primary.main,\n      height: TOOLBAR_HEIGHT,\n    },\n  },\n  MuiBottomNavigationAction: {\n    wrapper: {\n      color: secondary.light,\n    }\n  },\n  MuiListItemIcon: {\n    root: {\n      color: secondary.light,\n      minWidth: '32px',\n    }\n  },\n  MuiMenu: {\n    paper: {\n      backgroundColor: primary.dark,\n      color: secondary.light,\n    }\n  },\n  MuiFab: {\n    root: {\n      '&$disabled': {\n        backgroundColor: primary.main,\n        color: primary.dark,\n      }\n    }\n  },\n  MuiInputBase: {\n    root: {\n      color: 'inherit',\n      fontSize: 'inherit',\n    }\n  }\n};\n\n\nlet theme: Theme = createMuiTheme({\n  palette,\n  props,\n  overrides,\n  typography,\n  variables,\n});\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { RecoilRoot } from 'recoil';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme/theme';\nimport WorkoutStatePersist from './workout/store/workout-state-persist';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <BrowserRouter basename={`${process.env.PUBLIC_URL}`}>\n        <RecoilRoot>\n          <WorkoutStatePersist />\n          <App />\n        </RecoilRoot>\n      </BrowserRouter>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","const gen4 = (): string => Math.random().toString(16).slice(-4);\n\nconst uid = (): string => `${gen4()}-${gen4()}-${gen4()}-${gen4()}`;\n\nexport default uid;\n","import { atom } from \"recoil\";\nimport { ExerciseData } from \"../../exercise/data\";\nimport { loadState } from \"../../util\";\nimport { WORKOUT_STATE_KEY } from \"./workout-state-persist\";\n\nconst NOT_FOUND = -1;\n\nexport interface WorkoutData {\n  id: string;\n  short: string;\n  title: string;\n  description: string;\n  workMs: number;\n  breakMs: number;\n  exercises: ExerciseData[];\n}\n\nexport interface WorkoutState {\n  items: WorkoutData[];\n  currentItemIndex: number;\n}\n\nexport const initialState: WorkoutState = {\n  items: [],\n  currentItemIndex: NOT_FOUND,\n}\n\nexport const workoutAtom = atom({\n  key: 'workoutState',\n  default: loadState<WorkoutState>(WORKOUT_STATE_KEY) || initialState,\n});","import { atom } from \"recoil\";\n\nconst NOT_FOUND = -1;\nconst EMPTY = '';\n\n// TODO: naming conventions: interfaces vs models\nexport interface PlaylistData {\n  short: string;\n  name: string;\n  description: string;\n  items: PlaylistItemData[];\n}\n\nexport interface PlaylistState extends PlaylistData {\n  currentItemIndex: number;\n}\n\nexport const initialState: PlaylistState = {\n  short: EMPTY,\n  name: EMPTY,\n  description: EMPTY,\n  items: [], \n  currentItemIndex: NOT_FOUND,\n}\n\nexport interface PlaylistItemData {\n  id: string;\n  name: string;\n  durationMs: number;\n  tags?: {[key: string]: any};\n}\n\nexport const playlistAtom = atom({\n  key: 'playlistState',\n  default: initialState,\n});","let lastId = 0;\n\nconst id = () => {\n  lastId = lastId > 98\n    ? 0\n    : lastId + 1;\n  return lastId < 10\n    ? `0${lastId}`\n    : `${lastId}`;\n};\n\nexport default id;\n","import React, { useEffect } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { persistState } from '../../util';\nimport { workoutAtom, WorkoutState } from './state';\n\nexport const WORKOUT_STATE_KEY = 'workout';\n\nconst WorkoutStatePersist: React.FC = () => {\n  const workoutState = useRecoilValue(workoutAtom);\n\n  useEffect(() => {\n    persistState<WorkoutState>(WORKOUT_STATE_KEY, workoutState);\n  }, [workoutState]);\n\n  return null;\n}\n\nexport default WorkoutStatePersist;","export const loadState = <T extends any>(key: string): T | undefined => {\n  try {\n    const stateJson = localStorage.getItem(key);\n    if (stateJson) {\n      return JSON.parse(stateJson);\n    }\n  } catch (err) {\n    console.warn('Unable to hypdrate state from storage', err);\n  }\n};\n\nexport const persistState = <T extends any>(key: string, state: T): void => {\n  try {\n    localStorage.setItem(key, JSON.stringify(state));\n  } catch (err) {\n    console.warn('Unable to persist state to storage', err);\n  }\n};\n"],"sourceRoot":""}