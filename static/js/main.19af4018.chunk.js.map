{"version":3,"sources":["shared/EditText.tsx","shared/EditToggle.tsx","exercise/data.ts","exercise/Exercise.tsx","exercise/ExerciseList.tsx","Main.tsx","navigation/navigation-actions.tsx","navigation/BottomNavigation.tsx","navigation/TopNavigation.tsx","countdown/store/state.ts","countdown/store/reducer.ts","countdown/store/actions.ts","countdown/store/CountdownStoreProvider.tsx","playlist/store/state.ts","playlist/store/reducer.ts","playlist/store/actions.ts","playlist/store/PlaylistStoreProvider.tsx","player/store/reducer.ts","player/store/actions.ts","player/store/state.ts","player/store/PlayerStoreProvider.tsx","player/usePlayerPageStore.ts","playlist/PlaylistItem.tsx","playlist/Playlist.tsx","playlist/PlaylistItemCurrent.tsx","countdown/time-utils.tsx","countdown/Countdown.tsx","countdown/Arc.tsx","countdown/useColors.ts","countdown/PieCountdown.tsx","countdown/withMargin.tsx","countdown/PieSlice.tsx","player/CountdownHeader.tsx","player/HeaderAction.tsx","shared/Avatar.tsx","shared/card/CardDescription.tsx","shared/card/CardText.tsx","shared/card/CardTitle.tsx","player/WorkoutHeader.tsx","player/Header.tsx","player/Controls.tsx","player/useLayout.ts","player/Player.tsx","shared/NumberInput.tsx","workout/edit/Duration.tsx","workout/edit/HeaderAction.tsx","workout/edit/HeaderEdit.tsx","workout/store/reducer.ts","workout/store/actions.ts","workout/store/state.ts","workout/data.ts","workout/store/WorkoutStoreProvider.tsx","workout/edit/useWorkout.ts","workout/edit/WorkoutEdit.tsx","workout/toPlaylistData.tsx","shared/card/Card.tsx","shared/card/CardTextAction.tsx","workout/list/ContextMenu.tsx","workout/list/Workout.tsx","workout/list/WorkoutList.tsx","shared/UnderConstruction.tsx","App.tsx","serviceWorker.ts","theme/colors.ts","theme/palette.ts","theme/theme.ts","index.tsx"],"names":["useStyles","makeStyles","theme","root","alignItems","backgroundColor","palette","background","paper","boxShadow","shadows","borderRadius","color","primary","main","display","gridTemplateColumns","height","variables","playlist","item","marginBottom","spacing","action","EditText","defaultValue","onOk","rootProps","useTheme","classes","useState","value","setValue","error","handleOk","inputRef","React","createRef","useEffect","current","focus","ClickAwayListener","onClickAway","Box","className","TextField","onChange","event","target","IconButton","disabled","onClick","inputBox","paddingLeft","paddingRight","EditToggle","inputEl","displayEl","onCancel","use","props","isEdit","setIsEdit","handleCancel","edit","type","stopPropagation","size","exercises","name","inner","drag","contrastText","padding","width","cursor","Exercise","exercise","onDelete","Typography","variant","fab","float","marginTop","ExerciseList","sampleData","onAdd","onEdit","isAdd","setIsAdd","handleDelete","index","slice","map","i","fontSize","typography","h4","key","update","style","bind","globalThis","pl","Fab","Main","children","navHeight","overrides","MuiBottomNavigation","data-testid","bottom","left","justifyItems","justifyContent","overflow","position","right","top","maxWidth","breakpoints","values","lg","navigationActions","label","icon","FtBottomNavigation","history","useHistory","location","pathname","BottomNavigation","newValue","push","BottomNavigationAction","TopNavigation","AppBar","Toolbar","Button","startIcon","initialState","msLeft","msTotal","isRunning","reset","state","countdownReducer","isCountdownActionStart","start","isCountdownActionStop","stop","isCountdownActionPause","pause","isCountdownActionTick","Math","max","tick","isCountdownActionReset","isCountdownActionSet","payload","set","createActionDispatchers","dispatch","durationMs","CountdownStoreContext","createContext","CountdownStoreProvider","useReducer","coundtownState","dispatchers","setInterval","Provider","short","description","items","currentItemIndex","playlistReducer","isPlaylistActionSet","isPlaylistActionSetCurrentItem","setCurrentItem","isPlaylistActionPrev","isFirstIndex","prev","isPlaylistActionNext","length","isLastIndex","next","PlaylistStoreContext","PlaylistStoreProvider","playlistDispatchers","usePlaylistStore","useContext","playerReducer","isPlayerActionPlay","playState","play","isPlayerActionPause","isPlayerActionStop","PlayerStoreContext","PlayerStoreProvider","player","playerDispatchers","usePlayerPageStore","playlistState","playlistDispatch","countdownState","countdownDispatch","playerState","playerDispatch","isZero","currentItem","nextItem","prevItem","isBreakItem","tags","isBreak","PlaylistItem","isCurrent","bgcolor","borderColor","borderLeft","p","pr","fontWeight","textOverflow","whiteSpace","component","toUpperCase","Chip","breakWork","highlightItem","highlight","Playlist","playerPageState","currentItemIndexOrZero","taggedItems","filter","useStoreData","PlaylistItemCurrent","light","useRootStyles","textAlign","textTransform","text","useInnerStyles","fromNumber","timeMs","h","floor","m","s","ms","format","time","toString","padStart","ds","timeUtils","toTimeString","Countdown","dark","secondary","fontWeightBold","calcPoint","r","cx","cy","percent","sin","PI","cos","Arc","from","fStart","to","fEnd","fill","useMemo","calcPointR","startX","startY","endX","endY","largeArcFlag","round","useArc","d","useColors","invertColors","WrappedComponent","PieSliceWithMargin","setClipPath","clipIf","fractionStart","fractionEnd","id","random","viewBox","clipPath","x","y","dominantBaseline","textAnchor","fontFamily","VIEWBOX_SIZE","PieCountdown","fractionDone","done","CountdownHeader","gridArea","HeaderAction","onClose","Avatar","useProps","CardDescription","minWidth","CardText","title","ev","alignContent","gridTemplateAreas","useRootProps","CardTitle","WorkoutHeader","Header","countdownHeaderProps","buildCountdownHeaderProps","HeaderImpl","withIconButton","Play","Pause","Prev","Next","Controls","minHeight","useMediaQueries","up","mq","upxs","upsm","upmd","useRowHeights","textHeight","controlsHeight","currentHeight","totalHeight","listHeight","navbar","gridTemplateRows","useLayout","matches","useMediaQuery","mqi","useActiveMediaQuery","Player","styles","bannerProps","buildBannerProps","useButtonGroupStyles","useButtonStyles","h5","marginLeft","NumberInput","min","Number","MAX_VALUE","step","buttonClasses","buttonGroupClasses","initial","useRef","shape","Duration","mb","HeaderEdit","workout","onUpdate","handleUpdate","updatedValue","result","avatar","inputProps","minLength","maxLength","multiline","rows","workoutReducer","isWorkoutActionAdd","add","isWorkoutActionSelect","select","isWorkoutActionDelete","deleteItem","isWorkoutActionLoadSuccess","workouts","loadSuccess","isWorkoutActionUpdate","workMs","breakMs","delete","WorkoutStoreContext","WorkoutStoreProvider","workoutDispatchers","useWorkoutStore","useWorkout","notFound","workoutState","workoutDispatch","useParams","findIndex","w","WorkoutEdit","breakSec","workSec","toPlaylistItemData","pickName","expand","acc","b","Card","gridColumn","CardTextAction","ContextMenu","anchorEl","setAnchorEl","handleClose","handleMenuClick","menuOption","currentTarget","Menu","keepMounted","open","Boolean","MenuItem","ListItemIcon","Workout","onCardClick","onContextMenuClick","WorkoutList","playerPageDispatch","handleCardClick","toPlaylistItemDataBound","reduce","toPlaylistData","handleContextMenuClick","console","log","Error","gridGap","UnderConstruction","App","touchAction","path","exact","window","hostname","match","bluegrey400","bluegrey800","SPACING","countdown","MuiBottomNavigationAction","wrapper","MuiButton","MuiListItemIcon","MuiMenu","MuiFab","MuiInputBase","createMuiTheme","MuiTypography","variantMapping","h1","h2","h3","MuiToolbar","caption","lineHeight","responsiveFontSizes","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.19af4018.chunk.js","sourcesContent":["import { ClickAwayListener, IconButton, makeStyles, TextField, BoxProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport DoneIcon from '@material-ui/icons/Done';\nimport React, { useEffect, useState } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[12],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'auto min-content',\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  action: {\n    height: '100%',\n  }\n}));\n\nexport interface EditResult<T> {\n  value: T;\n  error: boolean;\n}\n\nexport interface EditTextProps extends BoxProps {\n  defaultValue: string;\n  onOk?: (data: EditResult<string>) => void;\n}\n\nconst EditText: React.FC<EditTextProps> = ({ defaultValue, onOk, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const [value, setValue] = useState(defaultValue);\n  const error = !value;\n  const handleOk = () => onOk && onOk({error, value}); // TODO: confirm dialog or cancel away, how to edit mode in toggle?\n  const inputRef = React.createRef<HTMLInputElement>();\n  useEffect(() => { inputRef.current && inputRef.current.focus(); }); // TODO: forward ref, give control to parent\n\n  return (\n    <ClickAwayListener\n      onClickAway={handleOk}\n    >\n      <Box\n        className={classes.root}\n        {...rootProps}\n      >\n        <TextField\n          error={error}\n          inputRef={inputRef}\n          defaultValue={defaultValue}\n          onChange={event => setValue(event.target.value)}\n        >\n          {value}\n        </TextField>\n        <IconButton\n          className={classes.action}\n          disabled={error}\n          onClick={handleOk}\n        >\n          <DoneIcon\n            color='inherit'\n          />\n        </IconButton>\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default EditText;","import { BoxProps, ClickAwayListener, IconButton, makeStyles, TextFieldProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React, { PropsWithChildren, useEffect, useState } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n\n  },\n  inputBox: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[12],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'auto min-content min-content',\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  action: {\n    height: '100%',\n  }\n}));\n\nexport interface EditResult {\n  value?: any; // TODO: type\n  error: boolean;\n}\n\nexport interface EditToggleProps extends BoxProps {\n  inputEl: React.ReactElement<TextFieldProps>; // TODO: generalize\n  displayEl: React.ReactElement<PropsWithChildren<any>>;\n  onOk?: (data: EditResult) => void;\n  onCancel?: () => void;\n}\n\nconst EditToggle: React.FC<EditToggleProps> = ({ inputEl, displayEl, onOk, onCancel, ...rootProps }) => {\n  const theme = use\n  const classes = useStyles(theme);\n  const defaultValue = inputEl.props.defaultValue;\n  const [value, setValue] = useState(defaultValue);\n  const [isEdit, setIsEdit] = useState(false);\n  const error = !value;\n\n  const handleOk = () => onOk && onOk({error, value}); // TODO: confirm dialog or cancel away, how to edit mode in toggle?\n  const handleCancel = (event: React.MouseEvent<any>) => {\n    setValue(defaultValue);\n    setIsEdit(false);\n  };\n  const inputRef = React.createRef<HTMLInputElement>();\n  useEffect(() => { inputRef.current && inputRef.current.focus(); }); // TODO: forward ref, give control to parent\n\n  const edit =\n    <Box\n      className={classes.inputBox}\n    >\n      <inputEl.type\n        error={error}\n        inputRef={inputRef}\n        defaultValue={defaultValue}\n        onChange={(event: any) => setValue(event.target.value)} // TODO: type\n        onClick={(event: any) => event.stopPropagation()} // prevent closing: TODO: type\n        {...inputEl.props}\n      >\n        {value}\n      </inputEl.type>\n      <IconButton\n        className={classes.action}\n        disabled={error}\n        size='small'\n        onClick={handleCancel}\n      >\n        <CloseIcon\n          color='inherit'\n        />\n      </IconButton>\n      <IconButton\n        className={classes.action}\n        disabled={error}\n        size='small'\n        onClick={handleOk}\n      >\n        <DoneIcon\n          color='inherit'\n        />\n      </IconButton>\n    </Box>;\n\n  return (\n    <ClickAwayListener\n      onClickAway={handleCancel}\n    >\n      <Box\n        onClick={() => setIsEdit(!isEdit)} // TODO: create edit button instead?\n        className={classes.root}\n        {...rootProps}\n      >\n        {isEdit\n          ? edit\n          : displayEl\n        }\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default EditToggle;","export interface ExerciseData {\n  name: string;\n  // TODO: category, tags\n}\n\n// TODO: real data\nexport const exercises: ExerciseData[] = [\n  { \n    name: 'Wall Sit',\n  },\n  { \n    name: 'Lunge',\n  },\n  { \n    name: 'Plank',\n  },\n  {\n    name: 'Plank +',\n  },\n  { \n    name: 'Reverse Crunch',\n  },\n  {\n    name: 'Shadow Boxing',\n  },\n  {\n    name: 'Side Plank',\n  },\n  {\n    name: 'Side Plank (Left)',\n  },\n  {\n    name: 'Side Plank (Right)',\n  },\n  {\n    name: 'Knee Strikes',\n  },\n  {\n    name: 'Lunge (Fwd)',\n  },\n  {\n    name: 'Lunge (Bwd)',\n  },\n  {\n    name: 'Knee High Running',\n  },\n  {\n    name: 'Jumping Jacks',\n  },\n  {\n    name: 'Push ups',\n  },\n  {\n    name: 'Squats',\n  },\n];\n","import { IconButton, makeStyles, Typography } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport React from 'react';\nimport { ExerciseData } from './data';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[2],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: `${theme.spacing(4)}px auto min-content`,\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  inner: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  drag: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    height: '100%',\n    padding: theme.spacing(1),\n    width: '100%',\n    '&:hover': {\n      cursor: 'grab',\n    }\n  },\n  action: {\n    height: '100%',\n  }\n}));\n\nexport interface ExerciseProps {\n  exercise: ExerciseData;\n  onDelete: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function Exercise(props: ExerciseProps) {\n  const { exercise, onDelete } = props;\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <Box\n      className={classes.root}\n    >\n      <DragHandleIcon\n        className={classes.drag}\n      />\n      <Typography\n        variant='h4'\n        className={classes.inner}\n      >\n        {exercise.name}\n      </Typography>\n      <IconButton\n        className={classes.action}\n        onClick={onDelete}\n      >\n        <DeleteOutlineIcon\n          color='primary'\n        />\n      </IconButton>\n    </Box>\n  );\n}","import { Box, Fab, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport React, { useState } from 'react';\nimport EditText from '../shared/EditText';\nimport EditToggle, { EditResult } from '../shared/EditToggle';\nimport { ExerciseData, exercises as sampleData } from './data';\nimport Exercise from './Exercise';\n\nconst useStyles = makeStyles(() => {\n  const theme = useTheme();\n  return {\n    fab: {\n      float: 'right',\n      marginBottom: theme.spacing(.5),\n      marginTop: theme.spacing(.5),\n    },\n  };\n});\n\nexport interface ExerciseListProps {\n  exercises: ExerciseData[];\n  onDelete?: (exercises: ExerciseData[]) => void;\n  onAdd?: (exercise: ExerciseData) => void;\n  onEdit?: (exercise: ExerciseData, index: number) => void;\n}\n\nconst ExerciseList: React.FC<ExerciseListProps> = (props) => {\n  const { exercises = sampleData, onAdd, onDelete, onEdit } = props; // TODO: remove sampleData\n  const [ isAdd, setIsAdd ] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles();\n  const handleDelete = (index: number) => onDelete && onDelete([...exercises.slice(0, index), ...exercises.slice(index + 1)]);\n  const handleEdit = (index: number) => (update: EditResult) => onEdit && onEdit({ name: update.value }, index); // TODO: handle error\n  const handleAdd = ({value: name, error }: EditResult) => { // TODO: type\n    setIsAdd(false);\n    onAdd && onAdd({ name });\n  };\n\n  return (\n    <Box>\n      {exercises.map((exercise: ExerciseData, i: number) =>\n        <EditToggle\n          fontSize={theme.typography.h4.fontSize}\n          key={exercise.name}\n          onOk={handleEdit(i)}\n          inputEl={\n            <TextField\n              defaultValue={exercise.name}\n              style={{\n                paddingLeft: theme.spacing(4),\n                paddingRight: theme.spacing(1),\n              }}\n            />\n          }\n          displayEl={\n            <Exercise\n              exercise={exercise}\n              onDelete={handleDelete.bind(globalThis, i)}\n            />\n          }\n        />\n      )}\n      {isAdd && <EditText\n        defaultValue='New Exercise'\n        fontSize={theme.typography.h4.fontSize}\n        pl={5}\n        onOk={handleAdd}\n      />}\n      <Fab\n        color='secondary'\n        disabled={isAdd}\n        onClick={() => setIsAdd(true)}\n        className={classes.fab}\n      >\n        <AddIcon />\n      </Fab>\n    </Box>\n  );\n}\n\nexport default ExerciseList;","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nconst Main = ({ children }: any) => {\n  const theme = useTheme();\n  const navHeight = (theme.overrides?.MuiBottomNavigation?.root as any).height;\n\n  return (\n    <Box\n      data-testid='main'\n      bottom={navHeight}\n      display='grid'\n      left={0}\n      justifyItems='center'\n      justifyContent='stretch'\n      overflow='auto'\n      position='fixed'\n      right={0}\n      top={navHeight}\n    >\n      <Box\n        maxWidth={theme.breakpoints.values.lg}\n        position='relative'\n        width={1}\n      >\n        {children}\n      </Box>\n    </Box>\n  );\n}\n\nexport default Main;\n","import FavoriteIcon from '@material-ui/icons/Favorite';\nimport FitnessCenterIcon from '@material-ui/icons/FitnessCenter';\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport React from 'react';\n\nexport const navigationActions = [\n  { \n    label: \"Workouts\",\n    value: \"/workouts\",\n    icon: <FitnessCenterIcon />,\n  },\n  { \n    label: \"Recents\",\n    value: \"/recents\",\n    icon: <RestoreIcon />,\n  },\n  { \n    label: \"Favorites\",\n    value: \"/favorites\",\n    icon: <FavoriteIcon />,\n  },\n  // TODO: use or lose\n  // { \n  //   label: \"Exercises\",\n  //   value: \"/exercises\",\n  //   icon: <ListIcon />,\n  // },\n];","import BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Box from '@material-ui/core/Box';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { navigationActions } from './navigation-actions';\n\nconst FtBottomNavigation = () => {\n  // TODO: this seems overly complicated?\n  const history = useHistory();\n  const [value, setValue] = useState(history.location.pathname);\n  useEffect(() => setValue(history.location.pathname), [history.location.pathname]);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n    history.push(newValue);\n  };\n\n  return (\n    <Box\n      position='fixed'\n      bottom={0}\n      left={0}\n      right={0}\n    >\n      <BottomNavigation\n        value={value}\n        onChange={handleChange}\n      >\n        {navigationActions.map(action =>\n          <BottomNavigationAction\n            key={action.value}\n            label={action.label}\n            value={action.value}\n            icon={action.icon}\n          />\n        )}\n      </BottomNavigation>\n    </Box>\n  );\n}\n\nexport default FtBottomNavigation;\n","import AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Timer from '@material-ui/icons/Timer';\nimport React from 'react';\n\nfunction TopNavigation() {\n  return (\n    <AppBar>\n      <Toolbar>\n        <Button\n          color=\"secondary\"\n          variant=\"text\"\n          startIcon={<Timer />}\n        >\n          <Typography variant=\"subtitle1\">\n            fitlery\n          </Typography>\n        </Button>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default TopNavigation;\n","export const MS_INTERVAL = 100; // TODO\nconst MS_TOTAL = 3000; // TODO\n\nexport interface CountdownState {\n  msLeft: number;\n  msTotal: number;\n  isRunning: boolean;\n}\n\nexport const initialState: CountdownState = {\n  msLeft: MS_TOTAL,\n  msTotal: MS_TOTAL,\n  isRunning: false,\n}","import { CountdownAction, isCountdownActionPause, isCountdownActionReset, isCountdownActionSet, isCountdownActionStart, isCountdownActionStop, isCountdownActionTick, CountdownActionSet } from \"./actions\"\nimport { CountdownState, MS_INTERVAL } from \"./state\"\n\nexport type CountdownReducer = (state: CountdownState, action: CountdownAction) => CountdownState\n\nconst start = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: true }\n}\n\nconst stop = (state: CountdownState): CountdownState => {\n  return { ...reset(state), isRunning: false }\n}\n\nconst pause = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: false }\n}\n\nconst tick = (state: CountdownState): CountdownState => {\n  const { msLeft, isRunning } = state;\n  return !isRunning\n    ? state\n    : { ...state, msLeft: Math.max(0, msLeft - MS_INTERVAL) };\n}\n\nconst set = (state: CountdownState, action: CountdownActionSet): CountdownState => {\n  const { msLeft, msTotal } = action.payload;\n  return {\n    ...state,\n    msLeft,\n    msTotal,\n  };\n}\n\nconst reset = (state: CountdownState): CountdownState => {\n  return { ...state, msLeft: state.msTotal };\n}\n\nconst countdownReducer: CountdownReducer = (state: CountdownState, action: CountdownAction) => {\n  if (isCountdownActionStart(action)) {\n    return start(state);\n  }\n  if (isCountdownActionStop(action)) {\n    return stop(state);\n  }\n  if (isCountdownActionPause(action)) {\n    return pause(state);\n  }\n  if (isCountdownActionTick(action)) {\n    return tick(state);\n  }\n  if (isCountdownActionReset(action)) {\n    return reset(state);\n  }\n  if (isCountdownActionSet(action)) {\n    return set(state, action);\n  }\n  return state;\n}\n\nexport default countdownReducer;","export type CountdownActionType = 'set' | 'start' | 'stop' | 'pause' | 'reset' | 'tick';\n\nexport interface CountdownAction {\n  type: CountdownActionType;\n  payload?: any;\n}\n\nexport interface CountdownActionStart extends CountdownAction {\n  type: 'start';\n}\n\nexport interface CountdownActionStop extends CountdownAction {\n  type: 'stop';\n}\n\nexport interface CountdownActionPause extends CountdownAction {\n  type: 'pause';\n}\n\nexport interface CountdownActionSetPayload {\n  msLeft: number;\n  msTotal: number;\n}\n\nexport interface CountdownActionSet extends CountdownAction {\n  type: 'set';\n  payload: CountdownActionSetPayload;\n}\n\nexport interface CountdownActionReset extends CountdownAction {\n  type: 'reset';\n}\n\nexport interface CountdownActionTick extends CountdownAction {\n  type: 'tick';\n}\n\nexport type CountdownActions =\n  | CountdownActionStart\n  | CountdownActionStop\n  | CountdownActionPause\n  | CountdownActionSet\n  | CountdownActionReset\n  | CountdownActionTick\n  ;\n\nexport function isCountdownActionStart(action: CountdownAction): action is CountdownActionStart {\n  return action.type === 'start';\n}\n\nexport function isCountdownActionStop(action: CountdownAction): action is CountdownActionStop {\n  return action.type === 'stop';\n}\n\nexport function isCountdownActionPause(action: CountdownAction): action is CountdownActionPause {\n  return action.type === 'pause';\n}\n\nexport function isCountdownActionSet(action: CountdownAction): action is CountdownActionSet {\n  return action.type === 'set';\n}\n\nexport function isCountdownActionReset(action: CountdownAction): action is CountdownActionReset {\n  return action.type === 'reset';\n}\n\nexport function isCountdownActionTick(action: CountdownAction): action is CountdownActionTick {\n  return action.type === 'tick';\n}","import React, { createContext, Dispatch, useContext, useEffect, useReducer } from \"react\";\nimport { CountdownAction, CountdownActionType } from \"./actions\";\nimport countdownReducer, { CountdownReducer } from \"./reducer\";\nimport { CountdownState, initialState, MS_INTERVAL } from \"./state\";\n\nexport type CountdownActionDispatchers = { [A in CountdownActionType]: (payload?: any) => void };\nconst createActionDispatchers = (dispatch: Dispatch<CountdownAction>): CountdownActionDispatchers => {\n  return {\n    start: () => dispatch({ type: 'start' }),\n    stop: () => dispatch({ type: 'stop' }),\n    pause: () => dispatch({ type: 'pause' }),\n    tick: () => dispatch({ type: 'tick' }),\n    set: (durationMs: number) => dispatch({ type: 'set', payload: {msLeft: durationMs, msTotal: durationMs} }),\n    reset: () => dispatch({ type: 'reset' }),\n  };\n}\n\ntype CountdownStoreContext = [CountdownState, CountdownActionDispatchers];\nconst CountdownStoreContext = createContext<CountdownStoreContext>([initialState, createActionDispatchers(() => { })]);\n\n// TODO: type\nexport const CountdownStoreProvider = ({ children }: any) => {\n  const [coundtownState, dispatch] = useReducer<CountdownReducer>(countdownReducer, initialState);\n  const dispatchers: CountdownActionDispatchers = createActionDispatchers(dispatch);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { setInterval(dispatchers.tick, MS_INTERVAL) }, []); // first render only\n  return (\n    <CountdownStoreContext.Provider value={[coundtownState, dispatchers]}>\n      {children}\n    </CountdownStoreContext.Provider>\n  );\n}\n\nexport const useCountdownStore = () => useContext<CountdownStoreContext>(CountdownStoreContext);\n","const NOT_FOUND = -1;\nconst EMPTY = '';\n\n// TODO: naming conventions: interfaces vs models\nexport interface PlaylistData {\n  short: string;\n  name: string;\n  description: string;\n  items: PlaylistItemData[];\n}\n\nexport interface PlaylistState extends PlaylistData {\n  currentItemIndex: number;\n}\n\nexport const initialState: PlaylistState = {\n  short: EMPTY,\n  name: EMPTY,\n  description: EMPTY,\n  items: [], \n  currentItemIndex: NOT_FOUND,\n}\n\nexport interface PlaylistItemData {\n  name: string;\n  durationMs: number;\n  tags?: {[key: string]: any};\n}\n","import { isPlaylistActionNext, isPlaylistActionPrev, isPlaylistActionSet, isPlaylistActionSetCurrentItem, PlaylistAction } from \"./actions\";\nimport { initialState, PlaylistState } from \"./state\";\n\nexport const NOT_FOUND = -1;\n\nexport type PlaylistReducer = (state: PlaylistState, action: PlaylistAction) => PlaylistState\n\nconst isFirstIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex === 0;\n}\n\nconst isLastIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex >= (state.items.length - 1);\n}\n\nconst set = (state: PlaylistState, action: PlaylistAction): PlaylistState => {\n  return {\n    ...initialState,\n    ...action.payload,\n  }\n}\n\nconst setCurrentItem = (state: PlaylistState, action: PlaylistAction): PlaylistState => {\n  const { index } = action.payload;\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst prev = (state: PlaylistState): PlaylistState => {\n  const currentItemIndex = isFirstIndex(state)\n    ? 0\n    : state.currentItemIndex - 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nconst next = (state: PlaylistState): PlaylistState => {\n  if (isLastIndex(state)) {\n    return state;\n  }\n  const currentItemIndex = state.currentItemIndex + 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nexport const playlistReducer: PlaylistReducer = (state: PlaylistState, action: PlaylistAction) => {\n  if (isPlaylistActionSet(action)) {\n    return set(state, action);\n  }\n  if (isPlaylistActionSetCurrentItem(action)) {\n    return setCurrentItem(state, action);\n  }\n  if (isPlaylistActionPrev(action)) {\n    return prev(state);\n  }\n  if (isPlaylistActionNext(action)) {\n    return next(state);\n  }\n  return state;\n}\n","import { PlaylistData } from \"./state\";\n\nexport type PlaylistActionType = 'set' | 'setCurrentItem' | 'prev' | 'next';\nexport interface PlaylistAction {\n  type: PlaylistActionType;\n  payload?: any;\n}\n\nexport interface PlaylistActionSet extends PlaylistAction {\n  type: 'set';\n  payload: PlaylistData;\n}\n\nexport interface PlaylistActionSetCurrentItem extends PlaylistAction {\n  type: 'setCurrentItem';\n  payload: { index: number };\n}\n\nexport interface PlaylistActionPrev extends PlaylistAction {\n  type: 'prev';\n}\n\nexport interface PlaylistActionNext extends PlaylistAction {\n  type: 'next';\n}\n\nexport type PlaylistActions =\n  | PlaylistActionSetCurrentItem\n  | PlaylistActionPrev\n  | PlaylistActionNext\n  ;\n\n  export function isPlaylistActionSet(action: PlaylistAction): action is PlaylistActionSet {\n    return action.type === 'set';\n  }\n\nexport function isPlaylistActionSetCurrentItem(action: PlaylistAction): action is PlaylistActionSetCurrentItem {\n  return action.type === 'setCurrentItem';\n}\n\nexport function isPlaylistActionPrev(action: PlaylistAction): action is PlaylistActionPrev {\n  return action.type === 'prev';\n}\n\nexport function isPlaylistActionNext(action: PlaylistAction): action is PlaylistActionNext {\n  return action.type === 'next';\n}","import React, { createContext, Dispatch, useContext, useReducer } from 'react';\nimport { PlaylistAction, PlaylistActionType } from './actions';\nimport { PlaylistReducer, playlistReducer } from './reducer';\nimport { initialState, PlaylistData, PlaylistState } from './state';\n\n\nexport type PlaylistActionDispatchers = { [A in PlaylistActionType]: (payload?: any) => void };\n\nconst createActionDispatchers = (dispatch: Dispatch<PlaylistAction>): PlaylistActionDispatchers => {\n  return {\n    set: (playlist: PlaylistData) => dispatch({ type: 'set', payload: playlist }),\n    setCurrentItem: (index: number) => dispatch({ type: 'setCurrentItem', payload: {index} }),\n    prev: () => dispatch({ type: 'prev' }),\n    next: () => dispatch({ type: 'next' }),\n  };\n}\n\nconst PlaylistStoreContext = createContext<[PlaylistState, PlaylistActionDispatchers]>([initialState, createActionDispatchers(() => { })]);\n\n// TODO: type\nexport const PlaylistStoreProvider = ({ children }: any) => {\n  const [playlist, dispatch] = useReducer<PlaylistReducer>(playlistReducer, initialState);\n  const playlistDispatchers: PlaylistActionDispatchers = createActionDispatchers(dispatch);\n  return (\n    <PlaylistStoreContext.Provider value={[playlist, playlistDispatchers]}>\n      {children}\n    </PlaylistStoreContext.Provider>\n  );\n}\n\nexport const usePlaylistStore = () => useContext<[PlaylistState, PlaylistActionDispatchers]>(PlaylistStoreContext);","import { isPlayerActionPause, isPlayerActionPlay, isPlayerActionStop, PlayerAction } from \"./actions\";\nimport { PlayerState } from \"./state\";\n\nexport type PlayerReducer = (state: PlayerState, action: PlayerAction) => PlayerState\n\nconst play = (state: PlayerState): PlayerState => {\n  return {\n    ...state,\n    playState: 'playing',\n  }\n}\n\nconst pause = (state: PlayerState): PlayerState => {\n  return {\n    ...state,\n    playState: 'paused',\n  }\n}\n\nconst stop = (state: PlayerState): PlayerState => {\n  return {\n    ...state,\n    playState: 'stopped',\n  }\n}\n\nexport const playerReducer: PlayerReducer = (state: PlayerState, action: PlayerAction) => {\n  if (isPlayerActionPlay(action)) {\n    return play(state);\n  }\n  if (isPlayerActionPause(action)) {\n    return pause(state);\n  }\n  if (isPlayerActionStop(action)) {\n    return stop(state);\n  }\n  return state;\n}\n","export type PlayerActionType = 'play' | 'pause' | 'stop' | 'prev' | 'next';\nexport interface PlayerAction {\n  type: PlayerActionType;\n}\n\nexport interface PlayerActionPlay extends PlayerAction {\n  type: 'play';\n}\n\nexport interface PlayerActionPause extends PlayerAction {\n  type: 'pause';\n}\n\nexport interface PlayerActionStop extends PlayerAction {\n  type: 'stop';\n}\n\nexport interface PlayerActionPrev extends PlayerAction {\n  type: 'prev';\n}\n\nexport interface PlayerActionNext extends PlayerAction {\n  type: 'next';\n}\n\nexport type PlayerActions =\n  | PlayerActionPlay\n  | PlayerActionPause\n  | PlayerActionStop\n  | PlayerActionPrev\n  | PlayerActionNext\n  ;\n\nexport function isPlayerActionPlay(action: PlayerAction): action is PlayerActionPlay {\n  return action.type === 'play';\n}\n\nexport function isPlayerActionPause(action: PlayerAction): action is PlayerActionPause {\n  return action.type === 'pause';\n}\n\nexport function isPlayerActionStop(action: PlayerAction): action is PlayerActionStop {\n  return action.type === 'stop';\n}\n\nexport function isPlayerActionPrev(action: PlayerAction): action is PlayerActionPrev {\n  return action.type === 'prev';\n}\n\nexport function isPlayerActionNext(action: PlayerAction): action is PlayerActionNext {\n  return action.type === 'next';\n}","export type PlayState = 'playing' | 'paused' | 'stopped';\n\nexport interface PlayerState {\n  playState: PlayState;\n}\n\nexport const initialState: PlayerState = {\n  playState: 'stopped',\n}","import React, { createContext, Dispatch, useContext, useReducer } from 'react';\nimport { PlayerAction, PlayerActionType, PlayerReducer, playerReducer } from '.';\nimport { initialState, PlayerState } from './state';\n\n\nexport type PlayerActionDispatchers = { [A in PlayerActionType]: (payload?: any) => void };\n\nconst createActionDispatchers = (dispatch: Dispatch<PlayerAction>): PlayerActionDispatchers => {\n  return {\n    play: () => dispatch({ type: 'play' }),\n    pause: () => dispatch({ type: 'pause' }),\n    stop: () => dispatch({ type: 'stop' }),\n    prev: () => dispatch({ type: 'prev' }),\n    next: () => dispatch({ type: 'next' }),\n  };\n}\n\nconst PlayerStoreContext = createContext<[PlayerState, PlayerActionDispatchers]>([initialState, createActionDispatchers(() => { })]);\n\n// TODO: type\nexport const PlayerStoreProvider = ({ children }: any) => {\n  const [player, dispatch] = useReducer<PlayerReducer>(playerReducer, initialState);\n  const playerDispatchers: PlayerActionDispatchers = createActionDispatchers(dispatch);\n  return (\n    <PlayerStoreContext.Provider value={[player, playerDispatchers]}>\n      {children}\n    </PlayerStoreContext.Provider>\n  );\n}\n\nexport const usePlayerStore = () => useContext<[PlayerState, PlayerActionDispatchers]>(PlayerStoreContext);","import { useEffect } from 'react';\nimport { CountdownState, useCountdownStore } from '../countdown/store';\nimport { NOT_FOUND, PlaylistActionSet, PlaylistActionType, PlaylistData, PlaylistState, usePlaylistStore, PlaylistActionSetCurrentItem } from '../playlist/store';\nimport { PlayerAction, PlayerActionType, PlayerState, usePlayerStore } from './store';\n\n\nexport interface PlayerPageState {\n  countdownState: CountdownState;\n  playlistState: PlaylistState;\n  playerState: PlayerState;\n}\n\nexport type PlayerPageAction = PlayerAction | PlaylistActionSet | PlaylistActionSetCurrentItem;\nexport type PlayerPageActionDispatchers = { [A in PlayerActionType | Extract<PlaylistActionType, 'set' | 'setCurrentItem'>]: (payload?: any) => void };\n\nconst usePlayerPageStore = (): [PlayerPageState, PlayerPageActionDispatchers] => {\n  const [playlistState, playlistDispatch] = usePlaylistStore();\n  const [countdownState, countdownDispatch] = useCountdownStore();\n  const [playerState, playerDispatch] = usePlayerStore();\n  const state = { countdownState, playlistState, playerState };\n  const { msLeft } = countdownState;\n  const isZero = msLeft === 0;\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = items[Math.max(currentItemIndex, 0)];\n  const nextItem = items[currentItemIndex + 1];\n  const prevItem = items[currentItemIndex - 1];\n\n  const set = (playlist: PlaylistData) => {\n    stop();\n    playlistDispatch.set(playlist);\n  };\n\n  const play = () => {\n    playerDispatch.play();\n    if (playlistState.currentItemIndex === NOT_FOUND) {\n      playlistDispatch.setCurrentItem(0);\n      countdownDispatch.set(currentItem.durationMs);\n    }\n    countdownDispatch.start();\n  };\n\n  const stop = () => {\n    playerDispatch.stop();\n    playlistDispatch.setCurrentItem(NOT_FOUND); \n    countdownDispatch.stop();\n  };\n\n  const pause = () => {\n    playerDispatch.pause();\n    countdownDispatch.pause();\n  }\n\n  const prev = () => {\n    if (prevItem) {\n      playlistDispatch.prev();\n      countdownDispatch.set(prevItem.durationMs);\n    } else {\n      countdownDispatch.reset();\n    }\n  }\n\n  const next = () => {\n    if (nextItem) {\n      playlistDispatch.next();\n      countdownDispatch.set(nextItem.durationMs);\n    } else {\n      stop();\n    }\n  };\n\n  const setCurrentItem = (index: number) => {\n    // TODO: validate\n    if (currentItemIndex === index) {\n      next();\n    } else {\n      playlistDispatch.setCurrentItem(index);\n      countdownDispatch.set(playlistState.items[index].durationMs);\n    }\n  };\n\n  useEffect(() => {\n    if (isZero) {\n      next();\n    }\n  }, [isZero]); // eslint-disable-line react-hooks/exhaustive-deps\n\n\n  // TODO: calling this one a dispatcher is maybe a little far fetched...\n  const dispatch: PlayerPageActionDispatchers = {\n    set,\n    setCurrentItem,\n    play,\n    pause,\n    stop,\n    prev,\n    next,\n  };\n\n  return [state, dispatch];\n}\n\nexport default usePlayerPageStore;","import { Box, BoxProps, Chip } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { PlaylistItemData } from './store';\n\nexport function isBreakItem(item: PlaylistItemData) {\n  return item && !!item.tags && item.tags.isBreak;\n}\n\nconst useStyles = (isCurrent: boolean) => {\n  const theme = useTheme();\n  const bgcolor = theme.palette.background.paper;\n  const color = theme.palette.primary.main;\n  const height = theme.variables.playlist.item.height;\n  const root: BoxProps = {\n    alignItems: 'center',\n    color,\n    bgcolor,\n    borderColor: theme.palette.primary.main,\n    borderLeft: theme.spacing(3),\n    display: 'grid',\n    gridTemplateColumns: '1fr min-content',\n    height,\n    p: 1,\n    pr: 3,\n    width: 1,\n  };\n  const inner: BoxProps = {\n    fontSize: '1.5rem',\n    fontWeight: isCurrent ? 'bold' : 'initial',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n  };\n\n  return { root, inner };\n}\n\nexport interface PlaylistItemProps{\n  item: PlaylistItemData\n  isCurrent: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function PlaylistItem(props: PlaylistItemProps) {\n  const { isCurrent, item, onClick } = props;\n  const { root, inner } = useStyles(isCurrent);\n\n  return (\n    <Box\n      {...root}\n      onClick={onClick}\n    >\n      <Box\n        component=\"span\"\n        {...inner}\n      >\n        {item.name?.toUpperCase()}\n      </Box>\n      <Chip\n        variant={isCurrent ? 'default' : 'outlined'}\n        color='primary'\n        label={item.tags?.breakWork}\n      />\n    </Box>\n  );\n}","import { Box, BoxProps } from '@material-ui/core';\nimport React from 'react';\nimport usePlayerPageStore from '../player/usePlayerPageStore';\nimport PlaylistItem, { isBreakItem } from './PlaylistItem';\nimport { PlaylistItemData } from './store';\n\n\nconst highlightItem = (item: PlaylistItemData) => {\n  const tags = { ...item.tags, highlight: true };\n  return {...item, tags};\n}\n\nconst useStoreData = () => {\n  const [playerPageState, dispatch] = usePlayerPageStore();\n  const { playlistState } = playerPageState;\n  const { currentItemIndex, items } = playlistState;\n  const currentItemIndexOrZero = Math.max(currentItemIndex, 0);\n  const taggedItems = [\n      ...items.slice(0, currentItemIndexOrZero),\n      ...items.slice(currentItemIndexOrZero, currentItemIndexOrZero + 2).map(highlightItem), // highlight one break item and one work item, don't know which is which\n      ...items.slice(currentItemIndexOrZero + 2),\n     ]\n    .filter(item => !isBreakItem(item)); // filter out break items, naturally removing the unwanted, highlighted break item\n  return { taggedItems, dispatch };\n}\n\nexport interface PlaylistProps extends BoxProps {\n  \n}\n\nconst Playlist: React.FC<PlaylistProps> = (rootProps) => {\n  const { taggedItems, dispatch } = useStoreData();\n  return (\n    <Box\n      overflow='auto'\n      {...rootProps}\n    >\n      {taggedItems.map((item, i) =>\n        <PlaylistItem\n          key={item.name}\n          item={item as PlaylistItemData}\n          isCurrent={item.tags?.highlight}\n          onClick={() => dispatch.setCurrentItem(i*2)}\n        />\n      )}\n    </Box>\n  );\n}\n\nexport default Playlist;\n","import { Box, BoxProps, Typography } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { isBreakItem } from './PlaylistItem';\nimport { NOT_FOUND, usePlaylistStore } from './store';\n\n\nconst useInnerStyles = () => {\n  const [playlistState] = usePlaylistStore();\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const fontSize = isBreakItem(currentItem)\n    ? '2rem'\n    : '3rem';\n  const text = currentItemIndex === NOT_FOUND\n    ? 'get ready'\n    : currentItem.name;\n  const style: React.CSSProperties = {\n    textAlign: 'center',\n    textTransform: 'uppercase',\n    fontSize,\n  };\n  return {style, text};\n}\n\nconst useRootStyles = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  const bgcolor = theme.palette.primary.light; // main;\n  const color = theme.palette.background.paper;\n  const props: BoxProps = {\n    alignItems: 'center',\n    bgcolor: bgcolor,\n    color: color,\n    display: 'grid',\n    pl: 1,\n    pr: 1,\n    boxShadow: 4,\n    width: 1,\n    ...rootProps,\n  };\n  return props;\n}\n\nexport interface PlaylistItemCurrentProps extends BoxProps {\n\n}\n\nconst PlaylistItemCurrent: React.FC<PlaylistItemCurrentProps> = (rootProps) => { // TODO: typescript magic: pick boxProps \n  const root = useRootStyles(rootProps);\n  const {style, text} = useInnerStyles();\n\n  return (\n    <Box\n      {...root}\n    >\n      <Typography\n        style={style}\n        variant='h4'\n      >\n        {text}\n      </Typography>\n    </Box>\n  );\n}\n\nexport default PlaylistItemCurrent;\n","import { Time } from \"./time\";\n\n\nconst fromNumber = (timeMs: number): Time => {\n  const h = Math.floor(timeMs / 1000 / 60 / 60);\n  const m = Math.floor((timeMs / 1000 / 60) % 60);\n  const s = Math.floor((timeMs / 1000) % 60);\n  const ms = timeMs % 1000;\n  return { h, m, s, ms };\n};\n\nconst format = (time: Time): string => {\n  const h = time.h.toString().padStart(2, '0');\n  const m = time.m.toString().padStart(2, '0');\n  const s = time.s.toString().padStart(2, '0');\n  const ds = Math.floor(time.ms / 100).toString();\n  return time.h > 0\n    ? `${h}:${m}:${s}.${ds}`\n    : `${m}:${s}.${ds}`;\n};\n\nconst toTimeString = (timeMs: number) => format(fromNumber(timeMs));\n\nconst timeUtils = {\n  fromNumber,\n  toTimeString,\n  format,\n};\n\nexport default timeUtils;","import { Box, BoxProps } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport time from './time-utils';\n\n\nexport interface CountdownProps extends BoxProps {\n  msLeft: number;\n}\n\nconst Countdown: FunctionComponent<CountdownProps> = ({ msLeft, ...rootProps }) => {\n  const theme = useTheme();\n  \n  return (\n    <Box\n      alignItems='center'\n      bgcolor={theme.palette.primary.dark}\n      color={theme.palette.secondary.contrastText}\n      display='grid'\n      fontWeight={theme.typography.fontWeightBold}\n      fontSize='3rem'\n      justifyContent='center'\n      {...rootProps}\n    >\n      {time.toTimeString(msLeft)}\n    </Box>\n  );\n};\n\nexport default Countdown;","import React, { useMemo } from 'react';\n\ninterface ArcProps extends React.SVGProps<SVGPathElement> {\n  fStart: number;\n  fEnd: number;\n  r?: number;\n  cx?: number;\n  cy?: number;\n}\n\ninterface D {\n  startX: number;\n  startY: number;\n  endX: number;\n  endY: number;\n  largeArcFlag: 0 | 1;\n}\n\nconst calcPoint = (r: number = 1, cx: number = 0, cy: number = 0, percent: number) => {\n  return [\n    cx + Math.sin(2 * Math.PI * percent) * r,\n    cy - Math.cos(2 * Math.PI * percent) * r,\n  ];\n};\n\nconst useArc: (...args: any) => D = (fStart: number, fEnd: number, r: number = 1, cx: number = 0, cy: number = 0) => {\n  return useMemo(() => {\n    const calcPointR = calcPoint.bind(null, r, cx, cy);\n    const [startX, startY] = calcPointR(fStart);\n    const [endX, endY] = calcPointR(fEnd);\n    const largeArcFlag = Math.round(fEnd - fStart) as 0 | 1;\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      largeArcFlag,\n    };\n  }, [fStart, fEnd, r, cx, cy]);\n}\n\nconst Arc = (props: ArcProps) => {\n  const { fStart: from, fEnd: to, r = 1, cx = 0, cy = 0, fill = 'currentColor' } = props;\n  const { startX, startY, endX, endY, largeArcFlag } = useArc(from, to, r, cx, cy);\n  const d =\n    `M ${startX} ${startY} ` +\n    `A ${r} ${r} 0 ${largeArcFlag} 1 ${endX} ${endY} ` +\n    `L ${cx} ${cy}`\n  ;\n  return (\n    <path\n      fill={fill}\n      d={d}\n    />\n  );\n};\n\nexport default Arc;","import useTheme from '@material-ui/core/styles/useTheme';\n\nconst useColors = (invertColors: boolean) => {\n  const theme = useTheme();\n  const light = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  const dark = {\n    bgcolor: theme.palette.primary.light,\n    color: theme.palette.secondary.contrastText,\n  };\n  const [left, done] = invertColors\n    ? [dark, light]\n    : [light, dark];\n  return [left, done];\n}\n\nexport default useColors;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport PieSlice from './PieSlice';\nimport useColors from './useColors';\nimport withMargin from './withMargin';\n\n\nexport interface PieCountdownProps extends BoxProps {\n  fractionDone: number;\n  invertColors: boolean;\n  text: string;\n}\n\nconst PieSliceWithMargin = withMargin(PieSlice);\n\nconst PieCountdown: FunctionComponent<PieCountdownProps> = ({ fractionDone, invertColors, text, ...rootProps }) => {\n  const theme = useTheme();\n  const [left, done] = useColors(invertColors);\n\n  return (\n    <Box\n      bgcolor={theme.palette.primary.main}\n      position='relative'\n      display='grid'\n      alignItems='center'\n      justifyContent='center'\n      width='100%'\n      height='100%'\n      {...rootProps}\n    >\n      <PieSliceWithMargin\n        bgcolor={left.bgcolor}\n        color={left.color}\n        clipIf={fractionDone > 0}\n        fractionStart={fractionDone}\n        fractionEnd={1}\n        text={text}\n      />\n      <PieSliceWithMargin\n        bgcolor={done.bgcolor}\n        color={done.color}\n        clipIf={(fractionDone < 1)}\n        fractionStart={0}\n        fractionEnd={fractionDone}\n        text={text}\n      />\n    </Box >\n  );\n};\n\nexport default PieCountdown;\n","import { useTheme } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\n\nexport default function withMargin<P = {}>(\n  WrappedComponent: React.ComponentType<P>,\n): React.FunctionComponent<P> {\n  return (props: React.PropsWithChildren<P>) => {\n    const theme = useTheme();\n    return (\n      <Box\n        position=\"absolute\"\n        top={theme.spacing(1)}\n        left={theme.spacing(1)}\n        right={theme.spacing(1)}\n        bottom={theme.spacing(1)}\n      >\n        <WrappedComponent {...props} />\n      </Box>\n    );\n  };\n}\n","import React from 'react';\nimport Arc from './Arc';\n\n\nexport interface PieSliceProps {\n  text: string;\n  bgcolor: string;\n  color: string;\n  clipIf: boolean;\n  fractionStart: number;\n  fractionEnd: number;\n}\n\nconst PieSlice = (props: PieSliceProps) => {\n  const { text, bgcolor, color, clipIf: setClipPath, fractionStart, fractionEnd } = props;\n  const VIEWBOX_SIZE = 100;\n  const id = `clip${Math.floor(1000000 * Math.random())}`;\n  return (\n    <svg\n      width=\"100%\"\n      height=\"100%\"\n      viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n    >\n      <g\n        clipPath={setClipPath ? `url(#${id})` : ``}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={color}\n          fontSize={2 / 3 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </g>\n      <clipPath id={id}>\n        <Arc\n          cx={50}\n          cy={50}\n          r={VIEWBOX_SIZE / 2}\n          fStart={fractionStart}\n          fEnd={fractionEnd}\n        />\n      </clipPath>\n    </svg>\n  )\n}\n\nexport default PieSlice;","import React from 'react';\nimport Countdown from '../countdown/Countdown';\nimport PieCountdown, { PieCountdownProps } from '../countdown/PieCountdown';\n\n\nexport interface CountdownHeaderProps extends PieCountdownProps {\n  msLeft: number;\n}\n\nconst CountdownHeader: React.FC<CountdownHeaderProps> = (props) => {\n  const { msLeft } = props;\n  return (\n    <>\n      <PieCountdown\n        {...props}\n        gridArea='avatar'\n      />\n      <Countdown\n        msLeft={msLeft}\n        gridArea='text'\n      />\n    </>\n  );\n}\n\nexport default CountdownHeader;\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nexport interface AvatarProps extends BoxProps {\n  text: string;\n}\n\nconst useProps = (props: BoxProps) => {\n  const theme = useTheme();\n  const root: BoxProps = {\n    bgcolor: theme.palette.primary.main,\n    display: 'grid',\n    height: '100%',\n    p: 1,\n    ...props,\n  };\n  const inner: BoxProps = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  return { root, inner };\n}\n\nconst Avatar: React.FC<AvatarProps> = ({ text, ...props }) => {\n  const { root, inner } = useProps(props);\n  const VIEWBOX_SIZE = 100;\n\n  return (\n    <Box\n      data-testid='avatar'\n      {...root}\n    >\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={inner.bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={inner.color}\n          fontSize={4 / 5 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </svg>\n    </Box>\n  );\n};\n\nexport default Avatar;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardDescriptionProps extends BoxProps { }\n\nconst CardDescription: React.FC<CardDescriptionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-description'\n      gridArea={'desc'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='caption'\n        component='p'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardDescription;","import { BoxProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nconst useRootProps = (rootProps: BoxProps): BoxProps => {\n  const theme = useTheme();\n  return {\n    alignContent: 'center',\n    bgcolor: theme.palette.primary.dark,\n    color: theme.palette.secondary.contrastText,\n    display: 'grid',\n    gridTemplateAreas: `\n      \"title title title title .\"\n      \"desc desc desc desc desc\"\n    `,\n    gridTemplateColumns: 'repeat(5, 1fr)',\n    p: 2,\n    position: 'relative', // accomodate for absolute positioning of\n    ...rootProps,\n  };\n}\n\nexport interface CardTextProps extends BoxProps {\n  action?: any; // TODO: type\n  title: any;\n  description: any;\n}\n\nconst CardText: React.FC<CardTextProps> = ({ action, description, title, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-text'\n      onClick={(ev) => ev.stopPropagation()}\n      {...useRootProps(rootProps)}\n    >\n      {title}\n      {description}\n      {action}\n    </Box>\n  );\n};\n\nexport default CardText;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardTitleProps extends BoxProps { }\n\nconst CardTitle: React.FC<CardTitleProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-title'\n      gridArea={'title'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='subtitle1'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardTitle;","import React from 'react';\nimport Avatar from '../shared/Avatar';\nimport CardDescription from '../shared/card/CardDescription';\nimport CardText from '../shared/card/CardText';\nimport CardTitle from '../shared/card/CardTitle';\n\nexport interface WorkoutHeaderProps {\n  description: string;\n  short: string;\n  title: string;\n}\n\nconst WorkoutHeader: React.FC<WorkoutHeaderProps> = (props) => {\n  const { description, short, title  } = props;\n  return (\n    <>\n      <Avatar\n        text={short}\n        gridArea='avatar'\n      />\n      <CardText\n        gridArea='text'\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        \n      >\n      </CardText>\n    </>\n  );\n}\n\nexport default WorkoutHeader;","import React, { ReactNode } from 'react';\nimport { isBreakItem } from \"../playlist/PlaylistItem\";\nimport { PlaylistItemData } from \"../playlist/store\";\nimport CountdownHeader, { CountdownHeaderProps } from './CountdownHeader';\nimport HeaderAction from './HeaderAction';\nimport PlayerHeader from './WorkoutHeader';\nimport { PlayState } from \"./store\";\n\nexport interface HeaderProps {\n  short: string;\n  title: string;\n  description: string;\n  playState: PlayState;\n  msLeft: number;\n  msTotal: number;\n  children?: ReactNode;\n  currentItem: PlaylistItemData;\n  onClose: () => void;\n}\n\nconst buildCountdownHeaderProps = ({ currentItem, msLeft, msTotal }: Pick<HeaderProps, 'currentItem' | 'msLeft' | 'msTotal'>): CountdownHeaderProps => {\n  const fractionDone = 1 - msLeft / msTotal;\n  const isBreak = isBreakItem(currentItem);\n  const text = isBreak ? 'Ready' : 'Go!';\n  return {\n    fractionDone,\n    invertColors: isBreak,\n    msLeft,\n    text,\n  };\n}\n\nconst Header: React.FC<HeaderProps> = (props) => {\n  const { description, playState, short, title, onClose } = props;\n  const countdownHeaderProps = buildCountdownHeaderProps( props );\n  const HeaderImpl = playState === 'stopped'\n    ? (\n      <PlayerHeader\n        description={description}\n        short={short}\n        title={title}\n      />\n    )\n    : (\n      <CountdownHeader\n        {...countdownHeaderProps}\n      />\n    );\n  return (\n    <>\n      {HeaderImpl}\n      <HeaderAction\n        onClose={onClose}\n      />\n    </>\n  );\n};\n\n\nexport default Header;\n","import { Box, BoxProps, IconButton } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport React from 'react';\nimport { PlayerActionType, PlayState } from './store/';\n\ninterface ControlButtonProps {\n  onClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nconst withIconButton = (icon: JSX.Element) => {\n  return (props: ControlButtonProps) => {\n    const { onClick } = props;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={onClick}\n      >\n        {icon}\n      </IconButton>\n    );\n  };\n};\n\nconst Play = withIconButton(<PlayArrowIcon style={{ fontSize: '4rem' }} />);\nconst Pause = withIconButton(<PauseIcon style={{ fontSize: '4rem' }} />);\nconst Prev = withIconButton(<SkipPreviousIcon style={{ fontSize: '2.5rem' }} />);\nconst Next = withIconButton(<SkipNextIcon style={{ fontSize: '2.5rem' }} />);\n\nconst useProps = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  return {\n    alignItems: 'center',\n    display: 'grid',\n    justifyContent: 'center',\n    gridTemplateColumns: '1fr 2fr 1fr',\n    minHeight: 80,\n    bgcolor: theme.palette.background.paper,\n    ...rootProps,\n  };\n}\n\nexport interface ControlsProps extends Omit<BoxProps, 'onClick'> {\n  playState: PlayState;\n  onClick: (p: PlayerActionType) => void\n}\n\nconst Controls: React.FC<ControlsProps> = ({ playState, onClick, ...rootProps }) => {\n  return (\n    <Box\n      {...useProps(rootProps)}\n    >\n      <Prev onClick={() => onClick('prev')} />\n      {\n        playState !== 'playing'\n          ? <Play onClick={() => onClick('play')} />\n          : <Pause onClick={() => onClick('pause')} />\n      }\n      <Next onClick={() => onClick('next')} />\n    </Box>\n  );\n}\n\nexport default Controls;","import { Theme, useMediaQuery, useTheme } from '@material-ui/core';\n\n// TODO: from global context\nconst useMediaQueries = (theme: Theme) => {\n  const [upxs, upsm, upmd] = [\n    theme.breakpoints.up('xs'),\n    theme.breakpoints.up('sm'),\n    theme.breakpoints.up('md')\n  ];\n  return [upxs, upsm, upmd];\n};\n\n// TODO: from global context\nconst useActiveMediaQuery = (theme: Theme): string => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const mqis = [\n    { mq: upxs, matches: useMediaQuery(upxs) },\n    { mq: upsm, matches: useMediaQuery(upsm) },\n    { mq: upmd, matches: useMediaQuery(upmd) },\n  ];\n  const mq = mqis\n    .filter(mqi => mqi.matches)\n    .map(mqi => mqi.mq)\n    .slice(-1)\n    [0] || upxs;\n  return mq;\n}\n\nconst useRowHeights = (theme: Theme, mq: string): number[] => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [text, controls, current] = {\n    [upxs]: [16, 11, 15],\n    [upsm]: [17, 11, 15],\n    [upmd]: [15, 13, 15],\n  }[mq].map(s => theme.spacing(s));\n  return [text, controls, current];\n};\n\nfunction useRootStyles(theme: Theme, mq: string): React.CSSProperties {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [textHeight, controlsHeight, currentHeight] = useRowHeights(theme, mq);\n  const totalHeight = textHeight + controlsHeight + currentHeight;\n  const listHeight = `calc(100vh - ${theme.variables.navbar.height * 2}px - ${totalHeight}px)`; // TODO: prevent <= 0 \n  return {\n    [upxs]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar text text text text'\n        'controls controls controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `${textHeight}px repeat(4, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upsm]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar text text text'\n        'avatar avatar controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(2, ${(textHeight + controlsHeight) / 2}px) repeat(3, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upmd]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar avatar text text'\n        'avatar avatar avatar controls controls'\n        'avatar avatar avatar current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(3, ${totalHeight / 3}px) repeat(2, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    }\n  }[mq];\n}\n\nexport const useLayout = (): {[key: string]: React.CSSProperties} => {\n  const theme = useTheme();\n  const mq = useActiveMediaQuery(theme);\n  const root = useRootStyles(theme, mq);\n  const styles = {\n    root,\n  };\n  return styles;\n}\n","import { Box } from '@material-ui/core';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Playlist from '../playlist/Playlist';\nimport PlaylistItemCurrent from '../playlist/PlaylistItemCurrent';\nimport Header, { HeaderProps } from './Header';\nimport Controls from './Controls';\nimport { PlayerActionType } from './store';\nimport { useLayout } from './useLayout';\nimport usePlayerPageStore, { PlayerPageState } from './usePlayerPageStore';\n\n\nconst buildBannerProps = (state: PlayerPageState, onClose: () => void): HeaderProps => {\n  const { countdownState, playlistState, playerState } = state;\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const { msLeft, msTotal } = countdownState;\n  const { playState } = playerState;\n  const { short, name: title, description } = playlistState;\n\n  return {\n    playState,\n    msLeft,\n    msTotal,\n    currentItem,\n    short,\n    title,\n    description,\n    onClose,\n  }\n}\n\n// TODO: dispatch stop when navigating away\n// TODO: handle empty\nconst Player = () => {\n  const history = useHistory();\n  const styles = useLayout();\n  const [state, dispatch] = usePlayerPageStore();\n  const { playlistState } = state;\n  if (!playlistState || !playlistState.items.length) {\n    history.push(`/workouts`);\n    return null;\n  }\n  const { playerState } = state;\n  const { playState } = playerState;\n  const onClose = () => history.push(`/`);\n  const bannerProps = buildBannerProps(state, onClose);\n  const handleControlsClick = (type: PlayerActionType) => dispatch[type]();\n\n  return (\n    <Box\n      data-testid='player'\n      style={styles.root}\n    >\n      <Header\n        {...bannerProps}\n      >\n      </Header>\n      <Controls\n        gridArea='controls'\n        playState={playState}\n        onClick={handleControlsClick}\n      />\n      <PlaylistItemCurrent\n        gridArea='current'\n      />\n      <Playlist\n        gridArea='list'\n      />\n    </Box>\n  );\n}\n\nexport default Player;","import { Box, IconButton, makeStyles, Typography, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport React, { useEffect, useRef } from 'react';\n\nconst useButtonGroupStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: 'inherit',\n    display: 'grid',\n    gridTemplateColumns: `60px minmax(50px, 4fr) 60px 32px`,\n    height: '100%',\n  }\n}));\n\nconst useButtonStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.secondary.light,\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    height: '100%',\n    marginLeft: '1px',\n    textTransform: 'none',\n  },\n}));\n\nexport interface NumberInputProps {\n  min?: number;\n  max?: number;\n  step?: number;\n  value: number;\n  onChange?: (value: number) => void;\n}\n\nconst NumberInput: React.FC<NumberInputProps> = (props) => {\n  const { value, min=0, max=Number.MAX_VALUE, step=1, onChange } = props;\n  const theme = useTheme();\n  const buttonClasses = useButtonStyles(theme);\n  const buttonGroupClasses = useButtonGroupStyles(theme);\n  const initial = useRef(0);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { initial.current = value }, []);\n\n  const handleDown = () => {\n    const newValue = Math.max(value - step, min);\n    onChange && onChange(newValue);\n  }\n\n  const handleUp = () => {\n    const newValue = Math.min(value + step, max);\n    onChange && onChange(newValue);\n  }\n\n  const handleReset = () => {\n    onChange && onChange(initial.current);\n  }\n\n  return (\n    <Box\n      className={buttonGroupClasses.root}\n    >\n      <IconButton\n        className={buttonClasses.root}\n        onClick={handleDown}\n      >\n        <RemoveIcon />\n      </IconButton>\n      <Typography\n        variant='h4'\n        style={{\n          backgroundColor: '#fff',\n          borderRadius: theme.shape.borderRadius,\n          display: 'grid',\n          alignItems: 'center',\n          height: '100%',\n          textAlign: 'center',\n        }}\n      >\n        {value}\n      </Typography>\n      <IconButton\n        className={buttonClasses.root}\n        onClick={handleUp}\n      >\n        <AddIcon />\n      </IconButton>\n      <IconButton\n        className={buttonClasses.root}\n        onClick={handleReset}\n      >\n        <ReplayIcon />\n      </IconButton>\n    </Box>\n  );\n}\n\nexport default NumberInput;","import { useTheme, makeStyles } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\nimport NumberInput, { NumberInputProps } from '../../shared/NumberInput';\n\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.secondary.contrastText,\n    display: 'grid',\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    height: '100%',\n    padding: theme.spacing(1),\n    textTransform: 'uppercase',\n    whiteSpace: 'nowrap',\n  },\n}));\n\ninterface DurationProps extends NumberInputProps{\n  label: string;\n}\n\nconst Duration: React.FC<DurationProps> = ({ label, ...props }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  return (\n    <Box\n      alignItems='center'\n      bgcolor={theme.palette.primary.main}\n      display='grid'\n      gridTemplateColumns='min(130px) minmax(min-content, 300px) auto'\n      height={theme.variables.playlist.item.height}\n      mb={.3}\n    >\n      <Box\n        className={classes.label}\n      >\n        {label}\n      </Box>\n      <NumberInput\n        {...props}\n      />\n      <Box\n        bgcolor={theme.palette.primary.main}\n        height={1}\n      />\n    </Box>\n  );\n}\n\nexport default Duration;","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\n// TODO: makeStyles\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import { Box, BoxProps, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport Avatar from '../../shared/Avatar';\nimport CardDescription from '../../shared/card/CardDescription';\nimport CardText from '../../shared/card/CardText';\nimport CardTitle from '../../shared/card/CardTitle';\nimport EditToggle, { EditResult } from '../../shared/EditToggle';\nimport { WorkoutData } from '../store';\nimport HeaderAction from './HeaderAction';\n\n\nexport interface HeaderProps extends BoxProps {\n  workout: WorkoutData;\n  onClose?: () => void;  // TODO: page responsibility\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst HeaderEdit: React.FC<HeaderProps> = ({ workout, onClose, onUpdate, ...rootProps }) => {  \n  const { description, short, title  } = workout;\n  const handleClose = () => onClose && onClose();\n  const handleUpdate = (key: string) => (update: EditResult) => { // TODO: type\n    if (!onUpdate) {\n      return;\n    }\n    const { value: updatedValue, error } = update;\n    const result = { value: {[key]: updatedValue }, error } \n    onUpdate(result);\n  }\n\n  const theme = useTheme();\n  return (\n    <Box\n      display='grid'\n      gridTemplateAreas='\"avatar text\"'\n      gridTemplateColumns={`${theme.variables.avatar.height}px auto`}\n      mb={.3}\n      {...rootProps}\n    >\n      <EditToggle\n          alignItems='center'\n          display='grid'\n          fontSize={theme.typography.h4.fontSize}\n          height={theme.variables.avatar.height}\n          gridArea='avatar'\n          onOk={handleUpdate('short')}\n          inputEl={\n            <TextField\n              inputProps={{minLength: 2, maxLength: 2}}\n              defaultValue={short}\n            />\n          }\n          displayEl={\n            <Avatar\n              text={short}\n            />\n          }\n        />\n      <CardText\n        action={\n          <HeaderAction\n            onClose={handleClose}\n          />\n        }\n        title={\n          <EditToggle\n            gridArea='title'\n            onOk={handleUpdate('title')}\n            inputEl={\n              <TextField\n                defaultValue={title}\n              />\n            }\n            displayEl={\n              <CardTitle>\n                {title}\n              </CardTitle>\n            }\n          />\n        }\n        description={\n          <EditToggle\n            gridArea='desc'\n            onOk={handleUpdate('description')}\n            inputEl={\n              <TextField\n                defaultValue={description}\n                multiline\n                rows={3}\n              />\n            }\n            displayEl={\n              <CardDescription>\n                {description}\n              </CardDescription>\n            }\n          />\n        }\n        gridArea='text'\n      />\n    </Box>\n  );\n};\n\nexport default HeaderEdit;","import { WorkoutState } from './state';\nimport { WorkoutAction, isWorkoutActionAdd, isWorkoutActionDelete, isWorkoutActionLoadSuccess, isWorkoutActionSelect, isWorkoutActionUpdate } from './actions';\n\n\nexport const NOT_FOUND = -1;\n\nexport type WorkoutReducer = (state: WorkoutState, action: WorkoutAction) => WorkoutState\n\nconst add = (state: WorkoutState, action: WorkoutAction): WorkoutState => {\n  const { workout } = action.payload;\n  return {\n    ...state,\n    items: [ workout, ...state.items ],\n  }\n}\n\nconst deleteItem = (state: WorkoutState): WorkoutState => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nconst loadSuccess = (state: WorkoutState, action: WorkoutAction): WorkoutState => {\n  const { workouts } = action.payload;\n  return {\n    ...state,\n    items: workouts,\n  }\n}\n\nconst select = (state: WorkoutState, action: WorkoutAction): WorkoutState => {\n  const { index } = action.payload;\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst update = (state: WorkoutState, action: WorkoutAction): WorkoutState => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  const { workout } = action.payload;\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      workout,\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nexport const workoutReducer: WorkoutReducer = (state: WorkoutState, action: WorkoutAction) => {\n  if (isWorkoutActionAdd(action)) {\n    return add(state, action);\n  }\n  if (isWorkoutActionSelect(action)) {\n    return select(state, action);\n  }\n  if (isWorkoutActionDelete(action)) {\n    return deleteItem(state);\n  }\n  if (isWorkoutActionLoadSuccess(action)) {\n    return loadSuccess(state, action);\n  }\n  if (isWorkoutActionUpdate(action)) {\n    return update(state, action);\n  }\n  return state;\n}\n","import { WorkoutData } from \"./state\";\n\nexport type WorkoutActionType = 'loadSuccess' | 'add' | 'delete' | 'select' | 'update';\nexport interface WorkoutAction {\n  type: WorkoutActionType;\n  payload?: any;\n}\n\nexport interface WorkoutActionAdd extends WorkoutAction {\n  type: 'add';\n  payload: { workout: WorkoutData };\n}\n\nexport interface WorkoutActionDelete extends WorkoutAction {\n  type: 'delete';\n}\n\nexport interface WorkoutActionLoadSuccess extends WorkoutAction {\n  type: 'loadSuccess';\n  payload: { workouts: WorkoutData[] };\n}\n\nexport interface WorkoutActionSelect extends WorkoutAction {\n  type: 'select';\n  payload: { index: number };\n}\n\nexport interface WorkoutActionUpdate extends WorkoutAction {\n  type: 'update';\n  payload: { workout: WorkoutData };\n}\n\nexport type WorkoutActions =\n  | WorkoutActionAdd\n  | WorkoutActionDelete\n  | WorkoutActionLoadSuccess\n  | WorkoutActionSelect\n  | WorkoutActionUpdate\n  ;\n\nexport function isWorkoutActionAdd(action: WorkoutAction): action is WorkoutAction {\n  return action.type === 'add';\n}\n\nexport function isWorkoutActionDelete(action: WorkoutAction): action is WorkoutActionDelete {\n  return action.type === 'delete';\n}\n\nexport function isWorkoutActionLoadSuccess(action: WorkoutAction): action is WorkoutActionLoadSuccess {\n  return action.type === 'loadSuccess';\n}\n\nexport function isWorkoutActionSelect(action: WorkoutAction): action is WorkoutActionSelect {\n  return action.type === 'select';\n}\n\nexport function isWorkoutActionUpdate(action: WorkoutAction): action is WorkoutActionUpdate {\n  return action.type === 'update';\n}","import { ExerciseData } from \"../../exercise/data\";\nimport { workouts } from \"../data\";\n\nconst NOT_FOUND = -1;\n\n// TODO: naming conventions: interfaces vs models\nexport interface WorkoutData {\n  short: string;\n  title: string;\n  description: string;\n  workMs: number,\n  breakMs: number,\n  exercises: ExerciseData[];\n}\n\nexport interface WorkoutState {\n  items: WorkoutData[];\n  currentItemIndex: number;\n}\n\nexport const initialState: WorkoutState = {\n  items: workouts,  // TODO: real data\n  currentItemIndex: NOT_FOUND,\n}\n","import { WorkoutData } from \"./store/state\";\n\nconst SEC = 1000;\n\n// TODO: storage\nexport const workouts: WorkoutData[] = [\n  { \n    short: '18',\n    title: '18min',\n    description: '12 exercises that will make the 12 labors of hercules look like a walk in the park',\n    workMs: 60 * SEC,\n    breakMs: 30 * SEC,\n    exercises: [\n      { name: 'Wall Sit' },\n      { name: 'Lunge' },\n      { name: 'Plank' },\n      { name: 'Plank +' },\n      { name: 'Reverse Crunch' },\n      { name: 'Shadow Boxing' },\n      { name: 'Side Plank' },\n      { name: 'Side Plank (Left)' },\n      { name: 'Side Plank (Right)' },\n      { name: 'Knee Strikes' },\n      { name: 'Lunge (Fwd)' },\n      { name: 'Lunge (Bwd)' },\n      { name: 'Knee High Running' },\n      { name: 'Jumping Jacks' },\n      { name: 'Push ups' },\n      { name: 'Squats' },\n    ]\n  },\n  { \n    short: 'TB',\n    title: 'TABATA',\n    description: 'Hakuna Tabata?',\n    workMs: 40 * SEC,\n    breakMs: 20 * SEC,\n    exercises: [\n      { name: 'Squat Jumps' },\n      { name: 'Push Ups' },\n      { name: 'Burpees' },\n      { name: 'Jumping Jacks' },\n      { name: 'High Knees' },\n    ]\n  },\n  { \n    short: 'MP',\n    title: 'Master Planker',\n    description: 'Toughest planker on the block',\n    workMs: 60 * SEC,\n    breakMs: 30 * SEC,\n    exercises: [\n      { name: 'Ellbow Plank' },\n      { name: 'Full Plank' },\n      { name: 'Side Plank' },\n      { name: 'Side Plank Knee Tucks (1)' },\n      { name: 'Side Plank Knee Tucks (2)' },\n      { name: 'Plank Arm Raise' },\n      { name: 'Plank Leg Raise' },\n      { name: 'Reverse Plank' },\n    ]\n  },\n  { \n    short: 'AB',\n    title: 'ABS-olutely fantastic',\n    description: 'A six pack is just the beginning',\n    workMs: 60 * SEC,\n    breakMs: 30 * SEC,\n    exercises: [\n      { name: 'Hollow Body' },\n      { name: 'Superman Hold' },\n      { name: 'Leg Raises'},\n      { name: 'V Ups'},\n      { name: 'Flutter Kicks'},\n      { name: 'Star Toe Touch'},\n    ]\n  },\n  {\n    short: 'OO',\n    title: 'Obliques obligatory',\n    description: `Should I google that for you?`,\n    workMs: 60 * SEC,\n    breakMs: 30 * SEC,\n    exercises: [\n      { name: 'Wood Choppers' },\n      { name: 'Side Plank' },\n      { name: 'Ankle Touches'},\n      { name: 'Plank Rotation'},\n      { name: 'Russian Twist'},\n    ]\n  },\n  {\n    short: 'JJ',\n    title: 'Jump Jack!',\n    description: `I don't care what your real name is`,\n    workMs: 300 * SEC,\n    breakMs: 10 * SEC,\n    exercises: [\n      { name: 'Jumping Jacks' },\n      { name: 'Oblique Jacks' },\n      { name: 'Cross Jacks' },\n    ]\n  },\n];","import React, { createContext, Dispatch, useContext, useReducer } from 'react';\nimport { WorkoutAction, WorkoutActionType } from './actions';\nimport { WorkoutReducer, workoutReducer } from './reducer';\nimport { initialState, WorkoutData, WorkoutState } from './state';\n\n\nexport type WorkoutActionDispatchers = { [A in WorkoutActionType]: (payload?: any) => void };\n\nconst createActionDispatchers = (dispatch: Dispatch<WorkoutAction>): WorkoutActionDispatchers => {\n  return {\n    add: (workout: WorkoutData) => dispatch({ type: 'add', payload: { workout } }),\n    delete: (index: number) => dispatch({ type: 'delete', payload: { index }}),\n    loadSuccess: (workouts: WorkoutData[]) => dispatch({ type: 'loadSuccess', payload: { workouts } }),\n    select: (index: number) => dispatch({ type: 'select', payload: { index } }),\n    update: (workout: WorkoutData) => dispatch({ type: 'update', payload: { workout } }),\n  };\n}\n\nconst WorkoutStoreContext = createContext<[WorkoutState, WorkoutActionDispatchers]>([initialState, createActionDispatchers(() => { })]);\n\n// TODO: type\nexport const WorkoutStoreProvider = ({ children }: any) => {\n  const [workout, dispatch] = useReducer<WorkoutReducer>(workoutReducer, initialState);\n  const workoutDispatchers: WorkoutActionDispatchers = createActionDispatchers(dispatch);\n  return (\n    <WorkoutStoreContext.Provider value={[workout, workoutDispatchers]}>\n      {children}\n    </WorkoutStoreContext.Provider>\n  );\n}\n\nexport const useWorkoutStore = () => useContext<[WorkoutState, WorkoutActionDispatchers]>(WorkoutStoreContext);","import { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useWorkoutStore, WorkoutActionDispatchers, WorkoutData } from '../store';\n\nconst useWorkout = (notFound: () => void): [WorkoutData, WorkoutActionDispatchers] => {\n  const [workoutState, workoutDispatch] = useWorkoutStore();\n  const { items: workouts, currentItemIndex } = workoutState;\n  const { title } = useParams();\n  const workout = workouts[currentItemIndex];\n  useEffect(() => {\n    if (workout) {\n      return;\n    }\n    const index = workouts.findIndex(w => w.title === title);\n    if (index > -1) {\n      workoutDispatch.select(index);\n    } else {\n      notFound();\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  return [workout, workoutDispatch];\n}\n\nexport default useWorkout;\n","import Box from '@material-ui/core/Box';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { ExerciseData } from '../../exercise/data';\nimport ExerciseList from '../../exercise/ExerciseList';\nimport { EditResult } from '../../shared/EditToggle';\nimport Duration from './Duration';\nimport HeaderEdit from './HeaderEdit';\nimport useWorkout from './useWorkout';\n\n\nconst WorkoutEdit: React.FC<any> = () => {\n  const history = useHistory();\n  const notFound = () => history.push(`/workouts`);\n  const [workout, workoutDispatch] = useWorkout(notFound);\n  if (!workout) {\n    return null;\n  }\n  \n  const handleClose = () => history.push('/');\n  const handleSetBreakMs = (breakSec: number) => workoutDispatch.update({ ...workout, breakMs: breakSec * 1000 });\n  const handleSetWorkMs = (workSec: number) => workoutDispatch.update({ ...workout, workMs: workSec * 1000});\n  const handleAddExercise = (exercise: ExerciseData) => workoutDispatch.update({ ...workout, exercises: [...workout.exercises, exercise] });\n  const handleDeleteExercise = (exercises: ExerciseData[]) => workoutDispatch.update({ ...workout, exercises });\n  const handleEditExercise = (exercise: ExerciseData, index: number) => { // TODO: type\n    // TODO: error case?\n    const exercises = [\n      ...workout.exercises.slice(0, index),\n      exercise,\n      ...workout.exercises.slice(index + 1),\n    ];\n    workoutDispatch.update({ ...workout, exercises });\n  }\n  const handleUpdateHeader = (update: EditResult) => { // TODO: type\n    // TODO: error case?\n    const { value } = update;\n    workoutDispatch.update({ ...workout, ...value });\n  }\n  \n  const { exercises, breakMs, workMs } = workout;\n\n  // TODO: edit exercises\n  // TODO: edit exercises order drag/drop\n  return (\n    <Box>\n      <HeaderEdit\n        workout={workout}\n        onClose={handleClose}\n        onUpdate={handleUpdateHeader}\n      />\n      <Duration\n        label='Break [sec]'\n        value={breakMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetBreakMs}\n      />\n      <Duration\n        label='Work [sec]'\n        value={workMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetWorkMs}\n      />\n      <ExerciseList\n        exercises={exercises}\n        onAdd={handleAddExercise}\n        onDelete={handleDeleteExercise}\n        onEdit={handleEditExercise}\n      />\n    </Box>\n  );\n}\n\nexport default WorkoutEdit;\n","import { ExerciseData } from \"../exercise/data\";\nimport { PlaylistData, PlaylistItemData } from \"../playlist/store\";\nimport { WorkoutData } from \"./store/state\";\n\nfunction toPlaylistItemData(workMs: number, breakMs: number, name: string): [PlaylistItemData, PlaylistItemData] {\n  const b = {\n    name: `next up: ${name}`,\n    durationMs: breakMs,\n    tags: {\n      isBreak: true,\n    },\n  };\n  const w = {\n    name,\n    durationMs: workMs,\n    tags: {\n      breakWork: `${breakMs/1000}/${workMs/1000}`,\n    }\n  };\n  return [b, w];\n}\n\nconst pickName = (exercise: ExerciseData): string => exercise.name;\nconst expand = (acc: PlaylistItemData[], [b, w]: [PlaylistItemData, PlaylistItemData]): PlaylistItemData[] => [...acc, b, w];\n\nexport default function toPlaylistData(workout: WorkoutData): PlaylistData {\n  const { short, title: name, description, exercises, workMs, breakMs } = workout;\n  const toPlaylistItemDataBound: (name: string) => [PlaylistItemData, PlaylistItemData] = toPlaylistItemData.bind(null, workMs, breakMs);\n  const items: PlaylistItemData[] = exercises\n    .map(pickName)\n    .map(toPlaylistItemDataBound)\n    .reduce(expand, [])\n  ;\n  return {\n    short,\n    name,\n    description,\n    items,\n  };\n}\n","import { Box } from '@material-ui/core';\nimport React, { PropsWithChildren } from 'react';\n\ninterface CardProps {\n  onClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\nconst Card = ({ children, onClick }: PropsWithChildren<CardProps>) => {\n  return (\n    <Box\n      data-testid='card'\n      borderRadius={1}\n      display='grid'\n      gridColumn={['span 6', 'span 4', 'span 3']}\n      gridTemplateRows='5fr 2fr'\n      boxShadow={8}\n      onClick={onClick}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default Card;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport React from 'react';\n\nexport interface CardTextActionProps extends BoxProps { }\n\nconst CardTextAction: React.FC<CardTextActionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-action'\n      position='absolute'\n      right={0}\n      top={0}\n      {...rootProps}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default CardTextAction;\n","import { IconButton, Menu, MenuItem, ListItemIcon, Box, useTheme } from '@material-ui/core';\nimport MoreVerticon from '@material-ui/icons/MoreVert';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React from 'react';\n\nexport type ContextMenuOption =\n  | 'edit'\n  | 'delete'\n  ;\n\nexport interface ContextMenuProps {\n  onClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst ContextMenu: React.FC<ContextMenuProps> = ({ onClick }) => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const theme = useTheme();\n  const handleOpen = (event: React.MouseEvent<HTMLButtonElement>) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n  const handleMenuClick = (menuOption: ContextMenuOption, event: React.MouseEvent<HTMLLIElement, MouseEvent>): void => {\n    handleClose();\n    onClick && onClick(menuOption);\n  };\n\n  return (\n    <Box\n      position='relative'\n      right={-1 * theme.spacing(1)}\n    >\n      <IconButton\n        color='secondary'\n        onClick={handleOpen}\n      >\n        <MoreVerticon />\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem\n          onClick={handleMenuClick.bind(globalThis, 'edit')}\n        >\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          Edit\n        </MenuItem>\n        <MenuItem\n          onClick={handleMenuClick.bind(globalThis, 'delete')}\n        >\n          <ListItemIcon>\n            <DeleteOutlineIcon />\n          </ListItemIcon>\n          Delete\n        </MenuItem>\n      </Menu>\n    </Box>\n  );\n}\n\nexport default ContextMenu;","import React from 'react';\nimport Avatar from '../../shared/Avatar';\nimport Card from '../../shared/card/Card';\nimport CardDescription from '../../shared/card/CardDescription';\nimport CardText from '../../shared/card/CardText';\nimport CardTextAction from '../../shared/card/CardTextAction';\nimport CardTitle from '../../shared/card/CardTitle';\nimport { WorkoutData } from '../store/state';\nimport ContextMenu, { ContextMenuOption } from './ContextMenu';\n\nexport interface WorkoutProps {\n  workout: WorkoutData;\n  onCardClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onContextMenuClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst Workout: React.FC<WorkoutProps> = (props) => {\n  const { workout, onCardClick, onContextMenuClick } = props;\n  const { description, short, title } = workout;\n  return (\n    <Card\n      onClick={onCardClick}\n    >\n      <Avatar\n        text={short}\n      />\n      <CardText\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        action={\n          <CardTextAction>\n            <ContextMenu\n              onClick={onContextMenuClick}\n            />\n          </CardTextAction>\n        }\n      >\n      </CardText>\n    </Card>\n  );\n}\n\nexport default Workout;","import { Box } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport usePlayerPageStore from '../../player/usePlayerPageStore';\nimport { useWorkoutStore } from '../store';\nimport { WorkoutData } from '../store/state';\nimport toPlaylistData from '../toPlaylistData';\nimport Workout from './Workout';\nimport { ContextMenuOption } from './ContextMenu';\n\n\nexport default function WorkoutList() {\n  const theme = useTheme();\n  const history = useHistory();\n  const [, playerPageDispatch] = usePlayerPageStore();\n  const [workoutState, workoutDispatch] = useWorkoutStore();\n  const { items: workouts } = workoutState;\n  \n  const handleCardClick = (workout: WorkoutData, index: number) => {\n    workoutDispatch.select(index);\n    const playlist = toPlaylistData(workout);\n    playerPageDispatch.set(playlist);\n    history.push(`/player`); // TODO: magic strings\n  }\n\n  const handleContextMenuClick = (workout: WorkoutData, index: number, menuOption: ContextMenuOption) => {\n    switch (menuOption) {\n      case 'delete':\n        console.log('// TODO: confirm dialog, then delete', workout);\n        break;\n      case 'edit':\n        workoutDispatch.select(index);\n        const { title } = workout;\n        history.push(`/workouts/${title}`); // TODO: bad idea: encoding missing, uniqueness questionable, ...\n        break;\n      default:\n        throw Error(`unknowkn menu option ${menuOption}`);\n    }\n  }\n\n  return (\n    <Box\n      display='grid'\n      gridTemplateColumns='repeat(12, 1fr)'\n      gridGap={theme.spacing(1)}\n      m={1}\n    >\n      {workouts.map((workout: WorkoutData, index: number) => (\n        <Workout\n          key={workout.title}\n          workout={workout}\n          onCardClick={() => handleCardClick(workout, index)}\n          onContextMenuClick={handleContextMenuClick.bind(globalThis, workout, index)}\n        />\n      ))}\n    </Box>\n  );\n}\n","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\n\n\nconst UnderConstruction: FunctionComponent = () => {\n  const theme = useTheme();\n  return (\n    <Box\n      textAlign=\"center\"\n      fontSize=\"2rem\"\n      color={theme.palette.secondary.contrastText}>under construction\n    </Box>\n  )\n};\n\nexport default UnderConstruction;","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport ExerciseList from './exercise/ExerciseList';\nimport Main from './Main';\nimport BottomNavigation from './navigation/BottomNavigation';\nimport TopNavigation from './navigation/TopNavigation';\nimport Player from './player/Player';\nimport WorkoutEdit from './workout/edit/WorkoutEdit';\nimport WorkoutList from './workout/list/WorkoutList';\nimport UnderConstruction from './shared/UnderConstruction';\n\nconst App = () => { \n  const theme = useTheme();\n\n  // TODO: rtfm -> router\n  return (\n    <Box\n      height={'100vh'}\n      bgcolor={theme.variables.root.backgroundColor}\n      style={{\n        touchAction: 'manipulation', // https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away\n      }}\n    >\n      <TopNavigation />\n      <Main>\n        <Route path=\"/workouts/:title\" component={WorkoutEdit} />\n        <Route exact path=\"/workouts\" component={WorkoutList} />\n        <Route exact path=\"/player\" component={Player} />\n        <Route path=\"/exercises\" component={ExerciseList} />\n        <Route path=\"/recents\" component={UnderConstruction} />\n        <Route path=\"/favorites\" component={UnderConstruction} />\n        <Route exact path =\"/\" component={WorkoutList} />\n      </Main>\n      <BottomNavigation />\n    </Box>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SimplePaletteColorOptions } from \"@material-ui/core/styles/createPalette\";\n\nexport const bluegrey400: SimplePaletteColorOptions = {\n  main: '#78909c',\n  light: '#a7c0cd',\n  dark: '#4b636e',\n  contrastText: '#ffffff',\n};\n\nexport const bluegrey800: SimplePaletteColorOptions = {\n  main: '#37474f',\n  light: '#62727b',\n  dark: '#102027',\n  contrastText: '#ffffff',\n};\n\nexport const grey900: SimplePaletteColorOptions = {\n  main: '#212121',\n  light: '#484848',\n  dark: '#000000',\n  contrastText: '#ffffff',\n};\n\nexport const grey800: SimplePaletteColorOptions = {\n  main: '#424242',\n  light: '#6d6d6d',\n  dark: '#1b1b1b',\n  contrastText: '#ffffff',\n};\n\nexport const grey400: SimplePaletteColorOptions = {\n  main: '#bdbdbd',\n  light: '#efefef',\n  dark: '#8d8d8d',\n  contrastText: '#000000',\n};","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { PaletteOptions } from \"@material-ui/core/styles/createPalette\";\nimport { bluegrey400, bluegrey800, grey400, grey800, grey900 } from \"./colors\";\n\nconst bluegrey400_bluegrey800: PaletteOptions = {\n  primary: bluegrey400,\n  secondary: bluegrey800,\n};\n\nconst bluegrey800_bluegrey400: PaletteOptions = {\n  primary: bluegrey800,\n  secondary: bluegrey400,\n};\n\nconst grey800_grey800: PaletteOptions = {\n  primary: grey800,\n  secondary: grey800,\n};\n\nconst grey800_grey400: PaletteOptions = {\n  primary: grey800,\n  secondary: grey400,\n};\n\nconst grey900_grey400: PaletteOptions = {\n  primary: grey900,\n  secondary: grey400,\n};\n\nconst palette: PaletteOptions = bluegrey800_bluegrey400;\n\nexport default palette;","import { createMuiTheme, responsiveFontSizes, SimplePaletteColorOptions } from \"@material-ui/core\";\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport { ComponentProps } from \"react\";\nimport palette from \"./palette\";\nimport { Overrides } from \"@material-ui/core/styles/overrides\";\n\n// https://material-ui.com/guides/typescript/#augmenting-your-props-using-withstyles\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number, // React.CSSProperties['height'] -> string | number | undefined\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n\n  // allow configuration using `createMuiTheme`\n  interface ThemeOptions {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number,\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n}\n\nconst primary = palette.primary as SimplePaletteColorOptions;\nconst secondary = palette.secondary as SimplePaletteColorOptions;\nconst SPACING = 8; // TODO: reuse from default mui theme?\nconst TOOLBAR_HEIGHT = SPACING * 6; // MuiToolbar variant dense\n\nconst variables = {\n  avatar: {\n    height: SPACING * 14,\n  },\n  countdown: {\n    height: SPACING * 16,\n  },\n  navbar: {\n    height: TOOLBAR_HEIGHT,\n  },\n  player: {\n    height: SPACING * 27,\n  },\n  playlist: {\n    currentItem: {\n      height: SPACING * 15,\n    },\n    item: {\n      height: SPACING * 7.5,\n    },\n  },\n  root: {\n    backgroundColor: '#102027e6', // theme.palette.primary.dark w/ alpha .9\n  }\n};\n\nconst props: ComponentProps<any> | undefined = {\n  MuiTypography: {\n    variantMapping: {\n      h1: 'h3',\n      h2: 'h3',\n      h3: 'h3',\n    },\n  },\n  MuiToolbar: {\n    variant: 'dense', // TOOLBAR_HEIGHT\n  }\n};\n\nconst typography = {\n  caption: {\n    lineHeight: 1.2,\n  }\n};\n\nconst overrides: Overrides = {\n  MuiBottomNavigation: {\n    root: {\n      backgroundColor: primary.main,\n      height: TOOLBAR_HEIGHT,\n    },\n  },\n  MuiBottomNavigationAction: {\n    wrapper: {\n      color: secondary.light,\n    }\n  },\n  MuiButton: {\n    label: {\n      color: secondary.light,\n    }\n  },\n  MuiListItemIcon: {\n    root: {\n      color: secondary.light,\n      minWidth: '32px',\n    }\n  },\n  MuiMenu: {\n    paper: {\n      backgroundColor: primary.dark,\n      color: secondary.light,\n    }\n  },\n  MuiFab: {\n    root: {\n      '&$disabled': {\n        backgroundColor: primary.main,\n        color: primary.dark,\n      }\n    }\n  },\n  MuiInputBase: {\n    root: {\n      color: 'inherit',\n      fontSize: 'inherit',\n    }\n  }\n};\n\n\nlet theme: Theme = createMuiTheme({\n  palette,\n  props,\n  overrides,\n  typography,\n  variables,\n});\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport { CountdownStoreProvider } from './countdown/store';\nimport { PlayerStoreProvider } from './player/store';\nimport { PlaylistStoreProvider } from './playlist/store';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme/theme';\nimport { WorkoutStoreProvider } from './workout/store';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <BrowserRouter>\n        <CountdownStoreProvider>\n          <PlaylistStoreProvider>\n            <PlayerStoreProvider>\n              <WorkoutStoreProvider>\n                <App />\n              </WorkoutStoreProvider>\n            </PlayerStoreProvider>\n          </PlaylistStoreProvider>\n        </CountdownStoreProvider>\n      </BrowserRouter>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}