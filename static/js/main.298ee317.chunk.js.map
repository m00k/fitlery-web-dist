{"version":3,"sources":["playlist/store/reducer.ts","player/store/reducer.ts","player/store/state.ts","workout/store/reducer.ts","playlist/store/index.ts","shared/EditText.tsx","shared/EditToggle.tsx","exercise/data.ts","exercise/Exercise.tsx","exercise/ExerciseList.tsx","Main.tsx","navigation/navigation-actions.tsx","navigation/BottomNavigation.tsx","navigation/TopNavigation.tsx","countdown/store/state.ts","countdown/store/reducer.ts","countdown/store/selectors.ts","player/usePlayerPageDispatcher.ts","playlist/PlaylistItem.tsx","playlist/Playlist.tsx","playlist/PlaylistItemCurrent.tsx","player/Controls.tsx","player/CountdownIsZeroEffect.tsx","countdown/time-utils.tsx","countdown/Countdown.tsx","countdown/Arc.tsx","countdown/useColors.ts","countdown/PieCountdown.tsx","countdown/withMargin.tsx","countdown/PieSlice.tsx","countdown/CountdownTickEffect.tsx","player/CountdownHeader.tsx","player/HeaderAction.tsx","shared/Avatar.tsx","shared/card/CardDescription.tsx","shared/card/CardText.tsx","shared/card/CardTitle.tsx","player/WorkoutHeader.tsx","player/Header.tsx","player/useLayout.ts","player/Player.tsx","shared/UnderConstruction.tsx","shared/NumberInput.tsx","workout/edit/Duration.tsx","workout/edit/AvatarEdit.tsx","workout/edit/CardDescriptionEdit.tsx","workout/edit/CardTitleEdit.tsx","workout/edit/HeaderAction.tsx","workout/edit/HeaderEdit.tsx","workout/edit/useWorkout.ts","workout/edit/WorkoutEdit.tsx","workout/toPlaylistData.tsx","shared/card/Card.tsx","workout/list/AddWorkout.tsx","shared/card/CardTextAction.tsx","workout/list/DeleteMenuItem.tsx","workout/list/ContextMenu.tsx","workout/list/Workout.tsx","workout/list/WorkoutList.tsx","App.tsx","serviceWorker.ts","theme/colors.ts","theme/palette.ts","theme/theme.ts","index.tsx","workout/store/index.ts","player/store/index.ts","util/uid.ts","workout/store/state.ts","playlist/store/state.ts","util/id.ts","workout/store/workout-state-persist.tsx","util/state-persist.tsx"],"names":["NOT_FOUND","playlistReducer","set","_","playlist","initialState","setCurrentItem","state","index","currentItemIndex","prev","isFirstIndex","next","items","length","isLastIndex","playerReducer","play","playState","pause","stop","playerAtom","atom","key","default","workoutReducer","add","workout","delete","slice","loadSuccess","workouts","select","update","useStyles","makeStyles","theme","root","alignItems","backgroundColor","palette","background","paper","boxShadow","shadows","borderRadius","color","primary","main","display","gridTemplateColumns","marginBottom","spacing","action","EditText","inputEl","onOk","onCancel","rootProps","useTheme","classes","defaultValue","props","useState","value","setValue","error","setError","handleCancel","inputRef","React","useRef","useEffect","current","focus","ClickAwayListener","onClickAway","Box","className","type","onChange","ev","target","validity","valid","IconButton","size","onClick","disabled","EditToggle","displayEl","isEdit","setIsEdit","edit","data","exercises","name","id","height","variables","item","inner","paddingLeft","paddingRight","drag","contrastText","padding","width","cursor","Exercise","exercise","onDelete","Typography","variant","textfield","fab","float","marginTop","ExerciseList","sampleData","onAdd","onEdit","isAdd","setIsAdd","handleDelete","map","i","fontSize","typography","h4","TextField","inputProps","required","bind","globalThis","uid","Fab","Main","children","navHeight","overrides","MuiBottomNavigation","data-testid","bottom","left","justifyItems","justifyContent","overflow","position","right","top","maxWidth","breakpoints","values","lg","navigationActions","label","process","icon","FtBottomNavigation","history","useHistory","location","pathname","BottomNavigation","event","newValue","push","BottomNavigationAction","toolbar","secondary","light","TopNavigation","AppBar","Toolbar","Button","startIcon","msLeft","msTotal","isRunning","countdownAtom","reset","countdownReducer","start","tick","Math","max","durationMs","selector","get","usePlayerPageDispatcher","useRecoilState","playlistAtom","playlistState","setPlaylistState","setPlayerState","useSetRecoilState","setCountdown","currentItem","nextItem","prevItem","nextItemIndex","isBreakItem","tags","isBreak","borderColor","borderLeft","pr","textOverflow","whiteSpace","PlaylistItem","isCurrent","component","fontWeight","toUpperCase","Chip","breakWork","highlightItem","highlight","Playlist","useRecoilValue","dispatch","currentItemIndexOrZero","filter","prepareItems","PlaylistItemCurrent","bgcolor","pl","useRootStyles","style","textAlign","textTransform","text","useInnerStyles","withIconButton","Play","Pause","Prev","Next","Controls","minHeight","useProps","CountdownIsZeroEffect","isZero","fromNumber","timeMs","h","floor","m","s","ms","format","time","toString","padStart","ds","timeUtils","toTimeString","Countdown","dark","fontWeightBold","calcPoint","r","cx","cy","percent","sin","PI","cos","Arc","from","fStart","to","fEnd","fill","useMemo","calcPointR","startX","startY","endX","endY","largeArcFlag","round","useArc","d","useColors","invertColors","WrappedComponent","PieSliceWithMargin","setClipPath","clipIf","fractionStart","fractionEnd","random","viewBox","clipPath","x","y","dominantBaseline","textAnchor","fontFamily","VIEWBOX_SIZE","PieCountdown","countdownState","fractionDone","done","CountdownTickEffect","setCountdownState","setInterval","clearInterval","CountdownHeader","gridArea","HeaderAction","onClose","Avatar","p","CardDescription","minWidth","CardText","description","title","stopPropagation","alignContent","gridTemplateAreas","useRootProps","CardTitle","WorkoutHeader","short","Header","HeaderImpl","useMediaQueries","up","mq","upxs","upsm","upmd","useRowHeights","textHeight","controlsHeight","currentHeight","totalHeight","listHeight","navbar","gridTemplateRows","useLayout","matches","useMediaQuery","mqi","useActiveMediaQuery","Player","styles","ref","playerState","prevCurrentItemIndex","scrollBy","behavior","UnderConstruction","button","h5","marginLeft","duration","shape","flex","NumberInput","min","Number","MAX_VALUE","step","initial","Duration","avatar","AvatarEdit","onUpdate","minLength","maxLength","CardDescriptionEdit","multiline","rows","CardTitleEdit","HeaderEdit","handleUpdate","updatedValue","result","mb","useWorkout","notFound","workoutAtom","workoutState","setWorkoutState","useParams","findIndex","w","WorkoutEdit","breakMs","workMs","breakSec","workSec","toPlaylistItemData","expand","acc","b","toPlaylistData","toPlaylistItemDataBound","reduce","Card","gridColumn","iconContainer","borderStyle","borderWidth","AddWorkout","Date","toLocaleDateString","newWorkout","CardTextAction","DeleteMenuItem","canDelete","setCanDelete","MenuItem","ListItemIcon","Switch","ContextMenu","anchorEl","setAnchorEl","handleClose","handleMenuClick","menuOption","currentTarget","Menu","open","Boolean","Workout","onCardClick","onContextMenuClick","WorkoutList","handleContextMenuClick","Error","gridGap","handleCardClick","App","touchAction","path","exact","window","hostname","match","bluegrey400","bluegrey800","SPACING","countdown","player","MuiCssBaseline","outline","MuiBottomNavigationAction","wrapper","MuiListItemIcon","MuiMenu","MuiFab","MuiInputBase","createMuiTheme","MuiTypography","variantMapping","h1","h2","h3","MuiToolbar","caption","lineHeight","responsiveFontSizes","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message","gen4","loadState","WORKOUT_STATE_KEY","lastId","WorkoutStatePersist","persistState","stateJson","localStorage","getItem","JSON","parse","err","warn","setItem","stringify"],"mappings":"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","file":"static/js/main.298ee317.chunk.js","sourcesContent":["import { initialState, PlaylistState } from \"./state\";\nimport { PlaylistActionType } from \"./actions\";\n\nexport const NOT_FOUND = -1;\n\nexport type PlaylistReducerFn = (state: PlaylistState, payload?: any) => PlaylistState;\nexport type PlaylistReducer = { [A in PlaylistActionType]: PlaylistReducerFn };\n\nconst isFirstIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex === 0;\n}\n\nconst isLastIndex = (state: PlaylistState): boolean => {\n  return state.currentItemIndex >= (state.items.length - 1);\n}\n\nconst set: PlaylistReducerFn = (_, playlist) => {\n  return {\n    ...initialState,\n    ...playlist,\n  }\n}\n\nconst setCurrentItem: PlaylistReducerFn = (state, index) => {\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst prev: PlaylistReducerFn = (state: PlaylistState): PlaylistState => {\n  const currentItemIndex = isFirstIndex(state)\n    ? 0\n    : state.currentItemIndex - 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nconst next: PlaylistReducerFn = (state: PlaylistState): PlaylistState => {\n  if (isLastIndex(state)) {\n    return state;\n  }\n  const currentItemIndex = state.currentItemIndex + 1;\n  return {\n    ...state,\n    currentItemIndex\n  };\n}\n\nexport const playlistReducer: PlaylistReducer = {\n  set,\n  setCurrentItem,\n  prev,\n  next,\n}\n","import { PlayerState } from \"./state\";\nimport { PlayerActionType } from \"./actions\";\n\nexport type PlayerReducerFn = (state: PlayerState, payload?: any) => PlayerState;\n\nconst play: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'playing',\n  }\n}\n\nconst pause: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'paused',\n  }\n}\n\nconst stop: PlayerReducerFn = state => {\n  return {\n    ...state,\n    playState: 'stopped',\n  }\n}\n\nconst prev: PlayerReducerFn = state => state;\n\nconst next: PlayerReducerFn = state => state;\n\nexport const playerReducer: {[A in PlayerActionType]: PlayerReducerFn} = {\n  play,\n  pause,\n  stop,\n  prev,\n  next,\n}\n","import { atom } from \"recoil\";\n\n\nexport type PlayState = 'playing' | 'paused' | 'stopped';\n\nexport interface PlayerState {\n  playState: PlayState;\n}\n\nexport const initialState: PlayerState = {\n  playState: 'stopped',\n}\n\nexport const playerAtom = atom({\n  key: 'playerState',\n  default: initialState,\n});","import { WorkoutActionType } from './actions';\nimport { WorkoutState } from './state';\n\n\nexport const NOT_FOUND = -1;\n\nexport type WorkoutReducerFn = (state: WorkoutState, payload?: any) => WorkoutState\nexport type WorkoutReducer = {[A in WorkoutActionType]: WorkoutReducerFn};\n\nconst add: WorkoutReducerFn = (state, workout) => {\n  return {\n    ...state,\n    items: [ workout, ...state.items ],\n  }\n}\n\nconst deleteItem = (state: WorkoutState): WorkoutState => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nconst loadSuccess: WorkoutReducerFn = (state, workouts) => {\n  return {\n    ...state,\n    items: workouts,\n  }\n}\n\nconst select: WorkoutReducerFn = (state, index) => {\n  return {\n    ...state,\n    currentItemIndex: index,\n  }\n}\n\nconst update: WorkoutReducerFn = (state, workout) => {\n  if ( state.currentItemIndex === NOT_FOUND ) {\n    return state;\n  }\n  return {\n    ...state,\n    items: [\n      ...state.items.slice(0, state.currentItemIndex),\n      workout,\n      ...state.items.slice(state.currentItemIndex + 1)\n    ],\n  }\n}\n\nexport const workoutReducer: WorkoutReducer =  {\n  add,\n  delete: deleteItem,\n  loadSuccess,\n  select,\n  update,\n}\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","import { BoxProps, ClickAwayListener, IconButton, makeStyles, TextFieldProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DoneIcon from '@material-ui/icons/Done';\nimport React, { useEffect, useState } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[12],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'auto min-content min-content',\n    marginBottom: theme.spacing(.3),\n  },\n  action: {\n  }\n}));\n\nexport interface EditResult {\n  value?: any;\n  error: boolean;\n}\n\nexport interface EditTextProps extends BoxProps {\n  inputEl: React.ReactElement<TextFieldProps>; // TODO: generalize\n  onOk?: (data: EditResult) => void;\n  onCancel?: () => void;\n}\n\nconst EditText: React.FC<EditTextProps> = ({ inputEl, onOk, onCancel, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const defaultValue = inputEl.props.defaultValue;\n  const [value, setValue] = useState(defaultValue);\n  const [error, setError] = useState(false);\n  const handleOk = () => onOk && onOk({error, value});\n  const handleCancel = () => onCancel && onCancel();\n  const handleChange = (ev: any) => { // TODO: type\n    setValue(ev.target.value);\n    setError(!ev.target.validity.valid)\n  } \n  const inputRef = React.useRef<HTMLInputElement>(null);\n  useEffect(() => { inputRef.current && inputRef.current.focus(); }); // TODO: revisit\n\n  return (\n    <ClickAwayListener\n      onClickAway={handleCancel}\n    >\n      <Box\n        className={classes.root}\n        {...rootProps}\n      >\n        <inputEl.type\n          error={error}\n          inputRef={inputRef}\n          defaultValue={defaultValue}\n          onChange={handleChange}\n          {...inputEl.props}\n        >\n          {value}\n        </inputEl.type>\n        <IconButton\n          className={classes.action}\n          size='small'\n          onClick={handleCancel}\n        >\n          <CloseIcon\n            color='inherit'\n          />\n        </IconButton>\n        <IconButton\n          className={classes.action}\n          disabled={error}\n          size='small'\n          onClick={handleOk}\n        >\n          <DoneIcon\n            color='inherit'\n          />\n        </IconButton>\n      </Box>\n    </ClickAwayListener>\n  );\n}\n\nexport default EditText;","import Box from '@material-ui/core/Box';\nimport React, { PropsWithChildren, useState } from 'react';\nimport EditText, { EditResult, EditTextProps } from './EditText';\n\n\nexport interface EditToggleProps extends EditTextProps {\n  displayEl: React.ReactElement<PropsWithChildren<any>>;\n}\n\nconst EditToggle: React.FC<EditToggleProps> = ({ inputEl, displayEl, onOk, onCancel, ...rootProps }) => {\n  const handleOk = (data: EditResult) => {\n    onOk && onOk(data); \n    setIsEdit(false);\n  };\n  const handleCancel = () => {\n    onCancel && onCancel();\n    setIsEdit(false);\n  }\n\n  const [isEdit, setIsEdit] = useState(false);\n  const edit =\n    <EditText\n      inputEl={inputEl}\n      onCancel={handleCancel}\n      onOk={handleOk}\n    />;\n\n  return (\n    <Box\n      onClick={() => !isEdit && setIsEdit(true)} // TODO: consider edit button\n      {...rootProps}\n    >\n      {isEdit\n        ? edit\n        : displayEl\n      }\n    </Box>\n  );\n}\n\nexport default EditToggle;","export interface ExerciseData {\n  id: string;\n  name: string;\n  // TODO: category, tags\n}\n\n// TODO: real data\nexport const exercises: ExerciseData[] = [\n  {\n    name: \"Wall Sit\",\n    id: \"35c8-3c89-bc6a-f12e\"\n  },\n  {\n    name: \"Lunge\",\n    id: \"b8a7-3c8e-23f3-1268\"\n  },\n  {\n    name: \"Plank\",\n    id: \"fb38-496c-92c8-0ebd\"\n  },\n  {\n    name: \"Plank +\",\n    id: \"9e8f-0788-9ed6-6fd8\"\n  },\n  {\n    name: \"Reverse Crunch\",\n    id: \"1eca-03e8-655b-7008\"\n  },\n  {\n    name: \"Shadow Boxing\",\n    id: \"f05b-6748-3df8-8636\"\n  },\n  {\n    name: \"Side Plank\",\n    id: \"627e-a8a9-7398-bce8\"\n  },\n  {\n    name: \"Side Plank (Left)\",\n    id: \"b738-a1a3-456c-f181\"\n  },\n  {\n    name: \"Side Plank (Right)\",\n    id: \"7358-c9e8-2b7e-5818\"\n  },\n  {\n    name: \"Knee Strikes\",\n    id: \"4469-16cf-d4d8-009c\"\n  },\n  {\n    name: \"Lunge (Fwd)\",\n    id: \"2338-3a1d-a2d2-5e15\"\n  },\n  {\n    name: \"Lunge (Bwd)\",\n    id: \"cd18-67fc-7652-3596\"\n  },\n  {\n    name: \"Knee High Running\",\n    id: \"9762-f7b8-07e8-704b\"\n  },\n  {\n    name: \"Jumping Jacks\",\n    id: \"ce62-0688-0a38-3d8f\"\n  },\n  {\n    name: \"Push ups\",\n    id: \"dd5d-90a8-5b88-5798\"\n  },\n  {\n    name: \"Squats\",\n    id: \"8e78-4428-7008-f828\"\n  }\n];\n","import { IconButton, makeStyles, Typography } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport React from 'react';\nimport { ExerciseData } from './data';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[2],\n    borderRadius: 1,\n    color: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: `${theme.spacing(4)}px auto min-content`,\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  inner: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n  },\n  drag: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.primary.contrastText,\n    height: '100%',\n    padding: theme.spacing(1),\n    width: '100%',\n    '&:hover': {\n      cursor: 'grab',\n    }\n  },\n  action: {\n  }\n}));\n\nexport interface ExerciseProps {\n  exercise: ExerciseData;\n  onDelete: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function Exercise(props: ExerciseProps) {\n  const { exercise, onDelete } = props;\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <Box\n      className={classes.root}\n    >\n      <DragHandleIcon\n        className={classes.drag}\n      />\n      <Typography\n        variant='h4'\n        className={classes.inner}\n      >\n        {exercise.name}\n      </Typography>\n      <IconButton\n        className={classes.action}\n        onClick={onDelete}\n      >\n        <DeleteOutlineIcon\n          color='primary'\n        />\n      </IconButton>\n    </Box>\n  );\n}","import { Box, Fab, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport React, { useState } from 'react';\nimport EditText, { EditResult } from '../shared/EditText';\nimport EditToggle from '../shared/EditToggle';\nimport uid from '../util/uid';\nimport { ExerciseData, exercises as sampleData } from './data';\nimport Exercise from './Exercise';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    alignItems: 'center',\n    display: 'grid',\n    height: theme.variables.playlist.item.height,\n    paddingLeft: theme.spacing(5),\n    paddingRight: theme.spacing(1),\n  },\n  fab: {\n    float: 'right',\n    marginBottom: theme.spacing(.5),\n    marginTop: theme.spacing(.5),\n  },\n}));\n\nexport interface ExerciseListProps {\n  exercises: ExerciseData[];\n  onDelete?: (exercises: ExerciseData[]) => void;\n  onAdd?: (exercise: ExerciseData) => void;\n  onEdit?: (exercise: ExerciseData, index: number) => void;\n}\n\nconst ExerciseList: React.FC<ExerciseListProps> = (props) => {\n  const { exercises = sampleData, onAdd, onDelete, onEdit } = props; // TODO: remove sampleData\n  const [ isAdd, setIsAdd ] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const handleDelete = (index: number) => onDelete && onDelete([...exercises.slice(0, index), ...exercises.slice(index + 1)]);\n  const handleEdit = (index: number) => (update: EditResult) => onEdit && onEdit({ ...exercises[index], name: update.value }, index); // TODO: handle error\n  const handleAdd = ({value: name, error }: EditResult) => { // TODO: type\n    setIsAdd(false);\n    onAdd && onAdd({ id: uid(), name });\n  };\n\n  return (\n    <Box>\n      {exercises.map((exercise: ExerciseData, i: number) =>\n        <EditToggle\n          fontSize={theme.typography.h4.fontSize}\n          key={exercise.id}\n          onOk={handleEdit(i)}\n          inputEl={\n            <TextField\n              defaultValue={exercise.name}\n              inputProps={{required: true}}\n              className={classes.textfield}\n            />\n          }\n          displayEl={\n            <Exercise\n              exercise={exercise}\n              onDelete={handleDelete.bind(globalThis, i)}\n            />\n          }\n        />\n      )}\n      {isAdd && <EditText\n        fontSize={theme.typography.h4.fontSize}\n        onOk={handleAdd}\n        onCancel={() => setIsAdd(false)}\n        inputEl={\n         <TextField\n          defaultValue='New Exercise'\n          inputProps={{required: true}}\n          className={classes.textfield}\n         />}\n      />}\n      <Fab\n        color='secondary'\n        disabled={isAdd}\n        onClick={() => setIsAdd(true)}\n        className={classes.fab}\n      >\n        <AddIcon />\n      </Fab>\n    </Box>\n  );\n}\n\nexport default ExerciseList;","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nconst Main = ({ children }: any) => {\n  const theme = useTheme();\n  const navHeight = (theme.overrides?.MuiBottomNavigation?.root as any).height;\n\n  return (\n    <Box\n      data-testid='main'\n      bottom={navHeight}\n      display='grid'\n      left={0}\n      justifyItems='center'\n      justifyContent='stretch'\n      overflow='auto'\n      position='fixed'\n      right={0}\n      top={navHeight}\n    >\n      <Box\n        maxWidth={theme.breakpoints.values.lg}\n        position='relative'\n        width={1}\n      >\n        {children}\n      </Box>\n    </Box>\n  );\n}\n\nexport default Main;\n","import FavoriteIcon from '@material-ui/icons/Favorite';\nimport FitnessCenterIcon from '@material-ui/icons/FitnessCenter';\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport React from 'react';\n\nexport const navigationActions = [\n  { \n    label: 'Workouts',\n    value: `${process.env.PUBLIC_URL}/workouts`,\n    icon: <FitnessCenterIcon />,\n  },\n  { \n    label: 'Recents',\n    value: `${process.env.PUBLIC_URL}/recents`,\n    icon: <RestoreIcon />,\n  },\n  { \n    label: 'Favorites',\n    value: `${process.env.PUBLIC_URL}/favorites`,\n    icon: <FavoriteIcon />,\n  },\n  // TODO: use or lose\n  // { \n  //   label: 'Exercises',\n  //   value: '/exercises',\n  //   icon: <ListIcon />,\n  // },\n];","import BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Box from '@material-ui/core/Box';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { navigationActions } from './navigation-actions';\n\nconst FtBottomNavigation = () => {\n  const history = useHistory();\n  const [value, setValue] = useState(history.location.pathname);\n  useEffect(() => setValue(history.location.pathname), [history.location.pathname]);\n\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n    history.push(newValue);\n  };\n\n  return (\n    <Box\n      position='fixed'\n      bottom={0}\n      left={0}\n      right={0}\n    >\n      <BottomNavigation\n        value={value}\n        onChange={handleChange}\n      >\n        {navigationActions.map(action =>\n          <BottomNavigationAction\n            key={action.value}\n            label={action.label}\n            value={action.value}\n            icon={action.icon}\n          />\n        )}\n      </BottomNavigation>\n    </Box>\n  );\n}\n\nexport default FtBottomNavigation;\n","import { makeStyles, useTheme } from '@material-ui/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Timer from '@material-ui/icons/Timer';\nimport React from 'react';\n\nconst useStyles = makeStyles(theme => ({\n  toolbar: {\n    color: theme.palette.secondary.light,\n  }\n}));\n\nfunction TopNavigation() {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <AppBar>\n      <Toolbar\n        className={classes.toolbar}\n      >\n        <Button\n          color='inherit'\n          variant='text'\n          startIcon={<Timer />}\n        >\n          <Typography\n            variant='subtitle1'\n          >\n            fitlery\n          </Typography>\n        </Button>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default TopNavigation;\n","import { atom } from \"recoil\";\n\n\nexport const MS_INTERVAL = 100; // TODO\nconst MS_TOTAL = 3000; // TODO\n\nexport interface CountdownState {\n  msLeft: number;\n  msTotal: number;\n  isRunning: boolean;\n}\n\nexport const initialState: CountdownState = {\n  msLeft: MS_TOTAL,\n  msTotal: MS_TOTAL,\n  isRunning: false,\n}\n  \nexport const countdownAtom = atom({\n  key: 'countdownState',\n  default: initialState,\n});\n","import { CountdownState, MS_INTERVAL } from \"./state\"\n\n\nconst start = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: true }\n}\n\nconst stop = (state: CountdownState): CountdownState => {\n  return { ...reset(state), isRunning: false }\n}\n\nconst pause = (state: CountdownState): CountdownState => {\n  return { ...state, isRunning: false }\n}\n\nconst tick = (state: CountdownState): CountdownState => {\n  const { msLeft, isRunning } = state;\n  const isZero = msLeft === 0;\n  return !isRunning || isZero\n    ? state\n    : { ...state, msLeft: Math.max(0, msLeft - MS_INTERVAL) };\n}\n\nconst set = (state: CountdownState, durationMs: number): CountdownState => {\n  return { ...state, msLeft: durationMs, msTotal: durationMs, };\n}\n\nconst reset = (state: CountdownState): CountdownState => {\n  return { ...state, msLeft: state.msTotal };\n}\n\nexport const countdownReducer = {\n  start,\n  stop,\n  pause,\n  tick,\n  set,\n  reset,\n};\n","// TODO: investigate\n// Cannot update a component (`Batcher`) while rendering a different component (`Countdown`)...\n\nimport { selector } from 'recoil';\nimport { countdownAtom } from './state';\n\nexport const isZeroCountdownState = selector<boolean>({\n  key: 'isZeroCountdownState',\n  get: ({get}) => {\n    const countdownState = get(countdownAtom);\n    return countdownState.msLeft === 0;\n  },\n});","import { useRecoilState, useSetRecoilState } from 'recoil';\nimport { countdownAtom, countdownReducer } from '../countdown/store';\nimport { NOT_FOUND, PlaylistActionType, playlistAtom, PlaylistData, playlistReducer } from '../playlist/store';\nimport { PlayerActionType, playerAtom, playerReducer } from './store';\n\n\nexport type PlayerPageDispatchers = { [A in PlayerActionType | PlaylistActionType]: (payload?: any) => void };\n\nconst usePlayerPageDispatcher = (): PlayerPageDispatchers => {\n  const [playlistState, setPlaylistState] = useRecoilState(playlistAtom);\n  const setPlayerState = useSetRecoilState(playerAtom);\n  const setCountdown = useSetRecoilState(countdownAtom);\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = items[Math.max(currentItemIndex, 0)];\n  const nextItem = items[currentItemIndex + 1];\n  const prevItem = items[currentItemIndex - 1];\n\n  const set = (playlist: PlaylistData) => {\n    stop();\n    setPlaylistState(state => playlistReducer.set(state, playlist));\n  };\n\n  const play = () => {\n    setPlayerState(playerReducer.play);\n    if (playlistState.currentItemIndex === NOT_FOUND) {\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, 0));\n      setCountdown(state => countdownReducer.set(state, currentItem.durationMs));\n    }\n    setCountdown(countdownReducer.start);\n  };\n\n  const stop = () => {\n    setPlayerState(playerReducer.stop);\n    setPlaylistState(state => playlistReducer.setCurrentItem(state, NOT_FOUND)); \n    setCountdown(countdownReducer.stop);\n  };\n\n  const pause = () => {\n    setPlayerState(playerReducer.pause);\n    setCountdown(countdownReducer.pause);\n  }\n\n  const prev = () => {\n    if (prevItem) {\n      setPlaylistState(playlistReducer.prev);\n      setCountdown(state => countdownReducer.set(state, prevItem.durationMs));\n    } else {\n      setCountdown(countdownReducer.reset);\n    }\n  }\n\n  const next = () => {\n    if (nextItem) {\n      const nextItemIndex = currentItemIndex + 1;\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, nextItemIndex)); \n      setCountdown(state => countdownReducer.set(state, playlistState.items[nextItemIndex].durationMs));\n    } else {\n      stop();\n    }\n  };\n\n  const setCurrentItem = (index: number) => {\n    // TODO: validate\n    if (currentItemIndex === index) {\n      next();\n    } else {\n      setPlaylistState(state => playlistReducer.setCurrentItem(state, index)); \n      setCountdown(state => countdownReducer.set(state, playlistState.items[index].durationMs));\n    }\n  };\n\n  const dispatch: PlayerPageDispatchers = {\n    set,\n    setCurrentItem,\n    play,\n    pause,\n    stop,\n    prev,\n    next,\n  };\n\n  return dispatch;\n}\n\nexport default usePlayerPageDispatcher;","import { Box, Chip, makeStyles } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { PlaylistItemData } from './store';\n\nexport function isBreakItem(item: PlaylistItemData) {\n  return item && !!item.tags && item.tags.isBreak;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    color: theme.palette.primary.main,\n    backgroundColor: theme.palette.background.paper,\n    borderColor: theme.palette.primary.main,\n    borderLeft: theme.spacing(3),\n    display: 'grid',\n    gridTemplateColumns: '1fr min-content',\n    height: theme.variables.playlist.item.height,\n    padding: theme.spacing(1),\n    pr: theme.spacing(3),\n    width: '100%',\n  },\n  inner: {\n    fontSize: '1.5rem',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n  }\n}));\n\nexport interface PlaylistItemProps{\n  item: PlaylistItemData\n  isCurrent: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void | undefined;\n}\n\nexport default function PlaylistItem(props: PlaylistItemProps) {\n  const { isCurrent, item, onClick } = props;\n  const theme = useTheme();\n  const { root, inner } = useStyles(theme);\n\n  return (\n    <Box\n      className={root}\n      onClick={onClick}\n    >\n      <Box\n        component=\"span\"\n        className={inner}\n        fontWeight={isCurrent ? 'bold' : 'initial'}\n      >\n        {item.name?.toUpperCase()}\n      </Box>\n      <Chip\n        variant={isCurrent ? 'default' : 'outlined'}\n        color='primary'\n        label={item.tags?.breakWork}\n      />\n    </Box>\n  );\n}","import { Box, BoxProps } from '@material-ui/core';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport usePlayerPageDispatcher from '../player/usePlayerPageDispatcher';\nimport PlaylistItem, { isBreakItem } from './PlaylistItem';\nimport { playlistAtom, PlaylistItemData, PlaylistState } from './store';\n\n\nconst highlightItem = (item: PlaylistItemData) => {\n  const tags = { ...item.tags, highlight: true };\n  return {...item, tags};\n}\n\nconst prepareItems = (playlistState: PlaylistState): PlaylistItemData[] => {\n  const { currentItemIndex, items } = playlistState;\n  const currentItemIndexOrZero = Math.max(currentItemIndex, 0);\n  const playlistItems = [\n      ...items.slice(0, currentItemIndexOrZero),\n      ...items.slice(currentItemIndexOrZero, currentItemIndexOrZero + 2).map(highlightItem), // highlight one break item and one work item, don't know which is which\n      ...items.slice(currentItemIndexOrZero + 2),\n     ]\n    .filter(item => !isBreakItem(item)); // filter out break items, naturally removing the unwanted, highlighted break item\n  return playlistItems;\n}\n\nexport interface PlaylistProps extends BoxProps {\n  \n}\n\nconst Playlist: React.FC<PlaylistProps> = (rootProps) => {\n  const playlistState = useRecoilValue(playlistAtom);\n  const dispatch = usePlayerPageDispatcher();\n  const items = prepareItems(playlistState);\n\n  return (\n    <Box\n      {...rootProps}\n    >\n      {items.map((item, i) =>\n        <PlaylistItem\n          key={item.id}\n          item={item as PlaylistItemData}\n          isCurrent={item.tags?.highlight}\n          onClick={() => dispatch.setCurrentItem(i*2)}\n        />\n      )}\n    </Box>\n  );\n}\n\nexport default Playlist;\n","import { Box, BoxProps, Typography } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { isBreakItem } from './PlaylistItem';\nimport { NOT_FOUND, playlistAtom } from './store';\n\n\nconst useInnerStyles = () => {\n  const playlistState = useRecoilValue(playlistAtom);\n  const { currentItemIndex, items } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const fontSize = isBreakItem(currentItem)\n    ? '2rem'\n    : '3rem';\n  const text = currentItemIndex === NOT_FOUND\n    ? 'get ready'\n    : currentItem.name;\n  const style: React.CSSProperties = {\n    textAlign: 'center',\n    textTransform: 'uppercase',\n    fontSize,\n  };\n  return {style, text};\n}\n\nconst useRootStyles = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  const bgcolor = theme.palette.primary.light; // main;\n  const color = theme.palette.background.paper;\n  const props: BoxProps = {\n    alignItems: 'center',\n    bgcolor: bgcolor,\n    color: color,\n    display: 'grid',\n    pl: 1,\n    pr: 1,\n    boxShadow: 4,\n    width: 1,\n    ...rootProps,\n  };\n  return props;\n}\n\nexport interface PlaylistItemCurrentProps extends BoxProps {\n\n}\n\nconst PlaylistItemCurrent: React.FC<PlaylistItemCurrentProps> = (rootProps) => { // TODO: typescript magic: pick boxProps \n  const root = useRootStyles(rootProps);\n  const {style, text} = useInnerStyles();\n\n  return (\n    <Box\n      {...root}\n    >\n      <Typography\n        style={style}\n        variant='h4'\n      >\n        {text}\n      </Typography>\n    </Box>\n  );\n}\n\nexport default PlaylistItemCurrent;\n","import { Box, BoxProps, IconButton } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport React from 'react';\nimport { PlayerActionType, PlayState } from './store/';\nimport usePlayerPageDispatcher from './usePlayerPageDispatcher';\n\ninterface ControlButtonProps {\n  onClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}\n\nconst withIconButton = (icon: JSX.Element) => {\n  return (props: ControlButtonProps) => {\n    const { onClick } = props;\n    return (\n      <IconButton\n        color=\"primary\"\n        onClick={onClick}\n      >\n        {icon}\n      </IconButton>\n    );\n  };\n};\n\nconst Play = withIconButton(<PlayArrowIcon style={{ fontSize: '4rem' }} />);\nconst Pause = withIconButton(<PauseIcon style={{ fontSize: '4rem' }} />);\nconst Prev = withIconButton(<SkipPreviousIcon style={{ fontSize: '2.5rem' }} />);\nconst Next = withIconButton(<SkipNextIcon style={{ fontSize: '2.5rem' }} />);\n\nconst useProps = (rootProps: BoxProps) => {\n  const theme = useTheme();\n  return {\n    alignItems: 'center',\n    display: 'grid',\n    justifyContent: 'center',\n    gridTemplateColumns: '1fr 2fr 1fr',\n    minHeight: 80,\n    bgcolor: theme.palette.background.paper,\n    ...rootProps,\n  };\n}\n\nexport interface ControlsProps extends BoxProps {\n  playState: PlayState;\n}\n\nconst Controls: React.FC<ControlsProps> = ({ playState, ...rootProps }) => {\n  const dispatch = usePlayerPageDispatcher();\n  const onClick = (type: PlayerActionType) => {\n    dispatch[type]();\n  }\n\n  return (\n    <Box\n      {...useProps(rootProps)}\n    >\n      <Prev onClick={() => onClick('prev')} />\n      {\n        playState !== 'playing'\n          ? <Play onClick={() => onClick('play')} />\n          : <Pause onClick={() => onClick('pause')} />\n      }\n      <Next onClick={() => onClick('next')} />\n    </Box>\n  );\n}\n\nexport default Controls;","import React, { useEffect } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport usePlayerPageDispatcher from '../player/usePlayerPageDispatcher';\nimport { countdownAtom } from '../countdown/store';\n\nconst CountdownIsZeroEffect: React.FC<{}> = () => {\n  const dispatch = usePlayerPageDispatcher();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft } = countdownState;\n  const isZero = msLeft === 0;// TODO: useRecoilValue(isZeroCountdownState);\n  useEffect(() => {\n    if (isZero) {\n      dispatch.next();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isZero]);\n  return <></>;\n};\n\nexport default CountdownIsZeroEffect;","import { Time } from \"./time\";\n\n\nconst fromNumber = (timeMs: number): Time => {\n  const h = Math.floor(timeMs / 1000 / 60 / 60);\n  const m = Math.floor((timeMs / 1000 / 60) % 60);\n  const s = Math.floor((timeMs / 1000) % 60);\n  const ms = timeMs % 1000;\n  return { h, m, s, ms };\n};\n\nconst format = (time: Time): string => {\n  const h = time.h.toString().padStart(2, '0');\n  const m = time.m.toString().padStart(2, '0');\n  const s = time.s.toString().padStart(2, '0');\n  const ds = Math.floor(time.ms / 100).toString();\n  return time.h > 0\n    ? `${h}:${m}:${s}.${ds}`\n    : `${m}:${s}.${ds}`;\n};\n\nconst toTimeString = (timeMs: number) => format(fromNumber(timeMs));\n\nconst timeUtils = {\n  fromNumber,\n  toTimeString,\n  format,\n};\n\nexport default timeUtils;","import { Box, BoxProps } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { countdownAtom } from './store';\nimport time from './time-utils';\n\n\nexport interface CountdownProps extends BoxProps {\n}\n\nconst Countdown: FunctionComponent<CountdownProps> = ({ ...rootProps }) => {\n  const theme = useTheme();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft } = countdownState;\n\n  return (\n    <Box\n      alignItems='center'\n      bgcolor={theme.palette.primary.dark}\n      color={theme.palette.secondary.contrastText}\n      display='grid'\n      fontWeight={theme.typography.fontWeightBold}\n      fontSize='3rem'\n      justifyContent='center'\n      {...rootProps}\n    >\n      {time.toTimeString(msLeft)}\n    </Box>\n  );\n};\n\nexport default Countdown;\n","import React, { useMemo } from 'react';\n\ninterface ArcProps extends React.SVGProps<SVGPathElement> {\n  fStart: number;\n  fEnd: number;\n  r?: number;\n  cx?: number;\n  cy?: number;\n}\n\ninterface D {\n  startX: number;\n  startY: number;\n  endX: number;\n  endY: number;\n  largeArcFlag: 0 | 1;\n}\n\nconst calcPoint = (r: number = 1, cx: number = 0, cy: number = 0, percent: number) => {\n  return [\n    cx + Math.sin(2 * Math.PI * percent) * r,\n    cy - Math.cos(2 * Math.PI * percent) * r,\n  ];\n};\n\nconst useArc: (...args: any) => D = (fStart: number, fEnd: number, r: number = 1, cx: number = 0, cy: number = 0) => {\n  return useMemo(() => {\n    const calcPointR = calcPoint.bind(null, r, cx, cy);\n    const [startX, startY] = calcPointR(fStart);\n    const [endX, endY] = calcPointR(fEnd);\n    const largeArcFlag = Math.round(fEnd - fStart) as 0 | 1;\n    return {\n      startX,\n      startY,\n      endX,\n      endY,\n      largeArcFlag,\n    };\n  }, [fStart, fEnd, r, cx, cy]);\n}\n\nconst Arc = (props: ArcProps) => {\n  const { fStart: from, fEnd: to, r = 1, cx = 0, cy = 0, fill = 'currentColor' } = props;\n  const { startX, startY, endX, endY, largeArcFlag } = useArc(from, to, r, cx, cy);\n  const d =\n    `M ${startX} ${startY} ` +\n    `A ${r} ${r} 0 ${largeArcFlag} 1 ${endX} ${endY} ` +\n    `L ${cx} ${cy}`\n  ;\n  return (\n    <path\n      fill={fill}\n      d={d}\n    />\n  );\n};\n\nexport default Arc;","import useTheme from '@material-ui/core/styles/useTheme';\n\nconst useColors = (invertColors: boolean) => {\n  const theme = useTheme();\n  const light = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  const dark = {\n    bgcolor: theme.palette.primary.light,\n    color: theme.palette.secondary.contrastText,\n  };\n  const [left, done] = invertColors\n    ? [dark, light]\n    : [light, dark];\n  return [left, done];\n}\n\nexport default useColors;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { isBreakItem } from \"../playlist/PlaylistItem\";\nimport { playlistAtom } from '../playlist/store';\nimport PieSlice from './PieSlice';\nimport { countdownAtom } from './store';\nimport useColors from './useColors';\nimport withMargin from './withMargin';\n\n\nexport interface PieCountdownProps extends BoxProps {\n}\n\nconst PieSliceWithMargin = withMargin(PieSlice);\n\nconst PieCountdown: FunctionComponent<PieCountdownProps> = ({ ...rootProps }) => {\n  const theme = useTheme();\n  const countdownState = useRecoilValue(countdownAtom);\n  const { msLeft, msTotal } = countdownState;\n  const fractionDone = 1 - msLeft / msTotal;\n  const playlistState = useRecoilValue(playlistAtom);\n  const { items, currentItemIndex } = playlistState;\n  const currentItem = currentItemIndex > -1 ? items[currentItemIndex] : items[0];\n  const isBreak = isBreakItem(currentItem);\n  const text = isBreak ? 'Ready' : 'Go!';\n  const [ left, done ] = useColors(!isBreak);\n\n  return (\n    <Box\n      bgcolor={theme.palette.primary.main}\n      position='relative'\n      display='grid'\n      alignItems='center'\n      justifyContent='center'\n      width='100%'\n      height='100%'\n      {...rootProps}\n    >\n      <PieSliceWithMargin\n        bgcolor={left.bgcolor}\n        color={left.color}\n        clipIf={fractionDone > 0}\n        fractionStart={fractionDone}\n        fractionEnd={1}\n        text={text}\n      />\n      <PieSliceWithMargin\n        bgcolor={done.bgcolor}\n        color={done.color}\n        clipIf={(fractionDone < 1)}\n        fractionStart={0}\n        fractionEnd={fractionDone}\n        text={text}\n      />\n    </Box >\n  );\n};\n\nexport default PieCountdown;\n","import { useTheme } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\n\nexport default function withMargin<P = {}>(\n  WrappedComponent: React.ComponentType<P>,\n): React.FunctionComponent<P> {\n  return (props: React.PropsWithChildren<P>) => {\n    const theme = useTheme();\n    return (\n      <Box\n        position=\"absolute\"\n        top={theme.spacing(1)}\n        left={theme.spacing(1)}\n        right={theme.spacing(1)}\n        bottom={theme.spacing(1)}\n      >\n        <WrappedComponent {...props} />\n      </Box>\n    );\n  };\n}\n","import React from 'react';\nimport Arc from './Arc';\n\n\nexport interface PieSliceProps {\n  text: string;\n  bgcolor: string;\n  color: string;\n  clipIf: boolean;\n  fractionStart: number;\n  fractionEnd: number;\n}\n\nconst PieSlice = (props: PieSliceProps) => {\n  const { text, bgcolor, color, clipIf: setClipPath, fractionStart, fractionEnd } = props;\n  const VIEWBOX_SIZE = 100;\n  const id = `clip${Math.floor(1000000 * Math.random())}`;\n  return (\n    <svg\n      width=\"100%\"\n      height=\"100%\"\n      viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n    >\n      <g\n        clipPath={setClipPath ? `url(#${id})` : ``}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={color}\n          fontSize={2 / 3 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </g>\n      <clipPath id={id}>\n        <Arc\n          cx={50}\n          cy={50}\n          r={VIEWBOX_SIZE / 2}\n          fStart={fractionStart}\n          fEnd={fractionEnd}\n        />\n      </clipPath>\n    </svg>\n  )\n}\n\nexport default PieSlice;","import React, { useEffect } from 'react';\nimport { useSetRecoilState } from 'recoil';\nimport { countdownAtom, countdownReducer, MS_INTERVAL } from './store';\n\nconst CountdownTickEffect: React.FC<{}> = () => {\n  const setCountdownState = useSetRecoilState(countdownAtom);\n\n  useEffect(() => { \n    const i = setInterval(() => {\n      setCountdownState(state => countdownReducer.tick(state));\n    }, MS_INTERVAL);\n    return () => clearInterval(i);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // first render only\n  return <></>;\n};\n\nexport default CountdownTickEffect;","import React from 'react';\nimport Countdown from '../countdown/Countdown';\nimport PieCountdown, { PieCountdownProps } from '../countdown/PieCountdown';\nimport CountdownTickEffect from '../countdown/CountdownTickEffect';\n\n\nexport interface CountdownHeaderProps extends PieCountdownProps {\n\n}\n\nconst CountdownHeader: React.FC<CountdownHeaderProps> = ({...rootProps}) => {\n  return (\n    <>\n      <CountdownTickEffect />\n      <PieCountdown\n        gridArea='avatar'\n      />\n      <Countdown\n        {...rootProps}\n        gridArea='text'\n      />\n    </>\n  );\n}\n\nexport default CountdownHeader;\n","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import Box, { BoxProps } from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nexport interface AvatarProps extends BoxProps {\n  text: string;\n}\n\nconst useProps = (props: BoxProps) => {\n  const theme = useTheme();\n  const root: BoxProps = {\n    bgcolor: theme.palette.primary.main,\n    display: 'grid',\n    p: 1,\n    ...props,\n  };\n  const inner: BoxProps = {\n    bgcolor: theme.palette.background.paper,\n    color: theme.palette.secondary.dark,\n  };\n  return { root, inner };\n}\n\nconst Avatar: React.FC<AvatarProps> = ({ text, ...props }) => {\n  const { root, inner } = useProps(props);\n  const VIEWBOX_SIZE = 100;\n\n  return (\n    <Box\n      data-testid='avatar'\n      {...root}\n    >\n      <svg\n        viewBox={`0 0 ${VIEWBOX_SIZE} ${VIEWBOX_SIZE}`}\n      >\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r=\"50%\"\n          fill={inner.bgcolor}\n        >\n        </circle>\n        <text\n          x=\"50%\"\n          y=\"50%\"\n          dominantBaseline=\"middle\"\n          fill={inner.color}\n          fontSize={4 / 5 * VIEWBOX_SIZE / 2}\n          fontWeight=\"700\"\n          textAnchor=\"middle\"\n          fontFamily=\"Roboto\"\n        >\n          {text}\n        </text>\n      </svg>\n    </Box>\n  );\n};\n\nexport default Avatar;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardDescriptionProps extends BoxProps { }\n\nconst CardDescription: React.FC<CardDescriptionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-description'\n      gridArea={'desc'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='caption'\n        component='p'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardDescription;","import { BoxProps } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\n\nconst useRootProps = (rootProps: BoxProps): BoxProps => {\n  const theme = useTheme();\n  return {\n    alignContent: 'center',\n    bgcolor: theme.palette.primary.dark,\n    color: theme.palette.secondary.contrastText,\n    display: 'grid',\n    gridTemplateAreas: `\n      \"title title title title .\"\n      \"desc desc desc desc desc\"\n    `,\n    gridTemplateColumns: 'repeat(5, 1fr)',\n    p: 2,\n    position: 'relative', // accomodate for absolute positioning of\n    ...rootProps,\n  };\n}\n\nexport interface CardTextProps extends BoxProps {\n  action?: any; // TODO: type\n  title: any;\n  description: any;\n}\n\nconst CardText: React.FC<CardTextProps> = ({ action, description, title, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-text'\n      onClick={(ev) => ev.stopPropagation()}\n      {...useRootProps(rootProps)}\n    >\n      {title}\n      {description}\n      {action}\n    </Box>\n  );\n};\n\nexport default CardText;","import Box, { BoxProps } from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nexport interface CardTitleProps extends BoxProps { }\n\nconst CardTitle: React.FC<CardTitleProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-title'\n      gridArea={'title'}\n      height='2em'\n      minWidth={0}\n      overflow='hidden'\n      textOverflow='ellipsis'\n      {...rootProps}\n    >\n      <Typography\n        variant='subtitle1'\n        style={{\n          overflow: 'inherit',\n          textOverflow: 'inherit',\n        }}\n      >\n        {children}\n      </Typography>\n    </Box>\n  );\n};\n\nexport default CardTitle;","import React from 'react';\nimport Avatar from '../shared/Avatar';\nimport CardDescription from '../shared/card/CardDescription';\nimport CardText from '../shared/card/CardText';\nimport CardTitle from '../shared/card/CardTitle';\n\nexport interface WorkoutHeaderProps {\n  description: string;\n  short: string;\n  title: string;\n}\n\nconst WorkoutHeader: React.FC<WorkoutHeaderProps> = (props) => {\n  const { description, short, title  } = props;\n  return (\n    <>\n      <Avatar\n        text={short}\n        gridArea='avatar'\n      />\n      <CardText\n        gridArea='text'\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        \n      >\n      </CardText>\n    </>\n  );\n}\n\nexport default WorkoutHeader;","import React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { playlistAtom } from '../playlist/store';\nimport CountdownHeader from './CountdownHeader';\nimport HeaderAction from './HeaderAction';\nimport { playerAtom } from './store';\nimport PlayerHeader from './WorkoutHeader';\n\n\nexport interface HeaderProps {\n  onClose: () => void;\n}\n\nconst Header: React.FC<HeaderProps> = (props) => {\n  const { onClose } = props;\n  const playlistState = useRecoilValue(playlistAtom);\n  const playerState = useRecoilValue(playerAtom);\n  const { playState } = playerState;\n  const { short, name: title, description } = playlistState;\n  const HeaderImpl = playState === 'stopped'\n    ? (\n      <PlayerHeader\n        description={description}\n        short={short}\n        title={title}\n      />\n    )\n    : (\n      <CountdownHeader />\n    );\n  return (\n    <>\n      {HeaderImpl}\n      <HeaderAction\n        onClose={onClose}\n      />\n    </>\n  );\n};\n\n\nexport default Header;\n","import { Theme, useMediaQuery, useTheme } from '@material-ui/core';\n\n// TODO: from global context\nconst useMediaQueries = (theme: Theme) => {\n  const [upxs, upsm, upmd] = [\n    theme.breakpoints.up('xs'),\n    theme.breakpoints.up('sm'),\n    theme.breakpoints.up('md')\n  ];\n  return [upxs, upsm, upmd];\n};\n\n// TODO: from global context\nconst useActiveMediaQuery = (theme: Theme): string => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const mqis = [\n    { mq: upxs, matches: useMediaQuery(upxs) },\n    { mq: upsm, matches: useMediaQuery(upsm) },\n    { mq: upmd, matches: useMediaQuery(upmd) },\n  ];\n  const mq = mqis\n    .filter(mqi => mqi.matches)\n    .map(mqi => mqi.mq)\n    .slice(-1)\n    [0] || upxs;\n  return mq;\n}\n\nconst useRowHeights = (theme: Theme, mq: string): number[] => {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [text, controls, current] = {\n    [upxs]: [16, 11, 15],\n    [upsm]: [17, 11, 15],\n    [upmd]: [15, 13, 15],\n  }[mq].map(s => theme.spacing(s));\n  return [text, controls, current];\n};\n\nfunction useRootStyles(theme: Theme, mq: string): React.CSSProperties {\n  const [upxs, upsm, upmd] = useMediaQueries(theme);\n  const [textHeight, controlsHeight, currentHeight] = useRowHeights(theme, mq);\n  const totalHeight = textHeight + controlsHeight + currentHeight;\n  const listHeight = `calc(100vh - ${theme.variables.navbar.height * 2}px - ${totalHeight}px)`; // TODO: prevent <= 0 \n  return {\n    [upxs]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar text text text text'\n        'controls controls controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `${textHeight}px repeat(4, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upsm]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar text text text'\n        'avatar avatar controls controls controls'\n        'current current current current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(2, ${(textHeight + controlsHeight) / 2}px) repeat(3, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    },\n    [upmd]: {\n      display: 'grid',\n      gridTemplateAreas: `\n        'avatar avatar avatar text text'\n        'avatar avatar avatar controls controls'\n        'avatar avatar avatar current current'\n        'list list list list list'\n      `,\n      gridTemplateColumns: `repeat(3, ${totalHeight / 3}px) repeat(2, 1fr)`,\n      gridTemplateRows: `${textHeight}px ${controlsHeight}px ${currentHeight}px ${listHeight}`,\n    }\n  }[mq];\n}\n\nexport const useLayout = (): {[key: string]: React.CSSProperties} => {\n  const theme = useTheme();\n  const mq = useActiveMediaQuery(theme);\n  const root = useRootStyles(theme, mq);\n  const styles = {\n    root,\n  };\n  return styles;\n}\n","import { Box, useTheme } from '@material-ui/core';\nimport React, { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport Playlist from '../playlist/Playlist';\nimport PlaylistItemCurrent from '../playlist/PlaylistItemCurrent';\nimport { playlistAtom } from '../playlist/store';\nimport Controls from './Controls';\nimport CountdownIsZeroEffect from './CountdownIsZeroEffect';\nimport Header from './Header';\nimport { playerAtom } from './store';\nimport { useLayout } from './useLayout';\n\n\n// TODO: dispatch stop when navigating away\n// TODO: handle empty\nconst Player = () => {\n  const history = useHistory();\n  const styles = useLayout();\n  const theme = useTheme();\n  const ref = useRef<HTMLDivElement>(null);\n  const playlistState = useRecoilValue(playlistAtom);\n  const playerState = useRecoilValue(playerAtom);\n  const { currentItemIndex } = playlistState;\n  const prevCurrentItemIndex = useRef(-999);\n  const { playState } = playerState;\n  const top = theme.variables.playlist.item.height;\n\n  useEffect(() => {\n    if (playState === 'playing'\n      && currentItemIndex > prevCurrentItemIndex.current\n      && currentItemIndex > 0 \n      && currentItemIndex % 2 === 0\n    ) {\n      ref.current?.scrollBy({ top, behavior: 'smooth' });\n    }\n    prevCurrentItemIndex.current = currentItemIndex;\n  }, [currentItemIndex, playState, top]);\n  \n  if (!playlistState || !playlistState.items.length) {\n    history.push(`${process.env.PUBLIC_URL}/workouts`);\n    return null;\n  }\n  \n  const onClose = () => history.push(`${process.env.PUBLIC_URL}/`);\n\n  return (\n    <Box\n      data-testid='player'\n      style={styles.root}\n    >\n      <CountdownIsZeroEffect />\n      <Header\n        onClose={onClose}\n      />\n      <Controls\n        gridArea='controls'\n        playState={playState}\n      />\n      <PlaylistItemCurrent\n        gridArea='current'\n      />\n      <div\n        ref={ref}\n        style={{\n          gridArea: 'list',\n          overflow: 'auto',\n        }}\n      >\n        <Playlist />\n      </div>\n    </Box>\n  );\n}\n\nexport default Player;","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React, { FunctionComponent } from 'react';\n\n\nconst UnderConstruction: FunctionComponent = () => {\n  const theme = useTheme();\n  return (\n    <Box\n      textAlign=\"center\"\n      fontSize=\"2rem\"\n      color={theme.palette.secondary.contrastText}>under construction\n    </Box>\n  )\n};\n\nexport default UnderConstruction;","import { Box, IconButton, makeStyles, Typography, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport React, { useEffect, useRef } from 'react';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: 'inherit',\n    display: 'flex',\n    height: '100%',\n  },\n  button: {\n    color: theme.palette.secondary.light,\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    marginLeft: '1px',\n    textTransform: 'none',\n  },\n  duration: {\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    borderRadius: theme.shape.borderRadius,\n    display: 'flex',\n    flex: 1,\n    height: '100%',\n    justifyContent: 'center',\n    minWidth: '60px',\n  }\n}));\n\nexport interface NumberInputProps {\n  min?: number;\n  max?: number;\n  step?: number;\n  value: number;\n  onChange?: (value: number) => void;\n}\n\nconst NumberInput: React.FC<NumberInputProps> = (props) => {\n  const { value, min=0, max=Number.MAX_VALUE, step=1, onChange } = props;\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const initial = useRef(0);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { initial.current = value }, []);\n\n  const handleDown = () => {\n    const newValue = Math.max(value - step, min);\n    onChange && onChange(newValue);\n  }\n\n  const handleUp = () => {\n    const newValue = Math.min(value + step, max);\n    onChange && onChange(newValue);\n  }\n\n  const handleReset = () => {\n    onChange && onChange(initial.current);\n  }\n\n  return (\n    <Box\n      className={classes.root}\n    >\n      <IconButton\n        className={classes.button}\n        onClick={handleDown}\n      >\n        <RemoveIcon />\n      </IconButton>\n      <Typography\n        variant='h4'\n        className={classes.duration}\n      >\n        {value}\n      </Typography>\n      <IconButton\n        className={classes.button}\n        onClick={handleUp}\n      >\n        <AddIcon />\n      </IconButton>\n      <IconButton\n        className={classes.button}\n        onClick={handleReset}\n      >\n        <ReplayIcon />\n      </IconButton>\n    </Box>\n  );\n}\n\nexport default NumberInput;","import { useTheme, makeStyles } from '@material-ui/core';\nimport Box from '@material-ui/core/Box';\nimport React from 'react';\nimport NumberInput, { NumberInputProps } from '../../shared/NumberInput';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    alignItems: 'center',\n    backgroundColor: theme.palette.primary.main,\n    display: 'grid',\n    gridTemplateColumns: 'min(130px) minmax(150px, 300px)',\n    height: theme.variables.playlist.item.height,\n    marginBottom: theme.spacing(.3),\n  },\n  label: {\n    backgroundColor: theme.palette.primary.main,\n    color: theme.palette.secondary.contrastText,\n    fontSize: theme.typography.h5.fontSize,\n    fontWeight: theme.typography.h5.fontWeight,\n    padding: theme.spacing(1),\n    textTransform: 'uppercase',\n    whiteSpace: 'nowrap'\n  },\n}));\n\ninterface DurationProps extends NumberInputProps{\n  label: string;\n}\n\nconst Duration: React.FC<DurationProps> = ({ label, ...props }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  return (\n    <Box\n      className={classes.root}\n    >\n      <Box\n        className={classes.label}\n      >\n        {label}\n      </Box>\n      <NumberInput\n        {...props}\n      />\n    </Box>\n  );\n}\n\nexport default Duration;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport Avatar, { AvatarProps } from '../../shared/Avatar';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    alignItems: 'center',\n    display: 'grid',\n    fontSize: theme.typography.h4.fontSize,\n    minHeight: theme.variables.avatar.height,\n    gridArea: 'avatar',\n  },\n  textfield: {\n    padding: theme.spacing(1),\n    textAlign: 'center',\n  },\n}));\n\nexport interface AvatarEditProps extends BoxProps, AvatarProps {\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst AvatarEdit: React.FC<AvatarEditProps> = ({ text, onUpdate, ...rootProps }) => {\n  const handleUpdate = (update: EditResult) => {\n    if (!onUpdate) {\n      return;\n    }\n    onUpdate(update);\n  }\n\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      className={classes.root}\n      onOk={handleUpdate}\n      {...rootProps}\n      inputEl={\n        <TextField\n          inputProps={{minLength: 2, maxLength: 2, required: true}}\n          defaultValue={text}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <Avatar\n          text={text}\n        />\n      }\n    />\n  );\n};\n\nexport default AvatarEdit;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\nimport CardDescription from '../../shared/card/CardDescription';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    padding: theme.spacing(1),\n  },\n}));\n\nexport interface CardDescriptionEditProps extends BoxProps {\n  description: string;\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst CardDescriptionEdit: React.FC<CardDescriptionEditProps> = ({ description, onUpdate, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      onOk={onUpdate}\n      { ...rootProps }\n      inputEl={\n        <TextField\n          defaultValue={description}\n          inputProps={{required: true}}\n          multiline\n          rows={3}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <CardDescription>\n          {description}\n        </CardDescription>\n      }\n    />\n  );\n};\n\nexport default CardDescriptionEdit;","import { BoxProps, makeStyles, TextField, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport CardTitle from '../../shared/card/CardTitle';\nimport { EditResult } from '../../shared/EditText';\nimport EditToggle from '../../shared/EditToggle';\n\nconst useStyles = makeStyles(theme => ({\n  textfield: {\n    padding: theme.spacing(1),\n  },\n}));\n\nexport interface CardTitleEditProps extends BoxProps {\n  title: string;\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst CardTitleEdit: React.FC<CardTitleEditProps> = ({ title, onUpdate, ...rootProps }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <EditToggle\n      onOk={onUpdate}\n      { ...rootProps }\n      inputEl={\n        <TextField\n          defaultValue={title}\n          inputProps={{ required: true }}\n          className={classes.textfield}\n        />\n      }\n      displayEl={\n        <CardTitle>\n          {title}\n        </CardTitle>\n      }\n    />\n  );\n};\n\nexport default CardTitleEdit;","import { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport React from 'react';\n\nexport interface HeaderActionProps {\n  onClose: () => void;\n}\n\n// TODO: makeStyles\nconst HeaderAction: React.FC<HeaderActionProps> = (props) => {\n  const { onClose } = props;\n  return (\n    <IconButton\n      color='secondary'\n      onClick={onClose}\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n};\n\n\nexport default HeaderAction;\n","import { Box, BoxProps, useTheme } from '@material-ui/core';\nimport React from 'react';\nimport CardText from '../../shared/card/CardText';\nimport { EditResult } from '../../shared/EditText';\nimport { WorkoutData } from '../store';\nimport AvatarEdit from './AvatarEdit';\nimport CardDescriptionEdit from './CardDescriptionEdit';\nimport CardTitleEdit from './CardTitleEdit';\nimport HeaderAction from './HeaderAction';\n\n\nexport interface HeaderProps extends BoxProps {\n  workout: WorkoutData;\n  onClose?: () => void;  // TODO: page responsibility\n  onUpdate: ({ value, error }: EditResult) => void; // TODO: type\n}\n\nconst HeaderEdit: React.FC<HeaderProps> = ({ workout, onClose, onUpdate, ...rootProps }) => {  \n  const { description, short, title  } = workout;\n  const handleClose = () => onClose && onClose();\n  const handleUpdate = (key: string) => (update: EditResult) => { // TODO: type\n    if (!onUpdate) {\n      return;\n    }\n    const { value: updatedValue, error } = update;\n    const result = { value: {[key]: updatedValue }, error } \n    onUpdate(result);\n  }\n  const theme = useTheme();\n\n  return (\n    <Box\n      display='grid'\n      gridTemplateAreas='\"avatar text\"'\n      gridTemplateColumns={`${theme.variables.avatar.height}px auto`}\n      mb={.3}\n      {...rootProps}\n    >\n      <AvatarEdit\n        text={short}\n        onUpdate={handleUpdate('short')}\n      />\n      <CardText\n        action={\n          <HeaderAction\n            onClose={handleClose}\n          />\n        }\n        title={\n          <CardTitleEdit\n            gridArea='title'\n            title={title}\n            onUpdate={handleUpdate('title')}\n          />\n        }\n        description={\n          <CardDescriptionEdit\n            gridArea='desc'\n            description={description}\n            onUpdate={handleUpdate('description')}\n          />\n        }\n        gridArea='text'\n      />\n    </Box>\n  );\n};\n\nexport default HeaderEdit;","import { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useRecoilState } from 'recoil';\nimport { workoutAtom, WorkoutData, workoutReducer } from '../store';\n\n\n// TODO: rtfm on how to init route w/ data\nconst useWorkout = (notFound: () => void): WorkoutData | undefined => {\n  const [workoutState, setWorkoutState] = useRecoilState(workoutAtom);\n  const { items: workouts, currentItemIndex } = workoutState;\n  const { id } = useParams();\n  const workout = workouts[currentItemIndex];\n\n  useEffect(() => {\n    if (workout) {\n      return;\n    }\n    const index = workouts.findIndex(w => w.id === id);\n    if (index > -1) {\n      setWorkoutState(state => workoutReducer.select(state, index));\n    } else {\n      notFound();\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  return workout;\n}\n\nexport default useWorkout;\n","import Box from '@material-ui/core/Box';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSetRecoilState } from 'recoil';\nimport { ExerciseData } from '../../exercise/data';\nimport ExerciseList from '../../exercise/ExerciseList';\nimport { EditResult } from '../../shared/EditText';\nimport { workoutAtom, workoutReducer } from '../store';\nimport Duration from './Duration';\nimport HeaderEdit from './HeaderEdit';\nimport useWorkout from './useWorkout';\n\n\nconst WorkoutEdit: React.FC<any> = () => {\n  const setWorkoutState = useSetRecoilState(workoutAtom);\n  const history = useHistory();\n  const notFound = () => history.push(`${process.env.PUBLIC_URL}/workouts`);\n  const workout = useWorkout(notFound);\n  if (!workout) {\n    return null;\n  }\n  \n\n  const handleClose = () => history.push(`${process.env.PUBLIC_URL}/`);\n  const handleSetBreakMs = (breakSec: number) => setWorkoutState(state => workoutReducer.update(state, { ...workout, breakMs: breakSec * 1000 }));\n  const handleSetWorkMs = (workSec: number) => setWorkoutState(state => workoutReducer.update(state, { ...workout, workMs: workSec * 1000 }));\n  const handleAddExercise = (exercise: ExerciseData) => setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises: [...workout.exercises, exercise] }));\n  const handleDeleteExercise = (exercises: ExerciseData[]) => setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises }));\n  const handleEditExercise = (exercise: ExerciseData, index: number) => { // TODO: type\n    // TODO: error case?\n    const exercises = [\n      ...workout.exercises.slice(0, index),\n      exercise,\n      ...workout.exercises.slice(index + 1),\n    ];\n    setWorkoutState(state => workoutReducer.update(state, { ...workout, exercises }));\n  }\n  const handleUpdateHeader = (update: EditResult) => { // TODO: type\n    // TODO: error case?\n    const { value } = update;\n    setWorkoutState(state => workoutReducer.update(state, { ...workout, ...value }));\n  }\n  \n  const { exercises, breakMs, workMs } = workout;\n\n  // TODO: edit exercises order drag/drop\n  return (\n    <Box>\n      <HeaderEdit\n        workout={workout}\n        onClose={handleClose}\n        onUpdate={handleUpdateHeader}\n      />\n      <Duration\n        label='Break [sec]'\n        value={breakMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetBreakMs}\n      />\n      <Duration\n        label='Work [sec]'\n        value={workMs / 1000}\n        min={0}\n        max={6000}\n        step={15}\n        onChange={handleSetWorkMs}\n      />\n      <ExerciseList\n        exercises={exercises}\n        onAdd={handleAddExercise}\n        onDelete={handleDeleteExercise}\n        onEdit={handleEditExercise}\n      />\n    </Box>\n  );\n}\n\nexport default WorkoutEdit;\n","import { ExerciseData } from \"../exercise/data\";\nimport { PlaylistData, PlaylistItemData } from \"../playlist/store\";\nimport uid from \"../util/uid\";\nimport { WorkoutData } from \"./store/state\";\n\nfunction toPlaylistItemData(workMs: number, breakMs: number, exercise: ExerciseData): [PlaylistItemData, PlaylistItemData] {\n  const { id, name } = exercise;\n  const b = {\n    id,\n    name: `next up: ${name}`,\n    durationMs: breakMs,\n    tags: {\n      isBreak: true,\n    },\n  };\n  const w = {\n    id: uid(), // TODO: meh\n    name,\n    durationMs: workMs,\n    tags: {\n      breakWork: `${breakMs/1000}/${workMs/1000}`,\n    }\n  };\n  return [b, w];\n}\n\nconst expand = (acc: PlaylistItemData[], [b, w]: [PlaylistItemData, PlaylistItemData]): PlaylistItemData[] => [...acc, b, w];\n\nexport default function toPlaylistData(workout: WorkoutData): PlaylistData {\n  const { short, title: name, description, exercises, workMs, breakMs } = workout;\n  const toPlaylistItemDataBound = toPlaylistItemData.bind(null, workMs, breakMs);\n  const items: PlaylistItemData[] = exercises\n    .map(toPlaylistItemDataBound)\n    .reduce(expand, [])\n  ;\n  return {\n    short,\n    name,\n    description,\n    items,\n  };\n}\n","import { Box, BoxProps } from '@material-ui/core';\nimport React from 'react';\n\ninterface CardProps extends BoxProps {\n  onClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\nconst Card: React.FC<CardProps> = ({ children, onClick, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card'\n      borderRadius={1}\n      display='grid'\n      gridColumn={['span 6', 'span 4', 'span 3']}\n      gridTemplateRows='5fr 2fr'\n      boxShadow={8}\n      {...rootProps}\n      onClick={onClick}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default Card;","import { makeStyles, useTheme } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport React from 'react';\nimport Card from '../../shared/card/Card';\nimport CardText from '../../shared/card/CardText';\nimport CardTitle from '../../shared/card/CardTitle';\nimport id from '../../util/id';\nimport uid from '../../util/uid';\nimport { WorkoutData } from '../store/state';\n\n\nconst useStyles = makeStyles(theme => ({\n  iconContainer: {\n    borderRadius: theme.shape.borderRadius,\n    borderStyle: 'solid',\n    borderWidth: 2,\n    color: theme.palette.secondary.light,\n    cursor: 'pointer',\n    padding: '25%',\n  },\n  icon: {\n    height: '100%',\n    width: '100%',\n  }\n}));\n\nexport interface AddWorkoutProps {\n  onClick: (workout: WorkoutData) => void;\n}\n\nconst AddWorkout: React.FC<AddWorkoutProps> = ({onClick}) => {\n  const handleClick = () => {\n    const workout: WorkoutData = newWorkout();\n    onClick(workout);\n  };\n  const theme = useTheme();\n  const classes = useStyles(theme);\n\n  return (\n    <Card\n      onClick={handleClick}\n    >\n      <div\n        className={classes.iconContainer}\n      >\n        <AddIcon\n          className={classes.icon}\n        />\n      </div>\n      <CardText\n        title={\n          <CardTitle>\n            Add new workout\n          </CardTitle>\n        }\n        description={<></>}\n      />\n    </Card>\n  );\n}\n\nexport default AddWorkout;\n\n// TODO: extract\nfunction newWorkout() {\n  const short = id();\n  const workout: WorkoutData = {\n    id: uid(),\n    short,\n    title: `Workout ${short}`,\n    description: (new Date()).toLocaleDateString(),\n    breakMs: 30000,\n    workMs: 60000,\n    exercises: [\n      {\n        name: \"New Exercise\",\n        id: \"46c7-4d11-yca1-eg87\"\n      },\n    ]\n  };\n  return workout;\n}\n","import Box, { BoxProps } from '@material-ui/core/Box';\nimport React from 'react';\n\nexport interface CardTextActionProps extends BoxProps { }\n\nconst CardTextAction: React.FC<CardTextActionProps> = ({ children, ...rootProps }) => {\n  return (\n    <Box\n      data-testid='card-action'\n      position='absolute'\n      right={0}\n      top={0}\n      {...rootProps}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default CardTextAction;\n","import { Box, ListItemIcon, MenuItem, Switch } from '@material-ui/core';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport React from 'react';\n\nexport interface DeleteMenuItemProps {\n  onClick?: () => void;\n}\n\nconst DeleteMenuItem: React.FC<DeleteMenuItemProps> = ({ onClick }) => {\n  const [canDelete, setCanDelete] = React.useState<boolean>(false);\n  const handleClick = () => onClick && onClick();\n\n  return (\n    <Box\n      alignItems='center'\n      component='li'\n      display='grid'\n      gridTemplateColumns='auto min-content'\n    >\n      <MenuItem\n        component='span'\n        disabled={!canDelete}\n        onClick={handleClick}\n      >\n        <ListItemIcon>\n          <DeleteOutlineIcon />\n        </ListItemIcon>\n          Delete\n        </MenuItem>\n      <Switch\n        onChange={() => setCanDelete(!canDelete)}\n      />\n    </Box>\n  );\n}\n\nexport default DeleteMenuItem;","import { Box, IconButton, ListItemIcon, Menu, MenuItem, useTheme } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport MoreVerticon from '@material-ui/icons/MoreVert';\nimport React from 'react';\nimport DeleteMenuItem from './DeleteMenuItem';\n\nexport type ContextMenuOption =\n  | 'edit'\n  | 'delete'\n  ;\n\nexport interface ContextMenuProps {\n  onClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst ContextMenu: React.FC<ContextMenuProps> = ({ onClick }) => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const theme = useTheme();\n  const handleOpen = (event: React.MouseEvent<HTMLButtonElement>) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n  const handleMenuClick = (menuOption: ContextMenuOption): void => {\n    handleClose();\n    onClick && onClick(menuOption);\n  };\n\n  return (\n    <Box\n      position='relative'\n      right={-1 * theme.spacing(1)}\n    >\n      <IconButton\n        color='secondary'\n        onClick={handleOpen}\n      >\n        <MoreVerticon />\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem\n          onClick={handleMenuClick.bind(globalThis, 'edit')}\n        >\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          Edit\n        </MenuItem>\n        <DeleteMenuItem\n          onClick={handleMenuClick.bind(globalThis, 'delete')}\n        />\n      </Menu>\n    </Box>\n  );\n}\n\nexport default ContextMenu;","import React from 'react';\nimport Avatar from '../../shared/Avatar';\nimport Card from '../../shared/card/Card';\nimport CardDescription from '../../shared/card/CardDescription';\nimport CardText from '../../shared/card/CardText';\nimport CardTextAction from '../../shared/card/CardTextAction';\nimport CardTitle from '../../shared/card/CardTitle';\nimport { WorkoutData } from '../store/state';\nimport ContextMenu, { ContextMenuOption } from './ContextMenu';\n\nexport interface WorkoutProps {\n  workout: WorkoutData;\n  onCardClick?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onContextMenuClick?: (menuOption: ContextMenuOption) => void;\n}\n\nconst Workout: React.FC<WorkoutProps> = (props) => {\n  const { workout, onCardClick, onContextMenuClick } = props;\n  const { description, short, title } = workout;\n  return (\n    <Card\n      onClick={onCardClick}\n    >\n      <Avatar\n        text={short}\n      />\n      <CardText\n        description={\n          <CardDescription>\n            {description}\n          </CardDescription>\n        }\n        title={\n          <CardTitle>\n            {title}\n          </CardTitle>\n        }\n        action={\n          <CardTextAction>\n            <ContextMenu\n              onClick={onContextMenuClick}\n            />\n          </CardTextAction>\n        }\n      >\n      </CardText>\n    </Card>\n  );\n}\n\nexport default Workout;","import { Box } from '@material-ui/core';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useRecoilState } from 'recoil';\nimport usePlayerPageDispatcher from '../../player/usePlayerPageDispatcher';\nimport { workoutReducer } from '../store';\nimport { workoutAtom, WorkoutData } from '../store/state';\nimport toPlaylistData from '../toPlaylistData';\nimport AddWorkout from './AddWorkout';\nimport { ContextMenuOption } from './ContextMenu';\nimport Workout from './Workout';\n\n\nexport default function WorkoutList() {\n  const theme = useTheme();\n  const history = useHistory();\n  const dispatch = usePlayerPageDispatcher();\n  const [workoutState, setWorkoutState] = useRecoilState(workoutAtom);\n  const { items: workouts } = workoutState;\n  \n  const handleAddWorkout = (workout: WorkoutData) => {\n    const { short, id } = workout;\n    setWorkoutState(state => workoutReducer.add(state, workout));\n    history.push(`${process.env.PUBLIC_URL}/workouts/${short}/${id}`);\n  };\n\n  const handleCardClick = (workout: WorkoutData, index: number) => {\n    setWorkoutState(state => workoutReducer.select(state, index));\n    const playlist = toPlaylistData(workout);\n    dispatch.set(playlist); // TODO: rather do that via navigation\n    history.push(`${process.env.PUBLIC_URL}/player`); // TODO: magic strings\n  }\n\n  const handleContextMenuClick = (workout: WorkoutData, index: number, menuOption: ContextMenuOption) => {\n    const { id, short } = workout;\n    setWorkoutState(state => workoutReducer.select(state, index));\n    switch (menuOption) {\n      case 'delete':\n        setWorkoutState(workoutReducer.delete);\n        break;\n      case 'edit':\n        history.push(`${process.env.PUBLIC_URL}/workouts/${short}/${id}`);\n        break;\n      default:\n        throw Error(`unknowkn menu option ${menuOption}`);\n    }\n  }\n\n  return (\n    <Box\n      display='grid'\n      gridTemplateColumns='repeat(12, 1fr)'\n      gridGap={theme.spacing(1)}\n      m={1}\n    >\n      <AddWorkout \n        onClick={handleAddWorkout}\n      />\n      {workouts.map((workout: WorkoutData, index: number) => (\n        <Workout\n          key={workout.id}\n          workout={workout}\n          onCardClick={() => handleCardClick(workout, index)}\n          onContextMenuClick={handleContextMenuClick.bind(globalThis, workout, index)}\n        />\n      ))}\n    </Box>\n  );\n}\n","import Box from '@material-ui/core/Box';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport ExerciseList from './exercise/ExerciseList';\nimport Main from './Main';\nimport BottomNavigation from './navigation/BottomNavigation';\nimport TopNavigation from './navigation/TopNavigation';\nimport Player from './player/Player';\nimport UnderConstruction from './shared/UnderConstruction';\nimport WorkoutEdit from './workout/edit/WorkoutEdit';\nimport WorkoutList from './workout/list/WorkoutList';\n\nconst App = () => { \n  const theme = useTheme();\n\n  // TODO: rtfm -> router\n  return (\n    <Box\n      height={'100vh'}\n      bgcolor={theme.variables.root.backgroundColor}\n      style={{\n        touchAction: 'manipulation', // https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away\n      }}\n    >\n      <TopNavigation />\n      <Main>\n        <Route path={`${process.env.PUBLIC_URL}/workouts/:short/:id`} component={WorkoutEdit} />\n        <Route exact path={`${process.env.PUBLIC_URL}/workouts`} component={WorkoutList} />\n        <Route exact path={`${process.env.PUBLIC_URL}/player`} component={Player} />\n        <Route path={`${process.env.PUBLIC_URL}/exercises`} component={ExerciseList} />\n        <Route path={`${process.env.PUBLIC_URL}/recents`} component={UnderConstruction} />\n        <Route path={`${process.env.PUBLIC_URL}/favorites`} component={UnderConstruction} />\n        <Route exact path={`${process.env.PUBLIC_URL}/`} component={WorkoutList} />\n        <Route >\n          <Redirect to={`${process.env.PUBLIC_URL}/`} />\n        </Route>\n      </Main>\n      <BottomNavigation />\n    </Box>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SimplePaletteColorOptions } from \"@material-ui/core/styles/createPalette\";\n\nexport const bluegrey400: SimplePaletteColorOptions = {\n  main: '#78909c',\n  light: '#a7c0cd',\n  dark: '#4b636e',\n  contrastText: '#ffffff',\n};\n\nexport const bluegrey800: SimplePaletteColorOptions = {\n  main: '#37474f',\n  light: '#62727b',\n  dark: '#102027',\n  contrastText: '#ffffff',\n};\n\nexport const grey900: SimplePaletteColorOptions = {\n  main: '#212121',\n  light: '#484848',\n  dark: '#000000',\n  contrastText: '#ffffff',\n};\n\nexport const grey800: SimplePaletteColorOptions = {\n  main: '#424242',\n  light: '#6d6d6d',\n  dark: '#1b1b1b',\n  contrastText: '#ffffff',\n};\n\nexport const grey400: SimplePaletteColorOptions = {\n  main: '#bdbdbd',\n  light: '#efefef',\n  dark: '#8d8d8d',\n  contrastText: '#000000',\n};","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { PaletteOptions } from \"@material-ui/core/styles/createPalette\";\nimport { bluegrey400, bluegrey800, grey400, grey800, grey900 } from \"./colors\";\n\nconst bluegrey400_bluegrey800: PaletteOptions = {\n  primary: bluegrey400,\n  secondary: bluegrey800,\n};\n\nconst bluegrey800_bluegrey400: PaletteOptions = {\n  primary: bluegrey800,\n  secondary: bluegrey400,\n};\n\nconst grey800_grey800: PaletteOptions = {\n  primary: grey800,\n  secondary: grey800,\n};\n\nconst grey800_grey400: PaletteOptions = {\n  primary: grey800,\n  secondary: grey400,\n};\n\nconst grey900_grey400: PaletteOptions = {\n  primary: grey900,\n  secondary: grey400,\n};\n\nconst palette: PaletteOptions = bluegrey800_bluegrey400;\n\nexport default palette;","import { createMuiTheme, responsiveFontSizes, SimplePaletteColorOptions } from \"@material-ui/core\";\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport { ComponentProps } from \"react\";\nimport palette from \"./palette\";\nimport { Overrides } from \"@material-ui/core/styles/overrides\";\n\n// https://material-ui.com/guides/typescript/#augmenting-your-props-using-withstyles\ndeclare module '@material-ui/core/styles/createMuiTheme' {\n  interface Theme {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number, // React.CSSProperties['height'] -> string | number | undefined\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n\n  // allow configuration using `createMuiTheme`\n  interface ThemeOptions {\n    variables: {\n      avatar: {\n        height: number,\n      },\n      countdown: {\n        height: number,\n      },\n      navbar: {\n        height: number,\n      },\n      player: {\n        height: number,\n      },\n      playlist: {\n        currentItem: {\n          height: number,\n        },\n        item: {\n          height: number,\n        },\n      },\n      root: {\n        backgroundColor: string,\n      }\n    }\n  }\n}\n\nconst primary = palette.primary as SimplePaletteColorOptions;\nconst secondary = palette.secondary as SimplePaletteColorOptions;\nconst SPACING = 8; // TODO: reuse from default mui theme?\nconst TOOLBAR_HEIGHT = SPACING * 6; // MuiToolbar variant dense\n\nconst variables = {\n  avatar: {\n    height: SPACING * 17,\n  },\n  countdown: {\n    height: SPACING * 16,\n  },\n  navbar: {\n    height: TOOLBAR_HEIGHT,\n  },\n  player: {\n    height: SPACING * 27,\n  },\n  playlist: {\n    currentItem: {\n      height: SPACING * 15,\n    },\n    item: {\n      height: SPACING * 7.5,\n    },\n  },\n  root: {\n    backgroundColor: '#102027e6', // theme.palette.primary.dark w/ alpha .9\n  }\n};\n\nconst props: ComponentProps<any> | undefined = {\n  MuiTypography: {\n    variantMapping: {\n      h1: 'h3',\n      h2: 'h3',\n      h3: 'h3',\n    },\n  },\n  MuiToolbar: {\n    variant: 'dense', // TOOLBAR_HEIGHT\n  }\n};\n\nconst typography = {\n  caption: {\n    lineHeight: 1.2,\n  }\n};\n\nconst overrides: Overrides = {\n  MuiCssBaseline: {\n    '@global': {\n      ':focus': {\n        outline: 'unset'\n      }\n    },\n  },\n  MuiBottomNavigation: {\n    root: {\n      backgroundColor: primary.main,\n      height: TOOLBAR_HEIGHT,\n    },\n  },\n  MuiBottomNavigationAction: {\n    wrapper: {\n      color: secondary.light,\n    }\n  },\n  MuiListItemIcon: {\n    root: {\n      color: secondary.light,\n      minWidth: '32px',\n    }\n  },\n  MuiMenu: {\n    paper: {\n      backgroundColor: primary.dark,\n      color: secondary.light,\n    }\n  },\n  MuiFab: {\n    root: {\n      '&$disabled': {\n        backgroundColor: primary.main,\n        color: primary.dark,\n      }\n    }\n  },\n  MuiInputBase: {\n    root: {\n      color: 'inherit',\n      fontSize: 'inherit',\n    }\n  }\n};\n\n\nlet theme: Theme = createMuiTheme({\n  palette,\n  props,\n  overrides,\n  typography,\n  variables,\n});\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { RecoilRoot } from 'recoil';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport theme from './theme/theme';\nimport WorkoutStatePersist from './workout/store/workout-state-persist';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <BrowserRouter>\n        <RecoilRoot>\n          <WorkoutStatePersist />\n          <App />\n        </RecoilRoot>\n      </BrowserRouter>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","export * from './actions';\nexport * from './reducer';\nexport * from './state';\n","const gen4 = (): string => Math.random().toString(16).slice(-4);\n\nconst uid = (): string => `${gen4()}-${gen4()}-${gen4()}-${gen4()}`;\n\nexport default uid;\n","import { atom } from \"recoil\";\nimport { ExerciseData } from \"../../exercise/data\";\nimport { loadState } from \"../../util\";\nimport { WORKOUT_STATE_KEY } from \"./workout-state-persist\";\n\nconst NOT_FOUND = -1;\n\nexport interface WorkoutData {\n  id: string;\n  short: string;\n  title: string;\n  description: string;\n  workMs: number;\n  breakMs: number;\n  exercises: ExerciseData[];\n}\n\nexport interface WorkoutState {\n  items: WorkoutData[];\n  currentItemIndex: number;\n}\n\nexport const initialState: WorkoutState = {\n  items: [],\n  currentItemIndex: NOT_FOUND,\n}\n\nexport const workoutAtom = atom({\n  key: 'workoutState',\n  default: loadState<WorkoutState>(WORKOUT_STATE_KEY) || initialState,\n});","import { atom } from \"recoil\";\n\nconst NOT_FOUND = -1;\nconst EMPTY = '';\n\n// TODO: naming conventions: interfaces vs models\nexport interface PlaylistData {\n  short: string;\n  name: string;\n  description: string;\n  items: PlaylistItemData[];\n}\n\nexport interface PlaylistState extends PlaylistData {\n  currentItemIndex: number;\n}\n\nexport const initialState: PlaylistState = {\n  short: EMPTY,\n  name: EMPTY,\n  description: EMPTY,\n  items: [], \n  currentItemIndex: NOT_FOUND,\n}\n\nexport interface PlaylistItemData {\n  id: string;\n  name: string;\n  durationMs: number;\n  tags?: {[key: string]: any};\n}\n\nexport const playlistAtom = atom({\n  key: 'playlistState',\n  default: initialState,\n});","let lastId = 0;\n\nconst id = () => {\n  lastId = lastId > 98\n    ? 0\n    : lastId + 1;\n  return lastId < 10\n    ? `0${lastId}`\n    : `${lastId}`;\n};\n\nexport default id;\n","import React, { useEffect } from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { persistState } from '../../util';\nimport { workoutAtom, WorkoutState } from './state';\n\nexport const WORKOUT_STATE_KEY = 'workout';\n\nconst WorkoutStatePersist: React.FC = () => {\n  const workoutState = useRecoilValue(workoutAtom);\n\n  useEffect(() => {\n    persistState<WorkoutState>(WORKOUT_STATE_KEY, workoutState);\n  }, [workoutState]);\n\n  return null;\n}\n\nexport default WorkoutStatePersist;","export const loadState = <T extends any>(key: string): T | undefined => {\n  try {\n    const stateJson = localStorage.getItem(key);\n    if (stateJson) {\n      return JSON.parse(stateJson);\n    }\n  } catch (err) {\n    console.warn('Unable to hypdrate state from storage', err);\n  }\n};\n\nexport const persistState = <T extends any>(key: string, state: T): void => {\n  try {\n    localStorage.setItem(key, JSON.stringify(state));\n  } catch (err) {\n    console.warn('Unable to persist state to storage', err);\n  }\n};\n"],"sourceRoot":""}